function save_app(){var a=0;if(""!=external_app_id&&""!=external_user_id){$("#author").val(external_user_id);var b=new FormData($("#catalogue_app_form_new")[0]);$.ajax({type:"POST",url:"ajax.php",async:!1,data:b,success:function(b){return b>0?(a=1,$("#appid").val(b),a):"app_exit"==b?($("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("This app name already exist."),a):($("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Oops something went wrong.try again later"),a)},cache:!1,contentType:!1,processData:!1})}else $.ajax({type:"POST",url:"login.php",async:!1,data:"check=login",success:function(b){if(!b)return $("#page_ajax").html("").hide(),$("#login_type").val(""),$("#login_type").val("product"),$("#login_email").val(""),$("#login_password").val(""),$("#register_email").val(""),$("#register_password").val(""),$("#register_repeat_password").val(""),$(".popup_container").css("display","block"),$(".login_popup").css("display","block"),$("#email_error").text(""),$("#login_email").css("border","1px solid #e5e5e5"),$("#login_password").css("border","1px solid #e5e5e5"),$("#register_email").css("border","1px solid #e5e5e5"),$("#register_password").css("border","1px solid #e5e5e5"),$("#register_repeat_password").css("border","1px solid #e5e5e5"),$("#remail_error").text(""),a;res=b.split("##"),external_app_id=res[1],external_user_id=res[0];var c=res[2];if(0!=c)return $(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please complete your profile to proceed."),window.location="userprofile.php",a;if(res[0]>0){$("#author").val(res[0]);var d=new FormData($("#catalogue_app_form_new")[0]);$.ajax({type:"POST",url:"ajax.php",async:!1,data:d,success:function(b){return b>0?(a=1,$("#appid").val(b),a):"app_exit"==b?($("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("This app name already exist."),a):($("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Oops something went wrong.try again later"),a)},cache:!1,contentType:!1,processData:!1})}else $(".cropcancel").trigger("click")}});return a}function send_to_catalogue(){app_id=$("#appid").val(),app_name=$("#app_Name").val();var a=$("#curr_id").val();$.ajax({type:"POST",url:"ajax.php",data:"type=catlog_app_login_check",success:function(b){if("fails"==b)$("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("App created successfully"),window.location="seller-profile.php?app_id="+app_id+"&app_name="+app_name+"&curr_id="+a;else{var c=b.split("##");password=c[1],email=c[0],$("#screenoverlay").css("display","none"),"add"==$("#action").val()&&($(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("App created successfully")),"edit"==$("#action").val()&&($(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("App updated successfully")),window.location=catalogueUrl+"catalogue/admin/index.php?route=common/login&email="+email+"&password="+password+"&app_id="+app_id+"&app_name="+app_name+"&curr_id="+a}}})}function form_validation(){var a=0;$("#screenoverlay").css("display","block"),app_name=$("#app_Name").val(),app_type=$("#app_type").val(),banner1=$("#banner_img_1").attr("class"),banner2=$("#banner_img_2").attr("class"),banner3=$("#banner_img_3").attr("class"),banner_check1=$("#banner_img_1").val(),banner_check2=$("#banner_img_2").val(),banner_check3=$("#banner_img_3").val();var b=$("#curr_id").val();if(""==app_name||null==app_name)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please choose app name "),$("#app_Name").focus(),!1;if(""==app_type||null==app_type)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please choose catalogue app type"),$("#app_type").focus(),!1;if(""==b||null==b)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please select currency"),$("#curr_id").focus(),!1;if(""==banner1||null==banner1)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please add all banners"),$("#banner_img_1").focus(),!1;if(""!=banner_check1)switch(banner_check1.substring(banner_check1.lastIndexOf(".")+1).toLowerCase()){case"jpg":case"jpeg":case"png":break;default:return $("#banner_img_1").val(""),$("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Check image extension"),!1}if(""==banner2||null==banner2)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please add all banners"),$("#banner_img_2").focus(),!1;if(""!=banner_check2)switch(banner_check2.substring(banner_check2.lastIndexOf(".")+1).toLowerCase()){case"jpg":case"jpeg":case"png":break;default:return $("#banner_img_2").val(""),$("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Check image extension"),!1}if(""==banner3||null==banner3)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please add all banners"),$("#banner_img_3").focus(),!1;if(""!=banner_check3)switch(banner_check3.substring(banner_check3.lastIndexOf(".")+1).toLowerCase()){case"jpg":case"jpeg":case"png":break;default:return $("#banner_img_3").val(""),$("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Check image extension"),!1}return a=1}function save_form_validation(){var a=0;if($("#screenoverlay").css("display","block"),app_name=$("#app_Name").val(),app_type=$("#app_type").val(),curr_id=$("#curr_id").val(),""==app_name||null==app_name)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please choose app name "),$("#app_Name").focus(),!1;if(""==app_type||null==app_type)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please choose catalogue app type"),$("#app_type").focus(),!1;if(""==curr_id||null==curr_id)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please select currency"),$("#curr_id").focus(),!1;var b=$("#feedback").is(":checked"),c=$("#feedbackformemail").val();$("#feedbackphone").val();if(b===!0&&""==c)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please add feedback form email id"),$("#feedbackformemail").focus(),!1;var e=$("#contact").is(":checked"),f=$("#contactusemail").val();$("#contactussupport").val();if(e===!0&&""==f)return $("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please add contact us form email id"),$("#contactusemail").focus(),!1;var h=$("#tandc").is(":checked"),i=$("#tnclink").val();return h===!0&&""==i?($("#screenoverlay").css("display","none"),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please add terms and conditions link"),$("#tnclink").focus(),!1):a=1}function mail_confirm(a){var b=0;return $.ajax({type:"POST",url:"login.php",async:!1,data:"check="+a,success:function(a){b=a?a:0}}),b}$(document).ready(function(){$(document).on("click",".confirm_name_form input[type='button']",function(){$(".popup_container").css("display","none"),$(".confirm_name").css("display","none")}),$(".free_down").click(function(){$(".popup_container").css("display","block"),$(".download_popup").css("display","block")}),$("#send_file").click(function(){email=$("#download_email").val(),device=$("#download_device").val();var a=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return""!=email&&null!=email||""!=device&&null!=device?""==email||null==email?($("#download_email").css("border","1px solid #ff0000"),!1):a.test(email)?($("#download_email").css("border","1px solid #e5e5e5"),$("#demail_error").text(""),""==device||null==device?($("#download_device").css("border","1px solid #ff0000"),!1):($("#download_device").css("border","1px solid #e5e5e5"),$.ajax({type:"POST",url:"ajax.php",data:"email="+email+"&device="+device+"&type=trial",success:function(a){"success"==a?($("#download_email").val(""),$("#download_device").val(""),$("#download_loading").html("Please check your email for details. ")):"fail"==a?$("#download_loading").html("Invalid Username or Password."):$("#download_loading").html("OOps something went wrong.Try again later")},beforeSend:function(){$("#download_loading").html("Please wait....")}}),!1)):($("#download_email").css("border","1px solid #ff0000"),$("#demail_error").text("Invalid email"),!1):($("#download_email").css("border","1px solid #ff0000"),$("#download_device").css("border","1px solid #ff0000"),!1)}),$("#save_app").click(function(){$("#screenoverlay").css("display","block"),app_id=$("#appid").val(),""==app_id&&save_app()}),$("#oc_product").click(function(){result=form_validation(),result>0&&(app_id=$("#appid").val(),""==app_id?(output=save_app(),output>0&&send_to_catalogue()):app_id&&(output=save_app(),output>0&&send_to_catalogue()))});$("#save_catalogue_app").click(function(){result=save_form_validation(),save_msg=$("#save_msg").val(),result>0&&(out=save_app(),out>0&&(app_id=$("#appid").val(),app_id>0&&($("#screenoverlay").css("display","none"),"yes"==save_msg&&($(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Data Saved Successfully.")),$(".addproduct").text("View Products"),$("#action").val("edit"))))}),$("#finish_catalogue_app").click(function(){if(result=form_validation(),result>0){if(outMob=mail_confirm("mob_confirm"),0!=outMob)return save_app(),$(".popup_container").css("display","block"),$(".confirm_name").css("display","block"),$(".confirm_name_form p").text("Please complete your profile to proceed."),window.location="userprofile.php",x;out=save_app(),out>0&&(app_id=$("#appid").val(),app_id>0&&($("#screenoverlay").css("display","none"),$(".addproduct").text("View Products"),$("#action").val("edit"),window.location="add-icons.php?app_id="+app_id))}})});var external_app_id="",external_user_id="";