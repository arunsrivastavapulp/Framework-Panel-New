var storedLayouts = [
    {
        index: '1',
    layout: '<div class="half_widget fontfamily" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img src="' + BASEURL + 'images/video_img_half.png" alt="" class="video_img"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="half_widget fontfamily" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img src="' + BASEURL + 'images/video_img_half.png" alt="" class="video_img"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="half_widget img_text" data-component="19"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg" alt="Image Not Found"><img src="' + BASEURL + 'images/video_img_half.png" alt="" class="video_img"><div class="half_widget_img_text"><p class="img_heading">Heading</p></div><div class="clear"></div></div><div class="half_widget_text"><a href="#"><span class="icon-share"></span></a><a href="#"><span class="icon-favorite"></span></a></div></div><div class="half_widget img_text" data-component="19"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg" alt="Image Not Found"><img src="' + BASEURL + 'images/video_img_half.png" alt="" class="video_img"><div class="half_widget_img_text"><p class="img_heading">Heading</p></div><div class="clear"></div></div><div class="half_widget_text"><a href="#"><span class="icon-share"></span></a><a href="#"><span class="icon-favorite"></span></a></div></div><div class="small_widget layout1 layout8 layout9" data-component="33"><p class="widgetClose">x</p><a href="http://www.facebook.com/yourProfile"><div class="small_widget_img"><img src="' + BASEURL + 'images/facebook.png" alt="Image Not Found"></div><div class="small_widget_text"><p>Like us on <br/><span>Facebook</span></p></div><div class="clear"></div></a></div><div class="small_widget layout1 layout8 layout9" data-component="33"><p class="widgetClose">x</p><a href="http://www.twitter.com/yourProfile"><div class="small_widget_img"><img src="' + BASEURL + 'images/twitter.png" alt="Image Not Found"></div><div class="small_widget_text"><p>Follow us on <br/><span>Twitter</span></p></div><div class="clear"></div></a></div><div class="half_widget fontfamily" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img src="' + BASEURL + 'images/video_img_half.png" alt="" class="video_img"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="half_widget fontfamily" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img src="' + BASEURL + 'images/video_img_half.png" alt="" class="video_img"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div>'
    },
    {
        index: '2',
    layout: '<div class="full_widget fontchange" data-component="7" data-ss-colspan="2"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img.jpg"><img src="' + BASEURL + 'images/video_img_full.png" alt="" class="video_img"><div class="clear"></div></div><div class="full_widget_text"><p>Heading</p></div></div><div class="full_widget fontchange" data-component="7" data-ss-colspan="2"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img.jpg"><img src="' + BASEURL + 'images/video_img_full.png" alt="" class="video_img"><div class="clear"></div></div><div class="full_widget_text"><p>Heading</p></div></div><div class="full_widget fontchange" data-component="7" data-ss-colspan="2"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img.jpg"><img src="' + BASEURL + 'images/video_img_full.png" alt="" class="video_img"><div class="clear"></div></div><div class="full_widget_text"><p>Heading</p></div></div>'
    },
    {
        index: '3',
    layout: '<div class="half_widget fontfamily layout1" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_half.png"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="half_widget fontfamily layout1" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_half.png"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="full_widget fontchange" data-component="7" data-ss-colspan="2"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img.jpg"><img src="' + BASEURL + 'images/video_img_full.png" alt="" class="video_img"><div class="clear"></div></div><div class="full_widget_text"><p>Heading</p></div></div><div class="small_widget layout1 layout8 layout9" data-component="33"><p class="widgetClose">x</p><a href="http://www.facebook.com/yourProfile"><div class="small_widget_img"><img src="' + BASEURL + 'images/facebook.png" alt="Image Not Found"></div><div class="small_widget_text"><p>Like us on <br/><span>Facebook</span></p></div><div class="clear"></div></a></div><div class="contact_small_widget layout1" data-component="29"><p class="widgetClose">x</p><p class="contact_small_heading">Heading</p><p class="contact_small_subheading">Subheading</p><div class="contact_btns"><a href="#" class="your_mail"><img src="' + BASEURL + 'images/contact_mail.png" /></a><a href="#" class="your_phone"><img src="' + BASEURL + 'images/contact_phone.png" /></a></div></div>',
        banner: '<img src="' + BASEURL + 'images/widget_full_img_only.jpg" class="active"><img src="' + BASEURL + 'images/widget_full_img_only.jpg"><img src="' + BASEURL + 'images/widget_full_img_only.jpg"><div class="pager"><div class="active"></div><div></div><div></div></div><div class="clear"></div>'
    },
    {
        index: '11',
        layout: '<div class="full_widget head_cont" data-ss-colspan="2" data-component="19"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_full.png"><div class="clear"></div><div class="full_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div><div class="full_widget_text"><a href="#"><span class="icon-share"></span></a><a href="#"><span class="icon-favorite"></span></a></div></div><div class="full_widget head_cont" data-ss-colspan="2" data-component="19"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_full.png"><div class="clear"></div><div class="full_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div><div class="full_widget_text"><a href="#"><span class="icon-share"></span></a><a href="#"><span class="icon-favorite"></span></a></div></div><div class="full_widget head_cont" data-ss-colspan="2" data-component="19"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_full.png"><div class="clear"></div><div class="full_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div><div class="full_widget_text"><a href="#"><span class="icon-share"></span></a><a href="#"><span class="icon-favorite"></span></a></div></div>'
    },
    {
        index: '12',
        layout: '<div class="item_full_widget" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">Heading</p><p class="item_content">content</p><div class="clear"></div><p class="item_disc">Description</p></div></div><div class="item_full_widget" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">Heading</p><p class="item_content">content</p><div class="clear"></div><p class="item_disc">Description</p></div></div>'
    },
    {
        index: '6',
        layout: '<div class="full_widget long_text layout7" data-ss-colspan="2" data-component="13"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img_only.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_full.png"><div class="clear"></div><div class="full_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div><div class="full_widget_text"><div class="long_text_subheading">Sub Heading</div><div class="long_text_content">Content</div><a href="#"><span class="icon-share"></span></a><a href="#"><span class="icon-favorite"></span></a></div></div><div class="full_widget long_text layout7" data-ss-colspan="2" data-component="13"><p class="widgetClose">x</p><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_img_only.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_full.png"><div class="clear"></div><div class="full_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div><div class="full_widget_text"><div class="long_text_subheading">Sub Heading</div><div class="long_text_content">Content</div><a href="#"><span class="icon-share"></span></a><a href="#"><span class="icon-favorite"></span></a></div></div>'
    },
    {
        index: '7',
        layout: '<div class="contact_widget" data-ss-colspan="2" data-component="5"><p class="widgetClose">x</p><p class="contactus">Heading</p><div class="address">Content</div><div class="phone">Text</div></div><div class="map_full_widget" data-component="44" data-latitude="0" data-longitude="0" data-ss-colspan="2"><div class="full_widget_img"><img src="' + BASEURL + 'images/widget_full_map_img.jpg"><div class="clear"></div></div><div class="full_widget_text"><p>Heading</p></div></div>'
    },
    {
        index: '8',
        layout: '<div class="big_widget" data-component="14" data-ss-colspan="2"><p class="widgetClose">x</p><div class="big_widget_img"><img src="' + BASEURL + 'images/widget_big_img_only.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_big.png"><div class="clear"></div><div class="big_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div></div><div class="head_disc_widget" data-component="5" data-ss-colspan="2"><p class="widgetClose">x</p><div class="head_disc_content"><h2>Heading</h2><div class="head_disc_content_text">Add Description</div></div></div>',
    },
    {
        index: '9',
    layout: '<div class="half_widget fontfamily layout1" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_half.png"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="half_widget fontfamily layout1" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_half.png"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="half_widget fontfamily layout1" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_half.png"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="half_widget fontfamily layout1" data-component="7"><p class="widgetClose">x</p><div class="half_widget_img"><img src="' + BASEURL + 'images/widget_img.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_half.png"><div class="clear"></div></div><div class="half_widget_text"><p>Heading</p></div></div><div class="small_widget layout1 layout8 layout9" data-component="33"><p class="widgetClose">x</p><a href="http://www.facebook.com/yourProfile"><div class="small_widget_img"><img src="' + BASEURL + 'images/facebook.png" alt="Image Not Found"></div><div class="small_widget_text"><p>Like us on <br/><span>Facebook</span></p></div><div class="clear"></div></a></div><div class="contact_small_widget layout1" data-component="29"><p class="widgetClose">x</p><p class="contact_small_heading">Heading</p><p class="contact_small_subheading">Subheading</p><div class="contact_btns"><a href="#" class="your_mail"><img src="' + BASEURL + 'images/contact_mail.png" /></a><a href="#" class="your_phone"><img src="' + BASEURL + 'images/contact_phone.png" /></a></div></div>',
        banner: '<img src="' + BASEURL + 'images/widget_full_img_only.jpg" class="active"><img src="' + BASEURL + 'images/widget_full_img_only.jpg"><img src="' + BASEURL + 'images/widget_full_img_only.jpg"><div class="pager"><div class="active"></div><div></div><div></div></div><div class="clear"></div>'
    },
    {
        index: '10',
        layout: '<div class="big_widget_text about" data-ss-colspan="2" data-component="14"><div class="big_widget_img"><img src="' + BASEURL + 'images/widget_big_img_only.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_big.png"><div class="clear"></div><div class="big_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div><div class="big_widget_bottom_text"><p class="about">About Us</p><div class="clear"></div></div></div><div class="tabbing_widget" data-ss-colspan="2" data-component="15"><div class="tabbing_widget_head"><ul class="tabs"><li class="active"><span>Tab 1</span></li><li><span>Tab 2</span></li><li><span>Tab 3</span></li><div class="clear"></div></ul></div><div class="tabbing_widget_body"><div class="tab_content" style="display:block;"><div class="tab_content_text">Add Description1</div></div><div class="tab_content" style="display:none;"><div class="tab_content_text">Add Description2</div></div><div class="tab_content" style="display:none;"><div class="tab_content_text">Add Description3</div></div></div></div>'
    },
	{
		index:'4',
		layout:'<div class="weblink_widget" data-ss-colspan="2" data-component="17" data-weblink="http:\\\\"> <p>Add Weblink</p></div>'
	},
    {
        index: '5',
        layout: '<div class="big_widget" data-component="14" data-ss-colspan="2"><p class="widgetClose">x</p><div class="big_widget_img"><img src="' + BASEURL + 'images/widget_big_img_only.jpg"><img class="video_img" alt="" src="' + BASEURL + 'images/video_img_big.png"><div class="clear"></div><div class="big_widget_img_text"><p class="img_heading">Heading</p><div class="clear"></div></div></div></div><div class="head_disc_widget" data-component="5" data-ss-colspan="2"><p class="widgetClose">x</p><div class="head_disc_content"><h2>Heading</h2><div class="head_disc_content_text">Add Description</div></div></div><div class="social_icons" data-ss-colspan="2" data-component="2"><p class="next">Next</p><a><span class="next-icon"><i class="icon-arrow"></i></span></a></div>',
    },
	{
        index: '21',
        layout: '<div class="label_left_textbox common_form_box" data-ss-colspan="2" data-component="25"><p class="widgetClose">x</p><div class="label_left"><label class="common_input_label">Label Text</label></div><div class="textbox_right"><input type="text" disabled placeholder="Hint Text" class="common_input_textbox"></div><div class="common_input_overlay"></div></div><div class="full_textbox_Label common_form_box layout21" data-ss-colspan="2" data-component="26"><p class="widgetClose">x</p><label class="common_input_label">Label Text</label><div class="full_textbox_inner"><input type="text" disabled placeholder="Hint Text" class="common_input_textbox" style="background:#fff;"></div><div class="common_input_overlay"></div></div><div class="full_textbox common_form_box layout21" data-ss-colspan="2" data-component="24"><p class="widgetClose">x</p><div class="full_textbox_inner"><input type="text" disabled placeholder="Hint Text" class="common_input_textbox" style="background:#fff;"></div><div class="common_input_overlay"></div></div><div class="label_left_textbox common_form_box layout21" data-ss-colspan="2" data-component="25"><p class="widgetClose">x</p><div class="label_left"><label class="common_input_label">Label Text</label></div><div class="textbox_right"><input type="text" disabled placeholder="Hint Text" class="common_input_textbox" style="background:#fff;"></div><div class="common_input_overlay"></div></div><div class="full_textbox_Label common_form_box layout21" data-ss-colspan="2" data-component="26"><p class="widgetClose">x</p><label class="common_input_label">Label Text</label><div class="full_textbox_inner"><input type="text" disabled placeholder="Hint Text" class="common_input_textbox" style="background:#fff;"></div><div class="common_input_overlay"></div></div><div class="full_textbox_date common_form_box layout21" data-ss-colspan="2" data-component="50"><p class="widgetClose">x</p><div class="full_textbox_inner"><input type="date" disabled placeholder="Date (mm/dd/yyyy)" class="common_input_textbox" style="background:#fff;"><div class="common_icon_box"> <span class="icon-calendar146"></span></div></div><div class="common_input_overlay"></div></div><div class="full_button common_form_box" data-ss-colspan="2" data-component="46"><input type="submit" value="Button" class="common_main_color"><div class="common_input_overlay"></div></div>',
    }/*,
    {
        index: '21',
        layout: '<div class="full_label common_form_box" data-ss-colspan="2" data-component=""><p class="widgetClose">x</p><label class="common_input_label">Label Text</label><div class="common_input_overlay"></div></div><div class="full_description common_form_box" data-ss-colspan="2" data-component=""><p class="widgetClose">x</p><div class="full_description_inner"><p class="common_description">Description - Lorem ipsum dolor sit amet, eos eripuit voluptatibus in. Est ad consul equidem insolens, eam eu luptatum vituperata, in partiendo philosophia ius. Est no solum vulputate. In eum cibo zril exerci. Labitur nominati ne eos, an affert numquam utroque mel, has eu nostrud volumus albucius.</p></div></div><div class="label_left_textbox common_form_box" data-ss-colspan="2" data-component="25"><p class="widgetClose">x</p><div class="label_left"><label class="common_input_label">Label Text</label></div><div class="textbox_right"><input type="text" disabled placeholder="Hint Text" class="common_input_textbox"></div><div class="common_input_overlay"></div></div><div class="label_left_textarea common_form_box" data-ss-colspan="2" data-component=""><p class="widgetClose">x</p><div class="textarea_label_left"><label class="common_input_label">Label Text</label></div><div class="textarea_right"><textarea disabled placeholder="Hint Text" class="common_input_textarea notEdit"></textarea></div><div class="common_input_overlay"></div></div><div class="full_button common_form_box" data-ss-colspan="2" data-component="45"><input type="submit" value="Button" class="common_main_color"><div class="common_input_overlay"></div></div>',
    }*/,
    {
        index: '999',
        layout: '<div class="item_full_widget_event" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">New Event</p><p class="item_content"></p><div class="clear"></div><p class="item_disc">Event Date</p></div></div><div class="item_full_widget_event" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">New Event</p><p class="item_content"></p><div class="clear"></div><p class="item_disc">Event Date</p></div></div><div class="item_full_widget_event" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">New Event</p><p class="item_content"></p><div class="clear"></div><p class="item_disc">Event Date</p></div></div><div class="item_full_widget_event" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">New Event</p><p class="item_content"></p><div class="clear"></div><p class="item_disc">Event Date</p></div></div>',
    },
    {
        index: '22',
        layout: '<div class="animat-tab" data-ss-colspan="2" data-component="15"><div class="animat-tab_head"><ul class=" "><li class="active"><span>Tab 1</span></li><li><span>Tab 2</span></li><li><span>Tab 3</span></li><div class="clear"></div></ul></div><div class="animat-tab_body"><div class="tab_content" style="display:block;"><div class="tab_content_text">Add Description1</div></div><div class="animat-tab_content" style="display:none;"><div class="tab_content_text">Add Description2</div></div><div class="tab_content" style="display:none;"><div class="animat-tab_content_text">Add Description3</div></div></div></div>'
    }
];

function PostImageToServer(filename, mimeType, imageData, message) {
  // this is the multipart/form-data boundary we'll use
  var boundary = '----ThisIsTheBoundary1234567890';

  // let's encode our image file, which is contained in the var
  var formData = '--' + boundary + '\r\n'
  formData += 'Content-Disposition: form-data; name="source"; filename="' + filename + '"\r\n';
  formData += 'Content-Type: ' + mimeType + '\r\n\r\n';
  //    alert ("PostImageToServer");
  //    alert(imageData);
  for (var i = 0; i < imageData.length; ++i) {
    formData += String.fromCharCode(imageData[i] & 0xff);
  }
  formData += '\r\n';
  formData += '--' + boundary + '\r\n';
  formData += 'Content-Disposition: form-data; name="message"\r\n\r\n';
  formData += message + '\r\n'
  formData += '--' + boundary + '--\r\n';


  var xhr = new XMLHttpRequest();
  xhr.open('POST', 'imageload.php', true);
  xhr.onload = xhr.onerror = function () {
    console.log(xhr.responseText);
  };
  //xhr.setRequestHeader( "Content-Type", "multipart/form-data; boundary=" + boundary );
  xhr.setRequestHeader("Content-Type", "image/png");

  //    alert(formData);
  //    xhr.sendAsBinary( formData );
  xhr.send(imageData);
}
/*
 * code edited by Arun Srivastava on 25/11/15
 */
function editbrowse_cropimgFunction() {
    $('#screenoverlay').fadeIn();
    $("#page_ajax").html('').show();
    var filename = $("#filenamest").val();
    var filetype = $("#filetypest").val();

			if (external_app_id != '' && external_user_id != '') {
		app_id   = external_app_id;
		autherId = external_user_id;
		
		$("#app_id").val(app_id);
		$("#author_id").val(autherId);
		
		//send html to server
		shresponse = send_html(app_id, autherId);

		var canvas = document.getElementById("canvas1");
		var dataURL1 = canvas.toDataURL(filetype, 0.7);

		var start = new Date().getTime();
		 var oldsrc = $("#present").find("img").eq(0).attr('src');
    if (typeof oldsrc == 'undefined') {
      oldsrc = '';
    }
		$.ajax({
			type: "POST",
			url: "imageload.php",
			data: "image=" + dataURL1 + "&imgname=" + "panelimage/" + start + filename + "&oldsrc=" + oldsrc,
			// async: false,
			success: function (response) {
				if (response)
				{
					var newresponse = $.parseJSON(response);

					var imagename   = newresponse.imageurl;
					var imgwidth    = newresponse.width;
					var imgheight   = newresponse.height;

					var imagePath   =  imagename;

					$("#present").find("img").eq(0).attr("src", imagePath);
					$("#present").find("img").eq(0).attr("data-width", imgwidth);
					$("#present").find("img").eq(0).attr("data-height", imgheight);

					$("#filenamest").val('');
					$("#filetypest").val('');
					$(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
					$(".modal").css('display', 'none');


					$("#present").find("img").eq(0).attr("src", imagePath);
					if($('#present').length==0)
					{
						$("#presentBanner").children("img").eq($("#presentBannerImgset").parents(".change_image").index(".change_image")).attr("src", imagePath);
						$(".appbannereditbrowse#presentBannerImgset").attr("src", imagePath);
					}
					$(".editbrowse").not($('.createLogin .editbrowse')).attr("src", imagePath);

					//savehtml();
					send_html(app_id, autherId); 

					var tmpImg = new Image();
					tmpImg.src = imagePath;
					tmpImg.onload = function () {
					   $('#screenoverlay').fadeOut();
					};

				}
				else
				{
					$('#screenoverlay').fadeOut();
					$("#filenamest").val('');
					$("#filetypest").val('');
					$(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
					$(".modal").css('display', 'none');
					

				}
			}, error: function () {
				shresponse = send_html(app_id, autherId);
				$("#filenamest").val('');
				$("#filetypest").val('');
				$(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
				$(".modal").css('display', 'none');
			}
		});
			
		$(".editbrowse_img").replaceWith('<input type="file" class="editbrowse_img">');
	}
	else
	{
		$.ajax({
			type: "POST",
			url: "login.php",
			data: "check=login",
			success: function (response) {
				if (response)
				{
					var res  = response.split("##");
					app_id   = res[1];
					autherId = res[0];

					if (app_id != '') {
						$("#app_id").val(app_id);
						$("#author_id").val(autherId);
						//send html to server
						//shresponse = send_html(app_id, autherId);

						var canvas = document.getElementById("canvas1");
						var dataURL1 = canvas.toDataURL(filetype, 0.7);

var oldsrc = $("#present").find("img").eq(0).attr('src');
            if (typeof oldsrc == 'undefined') {
              oldsrc = '';
            }

						var start = new Date().getTime();
						
								$.ajax({
									type: "POST",
									url: "imageload.php",
									data: "image=" + dataURL1 + "&imgname=" + "panelimage/" + start + filename + "&oldsrc=" + oldsrc,
	//                                async: false,
									success: function (response) {
										if (response)
										{
											var newresponse = $.parseJSON(response);

											var imagename = newresponse.imageurl;
											var imgwidth = newresponse.width;
											var imgheight = newresponse.height;

											var imagePath =  imagename;

												$("#present").find("img").eq(0).attr("src", imagePath);
												$("#present").find("img").eq(0).attr("data-width", imgwidth);
												$("#present").find("img").eq(0).attr("data-height", imgheight);

												$("#filenamest").val('');
												$("#filetypest").val('');
												$(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
												$(".modal").css('display', 'none');


												$("#present").find("img").eq(0).attr("src", imagePath);
												if($('#present').length==0){
													$("#presentBanner").children("img").eq($("#presentBannerImgset").parents(".change_image").index(".change_image")).attr("src", imagePath);
													$(".appbannereditbrowse#presentBannerImgset").attr("src", imagePath);
												}
												$(".editbrowse").not($('.createLogin .editbrowse')).attr("src", imagePath);

												savehtml();

												var tmpImg = new Image();
												tmpImg.src = imagePath;
												tmpImg.onload = function () {
												   $('#screenoverlay').fadeOut();
												};

										}
										else
										{
											$('#screenoverlay').fadeOut();
											$("#filenamest").val('');
											$("#filetypest").val('');
											$(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
											$(".modal").css('display', 'none');
											/* var imagePath ="../frameworkphp/images/ajax-loader.gif";
											 $("#present").find("img").eq(0).attr("src",imagePath );
											 $("#presentBanner").children("img").eq($("#presentBannerImg").parents(".change_image").index()-1).attr("src",imagePath); 
											 $(".bannereditbrowse#presentBannerImg").attr("src",imagePath);
											 $(".editbrowse").attr("src", imagePath); */

										}
									}, error: function () {
										shresponse = send_html(app_id, autherId);
										$("#filenamest").val('');
										$("#filetypest").val('');
										$(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
										$(".modal").css('display', 'none');
									}
								});
							
						$(".editbrowse_img").replaceWith('<input type="file" class="editbrowse_img">');
					} else {
						$('#screenoverlay').fadeOut('fast', function () {
              $(".modal-backdrop.in").css({
                'display': 'none',
                'opacity': '0'
              });
							$(".modal").css('display', 'none');
							$('.mid_section_right').find('.mid_right_box').first().find('.mid_right_box_head').trigger('click');
						});
						fnErrAppName();
					}
				}
				else
				{
					$('#screenoverlay').fadeOut();
					$(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
					$(".modal").css('display', 'none');
					$("#page_ajax").html('').hide();
					$("#login_type").val("");
					$("#login_type").val("page");
					$("#login_email").val('');
					$("#login_password").val('');
					$("#register_email").val('');
					$("#register_password").val('');
					$("#register_repeat_password").val('');
					$(".popup_container").css("display", "block");
					$(".login_popup").css("display", "block");
					$("#email_error").text("");
					$("#login_email").css("border", "1px solid #e5e5e5");
					$("#login_password").css("border", "1px solid #e5e5e5");
					$("#register_email").css("border", "1px solid #e5e5e5");
					$("#register_password").css("border", "1px solid #e5e5e5");
					$("#register_repeat_password").css("border", "1px solid #e5e5e5");
					$("#remail_error").text('');
					return false;

				}
			},
			error: function () {
				$(".cropcancel").trigger("click");
				$("#page_ajax").html('').hide();
				$(".popup_container").css({'display': 'block'});
				$(".confirm_name .confirm_name_form").html('<p>Oops! Something went wrong</p>Please try again or check your internet connection');
				$(".confirm_name").css({'display': 'block'});
				return false;
			}
		});
	}
}

var staticStoredPages = [
    {
        index: 's1',
        name: 'Report Misconduct',
        content: '<div class="feedback_form" data-ss-colspan="2"><input type="text" placeholder="Email id" /><div class="reason_select"><label><input type="radio" name="report" checked="checked" />Spam or scam</label><label><input type="radio" name="report" />Contains hate speech or attacks an individual</label><label><input type="radio" name="report" />Violence or harmful behavior</label><label><input type="radio" name="report" />Sexually explicit content</label></div><textarea placeholder="Message"></textarea><input type="button" value="Send" /></div>'

    },
    {
        index: 's2',
        name: 'Feedback',
        content: '<div class="feedback_form" data-ss-colspan="2"><h2>Any Suggestions/Feedback ?</h2><p>Your feedback and suggestions are valuable to us. Fill this feedback form and let us know how we can make your experience more awesome.</p><input type="text" placeholder="Name" /><input type="text" placeholder="Email id" /><textarea placeholder="Message" class="notEdit"></textarea><input type="button" value="Send" />'
    },
    {
        index: 's3',
        name: 'Contact Us',
        content: '<div class="feedback_form" data-ss-colspan="2"><h2>Any Question ?</h2><p>We&apos;re happy to answer any question you have or provide you with an estimate. Just send us a message in the form below with any questions you may have.</p><input type="text" placeholder="Name"><input type="text" placeholder="Email id"><input type="text" placeholder="Phone No."><input type="text" placeholder="Subject"><textarea placeholder="Message"></textarea><input type="button" value="Send"></div>'
    }
];
var selectedPageIndex = 1;

var eventList = [];

function setSelectedPageIndex(currentPage) {

    try
    {
        if (currentPage != "s1" || currentPage != "s2")
        {

            if (currentPage == "1")
            {

                $(".delete_screen").hide();
            }
            else
            {

                $(".delete_screen").show();
            }
            $(".theme_head h1:first").text(pageDetails[currentPage - 1].name);
            if (currentPage == "1")
            {
                $(".add_page").hide();
            }
            selectedPageIndex = currentPage;
            updatePageIndex();
        }
        else
        {
            $(".theme_head h1:first").text("Information");
        }
    }
    catch (err) {
        console.log(err.message)
    }
}

function updatePageIndex() {
    $(".pageIndex li").removeClass("active");
    $(".pageIndex").find("li").eq(selectedPageIndex - 1).addClass("active");
}

function globalRestart() {

    $(".container.droparea").shapeshift({
        colWidth: 134.5,
        minColumns: 2
    });
}
function updateSlideNames()
{
    var $wrapper = $('.menu_links');
    for (var i = 0; i < pageDetails.length; i++)
    {

        $(".menu_body_links").eq(i).find(".nav_item").val(pageDetails[i].name)
    }
    $(".menu_body_links").each(function (index) {
        if ($(".menu_body_links").eq(index).find(".addToSlide").prop("checked") == true)
        {
            var tempLink = $(".menu_body_links").eq(index).attr("data-ind");
            var temptext = $(".menu_body_links").eq(index).find(".nav_item").val();
            $("nav ul").find('[data-link="' + tempLink + '"]').find("span").eq(1).text(temptext);
        }

    });

}
function firstUpdateSlideNames() {
    var $wrapper = $('.menu_links');
    $(".menu_body_links:first").siblings(".menu_body_links").remove();

    if (pageDetails[0].icon == '' || pageDetails[0].icon == null)
    {
        $('.menu_body_links:last-child').find(".icon_upload_img").replaceWith("<img src='http://www.instappy.com/images/menu_img.jpg' alt='Image Not Found' class='icon_upload_img'>");

    }
    else
    {
        $('.menu_body_links:last-child').find(".icon_upload_img").replaceWith('<span class="icon_upload_img"></span>');
        $(".menu_body_links:last-child .icon_upload_img").addClass(pageDetails[0].icon)

    }
    for (var i = 2; i <= pageDetails.length; i++) {

        $('.menu_body_links:last-child', $wrapper).clone(true).attr("data-ind", i).appendTo($wrapper)
        if (pageDetails[i - 1].icon == '' || pageDetails[i - 1].icon == null)
        {
            $('.menu_body_links:last-child').find(".icon_upload_img").replaceWith("<img src='http://www.instappy.com/images/menu_img.jpg' alt='Image Not Found' class='icon_upload_img'>");

        }
        else
        {
            $('.menu_body_links:last-child').find(".icon_upload_img").replaceWith('<span class="icon_upload_img"></span>');
            $(".menu_body_links:last-child .icon_upload_img").addClass(pageDetails[i - 1].icon)

        }

        $('.menu_body_links:last li:first .addToSlide').attr("checked", false);
        $('.menu_body_links:last li:first .addToSlide').removeAttr("disabled");
        $("[class*='widget'] span[class^='icon'], .contact_card span[class^='icon']").css("color", $(".mobile .theme_head").css("background-color"));


    }
    $("nav > ul li").each(function (index) {
        var linkValue = $("nav > ul li").eq(index).attr("data-link");
        $(".menu_links").find('[data-ind="' + linkValue + '"]').find(".addToSlide").prop("checked", "true");
    });
    $(".menu_body_links").eq(0).find(".addToSlide").attr("checked", "true");
    $(".menu_body_links").eq(0).find(".icon_upload_img1").prop("class", "icon_upload_img");
    $(".menu_body_links").eq(0).find(".addToSlide").attr("disabled", "true");
    $(".feedbackEmail").val($(".mobile .feedback").attr("data-email"));

}

function updateLinkNavItems()
{

    $("nav > ul > li").each(function (index) {
        var linkValue = $("nav > ul > li").eq(index).attr("data-link");
        $(".linkSelector").eq(index).val(linkValue);
    });

}


function populateLink() {
    $(".linkSelector").empty();
    $("#pageSelector").empty();
    $(".widgetlinkSelector").empty();

    for (var i = 0; i < pageDetails.length; i++)
    {


        $(".linkSelector").append($("<option>", {
      value: pageDetails[i].index,
      text: pageDetails[i].name
    }));
        $("#pageSelector").append($("<option>", {
      value: pageDetails[i].index,
      text: pageDetails[i].name
    }));
        $(".widgetlinkSelector").append($("<option>", {
      value: pageDetails[i].index,
      text: pageDetails[i].name
    }));
    }
    updateLinkNavItems();

    $("#pageSelector").val(selectedPageIndex);

}
function myFunction() { 
    var vid = document.getElementById("track");
    var len = vid.duration;
    console.log(len);
    var n = len.toFixed(2);
    var res = n.split(".");
    var result = res[0];
    document.getElementById("time").innerHTML = result;
} 
var pageScroll;
$(document).ready(function () {
	$('input.sh-checkbox').on('change', function () {  
  if ($(this).is(':checked')) {    
    $('.sh-hide-one').hide();    
    $('#present').attr('all-day-event', '1');  
  }  
  else {    
    $('.sh-hide-one').show();    
    $('#present').attr('all-day-event', '0');  
  }
});
$(".date-select").on('change', function () {

    var optValue = $('select[name=pickMep]').val();
    $(".item_disc").attr("date-form", optValue);

  });
    $('.validurl_popup .validurl_popup_body .validurl_popup_form input:button').on('click', function(){
        $('.popup_container').hide();
        $('.validurl_popup').hide();
    });
    $('.url_needed .url_needed_body .url_needed_form input:button').on('click', function(){
        $('.popup_container').hide();
        $('.url_needed').hide();
    });
    $("#mp_source").on('input propertychange paste', function(){
        var get_source = $("#mp_source").val();
        $("#track").attr('src',get_source);
        document.getElementById("track").load();
    });
    $("#saveAudio").click(function(){
        myFunction();
        $('#present').attr('data-audiolength',$('#time').text());
    });
    if($('.tabbing_widget_head ul.tabs li a').length !=0){
        $('.tabbing_widget_head ul.tabs li').each(function(){
            $('<span></span>').insertAfter($(this).children('a'));
            $(this).children('span').html($(this).children('a').html());
            $(this).children('a').remove();
        });
    }
    $('.showTutorial').on('click', function(e){
        e.stopPropagation();
        e.preventDefault();
        $('.video-tutorial-list').toggleClass('tutorialsActive');
    });
    $('html, body').on('click', function(){
        $('.video-tutorial-list').removeClass('tutorialsActive');
    });
    $('.video-tutorial-list').on('click', function(e){
        e.stopPropagation();
    });
    $('.login_options #facebook').on('change', function(){
        var loginRealHeight = $('.login_options .fb_create_login_box')[0].scrollHeight;
        if($(this).prop('checked')==true){
            $('.login_options .fb_create_login_box').animate({
                height:loginRealHeight
            });
        } else {
            $('.login_options .fb_create_login_box').animate({
                height:0
            });
        }
    });
    $(window).resize(function(){
        var screenWidth = $(window).width();
        if (screenWidth<=1023) {
          $('.screen_popup').fadeIn();
          $('.popup_container').fadeIn();
        } else {
          $('.screen_popup').fadeOut();
          $('.popup_container').fadeOut();
        };
    });
	$('.screen_popup input:button').on('click',function(){
	  $('.screen_popup').fadeOut();
	  $('.popup_container').fadeOut();
	});
    

    
    $(".menu_body_links").eq(0).find(".addToSlide").attr("checked", "true");
    $(".menu_body_links").eq(0).find(".icon_upload_img1").prop("class", "icon_upload_img");

    $(".menu_body_links").eq(0).find(".addToSlide").attr("disabled", "true");

    // shadow div

    $('.big_widget_text').append('<div style="position: absolute; width: 100%; height: 100%; box-shadow: 0px -30px 130px rgb(49, 49, 49)"></div>')

    // onload tutorials 
    $(window).load(function () {
	if($('.mobile nav ul li.contact-us').length != 0){
            $('.contactReq').prop('checked','checked');
        } else {
            $('.contactReq').prop('checked','');
        }
	if($('.previewEditArea .edit').hasClass('active')){
            $('p.widgetClose').removeClass('disabled');
        }
        var screenWidth = $(window).width();
        if (screenWidth<=1023) {
        	// login check
$(".popup_container").css("display", "block");

 $.ajax({
        type: "POST",
        url: "login.php",
        data: "check=login",
        async: false,
        success: function (response) {
            var res = response.split("##");
            var app_id = res[1];
            var autherId = res[0];
            if (autherId != '') {
			$('.screen_popup').fadeIn();
			$('.popup_container').fadeIn();

            } else {
	 $('.screen_popup').fadeOut();
                $("#page_ajax").html('').hide();
                $("#login_type").val("");
                $("#login_type").val("page");
                $("#login_email").val('');
                $("#login_password").val('');
                $("#register_email").val('');
                $("#register_password").val('');
                $("#register_repeat_password").val('');
                $(".popup_container").css("display", "block");
                $(".login_popup").css("display", "block");
                $("#email_error").text("");
                $("#login_email").css("border", "1px solid #e5e5e5");
                $("#login_password").css("border", "1px solid #e5e5e5");
                $("#register_email").css("border", "1px solid #e5e5e5");
                $("#register_password").css("border", "1px solid #e5e5e5");
                $("#register_repeat_password").css("border", "1px solid #e5e5e5");
                $("#remail_error").text('');
                return false;
            }
        },
        error: function () {
            $(".cropcancel").trigger("click");
            $("#page_ajax").html('').hide();
            $(".popup_container").css({'display': 'block'});
            $(".confirm_name .confirm_name_form").html('<p>Oops! Something went wrong</p>Please try again or check your internet connection');
            $(".confirm_name").css({'display': 'block'});
            return false;
        }
    });
    
        } else {
          $('.screen_popup').fadeOut();
          $('.popup_container').fadeOut();
        };
        if (getCookie("onload_tutotial") == 1) {
            $('.onload_tutotial').hide();
        }
        else {
            $('.first_tutorial').addClass('current');
            $('.onload_tutotial, .first_tutorial').fadeIn();
            $(".finish_tutorial").remove();
            $('.continue_tutorial a img').on('click', function (event) {
                event.stopPropagation();
                $('.current').hide();
                $('.current').next().fadeIn().addClass('current');
                $('.current').eq(0).removeClass('current');
                if ($('.third_tutorial').hasClass('current')) {
                    $('.additional_options span').trigger('click');
                    $('.continue_tutorial a img').attr('src', 'images/finish.png');
                }
                if ($('.continue_tutorial a img').attr('src') == 'images/finish.png') {
                    $('.continue_tutorial a img').on('click', function () {
                        $('.onload_tutotial').hide();
                        $('.additional_options span').trigger('click');
                    })
                }
            })
            $('.onload_tutotial span').on('click', function () {
                $('.onload_tutotial').hide();
            })
            document.cookie = "onload_tutotial=1";
        }
        
    });


    // catalogue banner height
    /*$("#drpLanguage").hide();
     var location = window.location.pathname;
     if(location.indexOf('panel') != -1){
     //$('.banner').css('height','170px;')
     $("#drpLanguage").show();
     }*/

//For setting the preselected color in colorPick
    $(document).on("click", ".mobile ul.tabs>li", mobileTabbing);

    function mobileTabbing() {
        $('.mobile ul.tabs>li').removeClass('active');
        $(this).addClass('active');

        var index = $('.mobile ul.tabs>li').index($(this));
        $('.mobile .tab_content').hide().eq(index).show();
        //var gotoindex=$(this).index(".mobile .tabs>li");
        //console.log(gotoindex)
        //$("#content-2").mCustomScrollbar('scrollTo', $('.tabbing_1').eq(gotoindex));
		startShapeShift();
    }

    $("a.read_more").on('click', function (e) {
        e.preventDefault();
        var realHeight = $(this).prev()[0].scrollHeight;
        if ($(this).prev().height() == 18) {
            $(this).prev().animate({
                height: realHeight
            })
            $(this).text("Close");
        } else {
            $(this).prev().animate({
                height: 18
            })
            $(this).text("Read More...");
        }
    })

   

    $(".add_screen").on("click", function () {

        $(".add_page_hidden").trigger("click");


    });

    $(".video_url").on('change', function () {
        if ($(".video_url").val() == "") {
            $("#present .video_img").css("display", "none");
        } else {
            $("#present .video_img").css("display", "block");
        }
    });

    $("#socialshare").on('change',function(){
        if($("#socialshare").prop("checked")==false){
            $("#present").find(".icon-share").parent().remove();
            $("#present").removeAttr("data-shared-text");
            $("#present").removeAttr("data-shared-link");

            $(".social_sharing .notEdit").val("");
            $(".social_sharing .shared_link").val("");
            $(".social_sharing .notEdit").attr("disabled","disabled");
            $(".social_sharing .shared_link").attr("disabled","disabled");

        }
        if($("#socialshare").prop("checked")==true){
            $("#present").find(".icon-favorite").parent().before('<a href="#"><span class="icon-share" style="color: rgb(58, 58, 58);"></span></a>')
            $("#present .icon-share").css("color",$(".mobile .theme_head").css("background-color"));
            $(".social_sharing .notEdit").removeAttr("disabled");
            $(".social_sharing .shared_link").removeAttr("disabled");
         }

    });

    $('.droparea').bind('contextmenu', function (e) {
        return false;
    });

    $(".theme_head h1:first").text(pageDetails[0].name);


    $(".additional_options").on('click', 'span', function () {
        $(".additional_options").toggleClass("open");
    });


    $(".additional_items.chat").on('click', function () {
        $(".additional_options").removeClass("open");
        $(".chat_window").addClass("active");
    });


    $(".chat_window_head").on('click', function () {
        $(".chat_window").toggleClass("small");
    });


    $(".close_chat").on('click', function (e) {
        e.stopPropagation();
        $(".chat_window").removeClass("small");
        $(".chat_window").removeClass("active");
    });


    $("ul.chosen-results").on('click', 'li:nth-child(1)', function () {
        $(".mobile").css("background", "url('images/android.png') no-repeat 0 0 / 100% auto");
    });


    $("ul.chosen-results").on('click', 'li:nth-child(2)', function () {
        $(".mobile").css("background", "url('images/iphone.png') no-repeat 0 0 / 100% auto");
    });


    $("ul.chosen-results").on('click', 'li:nth-child(3)', function () {
        $(".mobile").css("background", "url('images/window.png') no-repeat 0 0 / 100% auto");
    });


    $("ul li.view_feedback a").on('click', function () {
        $(".feedback_popup").css("display", "block");
        $(".popup_container").css("display", "block");
    });
    $("ul li.view_feedback input[type=button]").on('click', function () {
        $(".feedback_popup").css("display", "block");
        $(".popup_container").css("display", "block");
    });
    
    $("a.view_contactUs").on('click', function () {
        $(".contactus_form_popup").css("display", "block");
        $(".popup_container").css("display", "block");
    });
    $("a.createLoginAddProducts").on('click', function () {
        $(".create_login_popup").css("display", "block");
        $(".popup_container").css("display", "block");
    });
    $("ul li.view_contactUs input[type=button]").on('click', function () {
        $(".contactus_form_popup").css("display", "block");
        $(".popup_container").css("display", "block");
    });

    $("span.close_popup").on('click', function () {
        //$(this).parent().css("display", "none");
        //$(this).parent().parent().css("display", "none");
		$('.popup_container > div').css("display", "none");
    });

    /*$(document).on("click", "ul.tabs>li", tabbingFunction);
     
     function tabbingFunction() {
     $("ul.tabs>li").removeClass('active');
     $(this).addClass('active');
     var index = $("ul.tabs>li").index($(this));
     $(".tab_content").hide().eq(index).show();
     }*/

    $(".save_hidden").click(function () {
		$(".mobile nav ul").mCustomScrollbar('destroy');
        conditionCheckForPageChange();
        var newtemp = "<nav>" + $(".mobile nav").html() + "</nav>"
        var temp = $(".mobile .theme_head").wrap('<div>').parent().html();
        $(".mobile .theme_head").unwrap();
        navbar = temp + newtemp;
        conditionCheckForPageChange();
		$(".mobile nav ul").mCustomScrollbar({
            scrollInertia: 200
        });
    });


    //banner JS
    var newindex = 0;
    $(".pager div").click(function () {
        newindex = $(this).index();
        nextImage(newindex);
    });
    function nextImage(index) {
        $('.pager div').removeClass('active');
        $('.pager div').eq(index).addClass('active');

        $('.banner img').hide().eq(index).show();
    }


    setInterval(function () {
        newindex = newindex + 1;
        if (newindex == 3) {
            newindex = 0;
        }
        nextImage(newindex);

    }, 2000);


    storedPages[0].banner = $(".banner").html();
    storedPages[0].contentarea = $(".container.droparea").html();
    $(".utility_api_cards .utility_api_content > div").hide();
    $(".utility_api_cards .utility_api_content .layout1").show();
    $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();



    var presentWidget;

    //var height = $(window).height() - 95;

      $(".droparea").find('[class$="_widget"]:not([class="weblink_widget"])').append("<p class='widgetClose'>x</p>");
    $(".droparea").find('.ad_widget .widgetClose').remove();

    function restartShapeShift() {


        $(".container.droparea").shapeshift({
            colWidth: 134.5,
            minColumns: 2
        });






         $(document).on('click', '.droparea .full_widget', widgetClick);
        $(document).on('click', ".map_full_widget", map_full_widgetClick);
        $(document).on('click', '.droparea .half_widget', widgetClick);
        $(document).on('click', '.droparea .half_widget.no_text', noTetxtWidgetClick);
        $(document).on('click', '.droparea .half_widget.img_text', headContWidgetClick);
        $(document).on('click', '.droparea .full_widget.head_cont', headContWidgetClick);
        $(document).on('click', '.droparea .full_widget.long_text', fullWidgetLongClick);
        $(document).on('click', '.droparea .big_widget', bigWidgetClick);
        //$(document).on('click', '.droparea .big_widget_text', bigWidgetTextClick);
        $(document).on('click', '.droparea .big_widget_text.about', bigWidgetAboutClick);
        $(document).on("click", ".droparea .widgetClose", widgetCloseEvent);
        $(document).on("click", ".droparea .tabbing_widget", tabbingWidgetClick);
        $(document).on("click", ".droparea .language", languagegetClick);
        $(document).on("click", ".droparea .contact_widget", contactWidgetClick);
        $(document).on("click", ".droparea .contact_img_widget", contactImgWidgetClick);
        $(document).on("click", ".droparea .item_full_widget", fullItemWidgetClick);
        $(document).on("click", ".droparea .contact_small_widget", contactSmallWidgetClick);
        $(document).on("click", ".droparea .head_disc_widget", headDiscWidgetClick);
        $(document).on("click", ".droparea .small_widget", smallWidgetClick);
        $(document).on("click", ".droparea .social_feed", smallWidgetClick);
        $(document).on("click", ".banner", bannerClickEdit);
        $(document).on("change", "#pageSelector", pageSelectorChange);
        $(document).on("click", ".droparea .festival-card", festivalWidgetClick);
        $(document).on("click", ".droparea .item_full_widget_event", festivalFullWidgetClick);
        $(document).on("click", ".droparea .calendar-card", calenderWidgetClick);
        $(document).on("click", ".droparea .audio", audioWidgetClick);
        $(".widgetClose").removeClass("disabled");
        $(document).on("click", ".new_theme", chooseLayout);
        $(document).on("click", ".social_icons", socialIconsWidget);
        $(document).on("click", ".droparea .contact_card", contact_card_edit);
		$(document).on('click', '.droparea .weblink_widget', webLinkwidgetClick);
        $(document).on('click', '.droparea .full_textbox', fullTextboxClick);
        $(document).on('click', '.droparea .label_left_textbox', labelLeftTextboxClick);
        $(document).on('click', '.droparea .full_textbox_Label', fullTextboxLabelClick);
        $(document).on('click', '.droparea .full_textbox_icon', fullTextboxIconClick);
        $(document).on('click', '.droparea .full_textarea', fullTextareaClick);
        $(document).on('click', '.droparea .label_left_textarea', LabelLeftTextareaClick);
        $(document).on('click', '.droparea .full_textarea_Label', fullTextareaLabelClick);
        $(document).on('click', '.droparea .full_textarea_icon', fullTextareaIconClick);
        $(document).on('click', '.droparea .full_selectbox', fullSelectboxClick);
        $(document).on('click', '.droparea .label_left_selectbox', labelLeftSelectboxClick);
        $(document).on('click', '.droparea .radio_input_box', radioInputBoxClick);
        $(document).on('click', '.droparea .check_input_box', checkInputBoxClick);
        $(document).on('click', '.droparea .full_description', fullDescriptionClick);
        $(document).on('click', '.droparea .full_label', fullLabelClick);
        $(document).on('click', '.droparea .full_button', fullButtonClick);
        $(document).on('click', '.droparea .small_button', fullButtonClick);
        $(document).on('click', '.droparea .label_left_tabbtn', labelLeftTabbtnClick);
        $(document).on('click', '.droparea .label_left_switch_btn', labelLeftSwitchBtnClick);
        $(document).on('click', '.droparea .full_textbox_date', fullTextboxDateClick);
        $(document).on('click', '.droparea .full_textbox_time', fullTextboxTimeClick);
    $(document).on('click', '.droparea .full_attachment_box', fullAttachmentBoxClick);
    }
    function commonClick(){
        $("#present").removeAttr('id');
        $("#presentBanner").removeAttr('id');
        $("#presentBannerImgset").removeAttr('id');
		 removeEstoreHtml();
       
        $(".mid_right_box_head").parent().removeClass("active");
        $(".mid_right_box_body").hide();
        $(".mid_right_box").last().addClass("active");
        $(".mid_right_box").last().find(".mid_right_box_body").show();
        $(".mid_right_box").last().find(".mid_right_box_body").children("div").hide();
		 $(".mid_right_box").last().find(".mid_right_box_body").children("div").children(".form_edit_inner_box").hide();
        $(".mid_right_box").last().find(".mid_right_box_body").children("div").children(".two_form_edit_input").hide();
        $(".mid_right_box").last().find(".mid_right_box_body").children("div").children(".two_form_edit_input").children("div").hide();
        $(".mid_right_box_head i").removeClass("fa-rotate-180");
        $(".mid_right_box").last().find(".mid_right_box_head i").addClass("fa-rotate-180");
        $('.contentKeywords').val(pageDetails[parseInt(selectedPageIndex) - 1].keyword);
    /* 22-6-16 start*/
    $(".half-bg-change").hide();
    $(".full-bg-change").hide();
    /* 22-6-16 end*/
    }
	
    function webLinkwidgetClick() {

        commonClick();
		$(".mid_right_box.change_properties").removeClass("change_properties");
		$(".webLinkEdit").show();
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(this).attr("id", "present")
        $(".weblink_textbox_edit").val($("#present").attr("data-weblink"));
        if(pageScroll!=1){
           $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };

    }
    /*$(".contentKeywords").on('keyup',function(){
        $("#present").attr("data-keywords",$(this).val());
    });*/

	$(".weblink_textbox_edit").on('keyup', function () {
		$("#present").attr("data-weblink", $(this).val());
		$("#present p").text($(this).val());
	})
        
        $(".social_sharing .shared_text").on('keyup', function(){
            $('#present').attr('data-shared-text',$(this).val());
        })
        
        $(".social_sharing .shared_link").on('keyup', function(){
            $('#present').attr('data-shared-link',$(this).val());
        })
	
    $(".add_page .mid_right_box_head").on("click", function (e) {
        //console.log("inside click")
        if (e.target == this)
        {
            $(".popup_container").css("display", "block");
            $(".confirm_screen_layout").css("display", "block");
        }
    });

    function confirmChangeLayout() {
        $("#presentLayout").removeAttr("id");
        $(this).attr("id", "presentLayout");
        $(".popup_container").css("display", "block");
        $(".confirm_screen_layout").css("display", "block");
    }

    $(document).on("click", ".confirm_layout_button", function () {
        $(".popup_container").css("display", "none");
        $(".confirm_screen_layout").css("display", "none");
        if ($(this).hasClass('cancel')) {
            $('.mid_right_box.active').parent('.add_page').prev().find('.mid_right_box_head').trigger('click');
        }
    });

    $('.utility_api_content ul.tabs>li').click(function () {
        $('.utility_api_content ul.tabs>li').removeClass('active');
        $(this).addClass('active');

        var index = $('.utility_api_content ul.tabs>li').index($(this));
        $('.utility_api_content .tab_content').hide().eq(index).show();
    }).eq(0).click();


    $(document).on("click", ".mid_right_box_head", showNext);

    function startShapeShift() {
        $(".container.droparea").shapeshift({
            colWidth: 134.5,
            minColumns: 2,
            enableDrag: false
        });

    }

    restartShapeShift();
    function restartClonearea() {
        $(".clones").shapeshift({
            dragClone: true,
            enableCrossDrop: false,
            minColumns: 2,
            enableTrash: true
        });
    }




    populateLink();

    function tabbingWidgetClick(event) {

        commonClick();

        $(".tabEdit").show();
        $(".mid_right_box.change_properties").removeClass("change_properties");

        $('.nicEdit-panelContain').parent().width('100%');
        $('.nicEdit-panelContain').parent().next().width('100%');
        $('.nicEdit-main').width('100%');
		$("div.nicEdit-main").addClass('wordwrap');
        if($(".mobile .tab_content .tab_content_text").length==0){

            $(".mobile .tab_content p").wrapInner("<div class='tab_content_text'></div>");
            $(".mobile .tab_content .tab_content_text").unwrap();
        }
        $(this).find(".tabbing_widget_head").find("li").each(function (index, element) {
            $(".tabbing_1").eq(index).find(".tabHead").val($(element).find("span").text());
            $(".tabbing_1").eq(index).find(".tabContent").prev('div').find('.nicEdit-main').html($(element).parents(".tabbing_widget").find(".tab_content").eq($(element).index()).find(".tab_content_text").html());
        });
        $("#tabHeadBackGroundEdit").css("background-color", $(".droparea .tabbing_widget_head .tabs li span").css("background-color"));
        $("#tabContentBackGroundEdit").css("background-color", $(".droparea .tabbing_widget").css("background-color"));

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
        var target = event.target || event.srcElement;
        if ($(target).parents(".tabbing_widget_head").length == 1)
        {
            var gotoindex = $(target).parents("li").index(".mobile .tabs>li");
            //console.log(gotoindex)
            if(pageScroll!=1){
                $("#content-2").mCustomScrollbar('scrollTo', $('.tabbing_1').eq(gotoindex));
            };

        }
        if ($(target).parents(".tabbing_widget_body").length == 1)
        {
            var gotoindex = $(".mobile .tabs>li.active").index(".mobile .tabs>li");
            //console.log(gotoindex)
            if(pageScroll!=1){
                $("#content-2").mCustomScrollbar('scrollTo', $('.tabbing_1').eq(gotoindex));
            };

        }

        $(this).attr("id", "present");
    }
/* ariba Component 59 16-6-16 start */
    function languagegetClick(event) {
      commonClick();
      $('.aribaWidget').show(); 
      $('.widgetLinkEdit').show();
      $('.link_text_option').hide(); 
      $(".mid_right_box.change_properties").removeClass("change_properties");
      $(this).attr("id", "present");
      $(".editPicker26").css('background-color', $('#present.language').css('background-color'));
      $(".editPicker27").css('background-color', $('#present .ariba-text-change > h2').css('color'));
      $(".editPicker28").css('background-color', $('#present .ariba-text-change > p').css('color'));
      $(".ariba-text").val($(this).find(".ariba-text-change > h2").text());
      $(".ariba-text2").val($(this).find(".ariba-text-change > p").text());
    $(".content_fontsize22").val($(this).find(".ariba-text-change > h2").css("font-size").replace("px", ""));
    $(".content_fontsize23").val($(this).find(".ariba-text-change > p").css("font-size").replace("px", ""));
       /* 1-716 start*/
        var previousLink = $(this).attr("data-link");

          if (previousLink != undefined) {
            $(".widgetlinkSelector").val(previousLink);

          } else {
            $(".widgetlinkSelector").val("1");
          }
  /* 1-716 end*/
      
      var fontFamily =   $("#present .ariba-text-change > h2").css("font-family");
      fontFamily     = fontFamily.replace(/\"/g, "");
      $(".content_font22 option").each(function (){
      var familyValue = $(this).val();
      if(familyValue == fontFamily ){
        $(this).prop("selected", true);
      } else {
        $(this).prop("selected", false);
      }
       
      });
      
      var fontFamily2 =   $("#present .ariba-text-change > p").css("font-family");
      fontFamily2     = fontFamily2.replace(/\"/g, "");
      $(".content_font23 option").each(function (){
      var familyValue2 = $(this).val();
      if(familyValue2 == fontFamily2){
        $(this).prop("selected", true);
      } else {
        $(this).prop("selected", false);
      }
       
      });
	  
								$("#screen").prop('checked', true);
								var prodlist = $('#present').attr('data-product');
								var hasChild = $('#present').attr('data-hasChild');
								if(hasChild != "1")
								{
								hasChild="0";   
								}
								var valmaincat = $('#present').attr('data-maincategory');
								var valmaincatname = $('#present').attr('data-maincategory-name');          
								if ((typeof valmaincat != 'undefined') && (typeof valmaincatname != 'undefined')) {             
								$("#categoryRadio").prop('checked', true);
								var  catHtml ="<div class='background_label'><label>Choose a Category:</label></div><div class='background_colorbox'> <select class='selectmaincategory' id='selectedcategory' name='selectedcategory'><option haschild="+hasChild+" value="+valmaincat+" selected>"+valmaincatname+"</option></select><em>Click to change selected category or product</em></div>";
								$('.mainCategory').html(catHtml);
								$('#selectedcategory option[value='+valmaincat+']').prop('selected', 'selected'); 

								for (var i = 0; i < 100; i++) {
								var valmainsubcat = $('#present').attr('select-subcategory' + i);
								if (typeof valmainsubcat != 'undefined') 
								{      
								var catnamedrop= $('#present').attr('select-subcategory-name' + i);
								var dropdownSub="<div class='removeCategory clearfix'><div class='background_label'><label>Choose a Sub Category:</label></div><div class='background_colorbox'><select  class='selectedsubcategory' id='selectsubcategories'  name='selectedsubcategory'><option haschild="+hasChild+" value="+ valmainsubcat +" selected>"+ catnamedrop +"</option></select></div></div>";
								$('.subcategory').append(dropdownSub);
								$(".selectedsubcategory").eq(i).val(valmainsubcat); 
								} else {
								break;
								}
								}
								if(typeof prodlist != 'undefined')
								{
								var prodlistname=$('#present').attr('data-product-name');
								var prodHtml="<div class='removeCategory clearfix'><div class='background_label'><label>Choose a Product:</label></div><div class='background_colorbox'><select class='mainselectedproduct' id='selectedproduct' name='selectedproduct'><option haschild="+hasChild+" value="+ prodlist +" selected>"+ prodlistname +"</option></select></div></div>";
								$('#product').html(prodHtml);
								$("#selectedproduct").val(prodlist);                                                    
								$("#present").attr('data-product', prodlist);   
								}
								}
    }
  
    $(".ariba-text").on('keyup', function (e){
    $('#present .ariba-text-change > h2').text($(this).val());
    });
    $(".ariba-text2").on('keyup', function (e){
    $('#present .ariba-text-change > p').text($(this).val());
    });

/* ariba Component 59 16-6-16 end */


  /* Animation tabing start 19-5-16*/

  function animatTabgetClick(event) {

    commonClick();
    $(this).attr("id", "present");
    $(".tabEdit").show();
    $(".mid_right_box.change_properties").removeClass("change_properties");
    $('.nicEdit-panelContain').parent().width('100%');
    $('.nicEdit-panelContain').parent().next().width('100%');
    $('.nicEdit-main').width('100%');
    $("div.nicEdit-main").addClass('wordwrap');
    //        Tabing 
    $(".animat-tab_body").eq(0).index();
    $(".animat-tab_head ul li").click(function () {
      var currentTabIndex = $(this).index();
      $(".animat-tab_head ul li").removeClass("active");
      $(this).addClass("active");
      $(".animat-tab_body > div").hide();
      $(".animat-tab_body > div").eq(currentTabIndex).fadeIn();


    });
  }

  /* Animation tabing end 19-5-16*/

    $(".tabHead").on('input propertychange', function () {

        var tempIndex = $(this).parents(".tabbing_1").index(".tabbing_1");
        $(".droparea .tabbing_widget").find(".tabbing_widget_head").find("li").eq(tempIndex).find("span").text($(this).val());

    });
    $(".tabHead").on('keyup', function () {

        var tempIndex = $(this).parents(".tabbing_1").index(".tabbing_1");
        $(".droparea .tabbing_widget").find(".tabbing_widget_head").find("li").eq(tempIndex).find("span").text($(this).val());

    });
    

//Contact Widget Click

    function contactWidgetClick() {

         commonClick();

        $(".contact1Widget").show();
        $(".mid_right_box.change_properties").removeClass("change_properties");
       
        $('.nicEdit-panelContain').parent().width('100%');
        $('.nicEdit-panelContain').parent().next().width('100%');
        $('.nicEdit-main').width('100%');
		$("div.nicEdit-main").addClass('wordwrap');

    if ($(".mobile .contact_widget div.address").length == 0) {
            $(".mobile .contact_widget p.address").wrapInner("<div class='address'></div>");
            $(".mobile .contact_widget div.address").unwrap();

        }
    if ($(".mobile .contact_widget div.phone").length == 0) {
            $(".mobile .contact_widget p.phone").wrapInner("<div class='phone'></div>");
            $(".mobile .contact_widget div.phone").unwrap();

        }
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(this).attr("id", "present");

      
      
      
        $(".contact1Widget .subHeading1").prev('div').find('.nicEdit-main').html($("#present").find(".address").html());
        $(".contact1Widget .subHeading2").prev('div').find('.nicEdit-main').html($("#present").find(".phone").html()); 
        $(".contact1Widget .heading").val($("#present").find(".contactus").text());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };

    }


    $(".heading").on('input propertychange', function () {
        $("#present").find(".contactus").text($(this).val());
        $("#present").find(".item_heading").text($(this).val());
        $("#present").find(".contact_small_heading").text($(this).val());
        $("#present").find(".head_disc_content h2").text($(this).val());
        globalRestart();
    });
   
    $(".subHeading1").on('input propertychange', function () {
      
        $("#present").find(".item_content").text($(this).val());
        $("#present").find(".contact_small_subheading").text($(this).val());
    
        $(".container.droparea").shapeshift({
            colWidth: 134.5,
            minColumns: 2
        });
        var heig = $('.mobile .head_disc_widget#present').height();
        $("#content-1").mCustomScrollbar('scrollTo', $('.mobile .head_disc_widget#present'));
    if (heig > 300) {
            var req = parseInt(heig) - 300;
            $("#content-1").mCustomScrollbar('scrollTo', "'-=" + req + "'");

        }
    });
   
    $(".subHeading2").on('input propertychange', function () {
        $("#present").find(".item_disc").text($(this).val());
        globalRestart();
    });

    $(".subHeading3").on('input propertychange', function () {
        $("#present").find(".change_text_area p").text($(this).val());
        if($("#present").hasClass("custom_widget2")){
          $("#present").find(".small_widget_text > h2").text($(this).val());
        }
        globalRestart();
    });

    $(".apiUrl").on('input propertychange', function () {
        $("#present").find("a").attr("href", $(this).val());

    });
    $(".apiUrl").on('keyup', function () {
        $("#present").find("a").attr("href", $(this).val());

    });

    $(".socialFeedInput").on('input propertychange', function () {
        $("#present").find("a").attr("data-uniqueId", $(this).val());

    });
    $(".socialFeedInput").on('keyup', function () {
        $("#present").find("a").attr("data-uniqueId", $(this).val());

    });

//Head Description Widget Click

    function headDiscWidgetClick() {

        commonClick();
        $(".content_keywords").show();
        $(".headDiscBigWidget").show();
		if($(this).hasClass('social_icons')){
			$('.widgetLinkEdit').show();
            $(".social_sharing").show();
		};
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".headDiscBigWidget .heading").val($(this).find(".head_disc_content h2").text());
    if ($(".mobile .head_disc_content .head_disc_content_text").length == 0) {
            $(".mobile .head_disc_content p").wrapInner("<div class='head_disc_content_text'></div>");
            $(".mobile .head_disc_content .head_disc_content_text").unwrap();

        }        
        $(".headDiscBigWidget .subHeading1").prev('div').find('.nicEdit-main').html($(this).find(".head_disc_content .head_disc_content_text").html());
        $(".screen_name").val($("#pageSelector option:selected").text());
        $('.nicEdit-panelContain').parent().width('100%');
        $('.nicEdit-panelContain').parent().next().width('100%');
        $('.nicEdit-main').width('100%');
$("div.nicEdit-main").addClass('wordwrap');
        $(this).attr("id", "present");
      // edit 4 option
        $(".editPicker16").css("background-color", $("#present h2").css("color"));
        //$(".contentKeywords").val($("#present").attr("data-keywords"));
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };



    }
    
    
// festival list widget click
    function festivalFullWidgetClick(){
        commonClick();
        $(this).attr("id", "present");
		/*30-6-16 start*/
    $(".editPicker29").css("background-color", $(".item_heading").css("color"));
    var eventFontValue = $("p.item_heading").css("font-family");
        eventFontValue = eventFontValue.replace(/\"/g, "");
//     alert(eventFontValue)
    $(".festivalList .content_font24 option").each(function (){
      var eventFamilyValue = $(this).val();
   //  console.log(eventFamilyValue);
      if(eventFamilyValue == eventFontValue){
         $(this).prop("selected", true);
      } else {
          $(this).prop("selected", false);
      }
    });
    /*30-6-16 end*/
    /*1-7-16 start*/
      var previousLink = $(this).attr("data-link");

    if (previousLink != undefined) {
      $(".widgetlinkSelector").val(previousLink);

    } else {
      $(".widgetlinkSelector").val("1");
    }
    /*1-7-16 end*/
        $('.change_properties').removeClass('change_properties');
        $('.festivalList').show();
        $('.widgetLinkEdit').show();
        $(".eventItemEdit").show();
        $(".eventcomp6").show();
		$('.content_textboxevent').hide()
    //$('.eventCardTitle').val(eventList[0].ecardtitle);
    $(".eventcircul").attr('src', $("#present img").attr("src"));
    //$(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));
        $('.eventTitle').val($('#present .item_full_widget_right .item_heading').text());
        $('.eventDate').val($('#present .item_full_widget_right .item_disc').text());
        $('.startTime').val($('#present').attr('data-starttime'));
        $('.endTime').val($('#present').attr('data-endtime'));
        $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
		
		$('select.date-select').on('change', function () {
      var  optValue =  $('.pickit:selected').val();
      $(".item_full_widget_event").attr("date-form", optValue);
    });
	$('select.date-select').on('change', function () {
      var  optValue =  $('.pickit:selected').val();
      $(".item_full_widget_event").attr("date-form", optValue);
    });
if ($('#present').attr('all-day-event') == 1) {            
     $('.sh-hide-one').hide();            
     $('.sh-checkbox').prop('checked', true);        
   }
  else {            
     $('.sh-hide-one').show();            
     $('.sh-checkbox').prop('checked', false);        
   }
		
    }
var elistIndex;

    function festivalWidgetClick() {	
        $('#eventActive').removeAttr('id');
        $(this).attr('id','eventActive');
        $(".mid_right_box_head").parent().removeClass("active");
        $(".mid_right_box_body").hide();
        $(".link_text_option").hide();
        $(".mid_right_box").last().addClass("active");
        $(".mid_right_box").last().find(".mid_right_box_body").show();
        $(".mid_right_box").last().find(".mid_right_box_body").children("div").hide();
        $(".mid_right_box_head i").removeClass("fa-rotate-180");
        $(".mid_right_box").last().find(".mid_right_box_head i").addClass("fa-rotate-180");        

        $('.change_properties').removeClass('change_properties');
        $('.festivalList').show();
     /* 13-7-16 start*/
     $('.widgetLinkEdit').hide();
     /* 13-7-16 end*/
    $('.eventBackground').show();
		$('.eventcomp6').hide();
    $('.link_text_option').hide();
     $('.hide_event').show();
        $("#present").removeAttr('id');
        $("#presentBanner").removeAttr("id");
        $(this).find('.festival-list li:first').attr('id','present');
        $('.eventCardTitle').val($('#present').parents('.festival-card').find('h2.festival-heading').text());
        $('.eventTitle').val($('#present h3 span').text());
        $('.eventDate').val($('#present h3 sub').text());
        $('.startTime').val($('.festival-card .festival-list li:first').attr('data-starttime'));
        $('.endTime').val($('.festival-card .festival-list li:first').attr('data-endtime'));
        $(".editPicker").css("background-color", $('#present').parents('.festival-card').find('h2.festival-heading').css("color"));
    $(".eventPicker").css("background-color", $("#eventActive.festival-card").css("background-color"));
        if(!$(this).attr('data-eventindex')){
            var eventCardLengthCount = $('.mobile .festival-card').length - 1;
            $(this).attr('data-eventindex',eventCardLengthCount);
			elistIndex = $('#present').index();		
      if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
				var eventLength = $('.mobile #eventActive.festival-card ul.festival-list li').length - 1;
				var eventCardLength = $('.mobile .festival-card').length;
				var eventindex = $('#eventActive').attr('data-eventindex');
				var neweventindex = eventList[eventindex];
				var myArr = [];
				if(eventCardLength>eventList.length){
					for(i=0;i<=eventLength;i++){
						myArr.push(
							{
								etitle: $('.mobile #eventActive .festival-list li').eq(i).find('h3 span').text(),
								edate: $('.mobile #eventActive .festival-list li').eq(i).find('h3 sub').text(),
								estarttime: $('.mobile #eventActive .festival-list li').eq(i).attr('data-starttime'),
								eendtime: $('.mobile #eventActive .festival-list li').eq(i).attr('data-endtime'),
								epageindex: $('.mobile #eventActive .festival-list li').eq(i).attr('data-link')
							}
						)
					}
					eventList.splice(eventindex,0,myArr);
					myArr[0].ecardtitle = $('.mobile #eventActive.festival-card h2').text();
					myArr[0].ecardindex = $('.mobile #eventActive.festival-card').attr('data-eventindex');
				}
			} 
        };
        
		
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        }
    }

    $(document).on('click','.mobile .festival-card .festival-list li', function(e){
        if($('.mobile .festival-card .festival-list li#present').length!=0){
            e.stopPropagation();   
        }
        $('#present').removeAttr('id');
        $(this).attr('id','present');
        $('#eventActive').removeAttr('id');
        $(this).parents('.festival-card').attr('id','eventActive');
        if(!$(this).parents('.festival-card').attr('data-eventindex')){
            var eventCardLength = $('.mobile .festival-card').length - 1;
            $(this).parents('.festival-card').attr('data-eventindex',eventCardLength);
        };
        $('.eventTitle').val($('#present h3 span').text());
        $('.eventDate').val($('#present h3 sub').text());
        $('.startTime').val($(this).attr('data-starttime'));
        $('.endTime').val($(this).attr('data-endtime'));

        var eventLength = $('.mobile #eventActive.festival-card ul.festival-list li').length - 1;
        var eventCardLength = $('.mobile .festival-card').length;
        var eventindex = $('#eventActive').attr('data-eventindex');
        var neweventindex = eventList[eventindex];
        var myArr = [];
        if(eventCardLength>eventList.length){
            for(i=0;i<=eventLength;i++){
                myArr.push(
                    {
                        etitle: $('.mobile #eventActive .festival-list li').eq(i).find('h3 span').text(),
                        edate: $('.mobile #eventActive .festival-list li').eq(i).find('h3 sub').text(),
                        estarttime: $('.mobile #eventActive .festival-list li').eq(i).attr('data-starttime'),
                        eendtime: $('.mobile #eventActive .festival-list li').eq(i).attr('data-endtime'),
                        epageindex: $('.mobile #eventActive .festival-list li').eq(i).attr('data-link')
                    }
                )
            }
            eventList.splice(eventindex,0,myArr);
            myArr[0].ecardtitle = $('.mobile #eventActive.festival-card h2').text();
            myArr[0].ecardindex = $('.mobile #eventActive.festival-card').attr('data-eventindex');
        }
        elistIndex = $('#present').index();
		$(this).attr("data-originalIndex");
        var previousLink = $(this).attr("data-link");

        if (previousLink != undefined)
        {
            $(".widgetlinkSelector").val(previousLink);
        }
        else
        {
            $(".widgetlinkSelector").val("1");
        }
        
        $('#content-2').mCustomScrollbar('stop').mCustomScrollbar('scrollTo', $('.eventTitle').parents('.mid_right_box').find('.editDevider'));

    });
    $('.eventCardTitle').on('input propertychange', function(){
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
            var eventindex = $('#eventActive').attr('data-eventindex');
        $('#present').parents('.festival-card').find('h2.festival-heading').text($(this).val());
            eventList[eventindex][0].ecardtitle = $('.eventCardTitle').val();
        } else {
            var eventindex = $('.item_full_widget_event:first').attr('data-indexcard');
            eventList[eventindex][0].ecardtitle = $('.eventCardTitle').val();
        }
    });
    $('.eventTitle').on('input propertychange', function(){
        $('#present h3 span').text($(this).val());
        $('#present .item_full_widget_right .item_heading').text($(this).val());
        //var eventTitleVal = $(this).val();
        elistIndex = $('#present').index();
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
            var eventindex = $('#eventActive').attr('data-eventindex');
            eventList[eventindex][elistIndex].etitle = $('#present h3 span').text();
        } else {
            var eventindex = $('.item_full_widget_event:first').attr('data-indexcard');
            if(elistIndex<=eventList[eventindex].length-1){
                eventList[eventindex][elistIndex].etitle = $('#present .item_full_widget_right p.item_heading').text();
            }
        };
    });
    $('.eventDate').on('change', function(){
        $('#present h3 sub').text($(this).val());
        $('#present .item_full_widget_right .item_disc').text($(this).val());
        //var eventDateVal = $(this).val();
        var eventindex = $('#eventActive').attr('data-eventindex');
        elistIndex = $('#present').index();
        /*if(elistIndex<=eventList[eventindex].length-1){
            if(selectedPageIndex==1){
                eventList[eventindex][elistIndex].edate = $('#present h3 sub').text();
            } else {
                eventList[elistIndex].edate = $('#present .item_full_widget_right .item_disc').text();
            }
        };*/
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
			
            var eventindex = $('#eventActive').attr('data-eventindex');
            eventList[eventindex][elistIndex].edate = $('#present h3 sub').text();
        } else {
            var eventindex = $('.item_full_widget_event:first').attr('data-indexcard');
            if(elistIndex<=eventList[eventindex].length-1){
                eventList[eventindex][elistIndex].edate = $('#present .item_full_widget_right .item_disc').text();
            }
        };
    });
    $('.startTime').on('change', function(){
        $('#present').attr('data-starttime',$(this).val());
        //var eventStimeVal = $(this).val();
        elistIndex = $('#present').index();
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
            var eventindex = $('#eventActive').attr('data-eventindex');
            eventList[eventindex][elistIndex].estarttime = $('#present').attr('data-starttime');
        } else {
            var eventindex = $('.item_full_widget_event:first').attr('data-indexcard');
            if(elistIndex<=eventList[eventindex].length-1){
                eventList[eventindex][elistIndex].estarttime = $('#present').attr('data-starttime');
            }
        }
    });
    $('.endTime').on('change', function(){
        $('#present').attr('data-endtime',$(this).val());
        //var eventEtimeVal = $(this).val();
        elistIndex = $('#present').index();
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
            var eventindex = $('#eventActive').attr('data-eventindex');
            eventList[eventindex][elistIndex].eendtime = $('#present').attr('data-endtime');
        } else {
            var eventindex = $('.item_full_widget_event:first').attr('data-indexcard');
            if(elistIndex<=eventList[eventindex].length-1){
                eventList[eventindex][elistIndex].eendtime = $('#present').attr('data-endtime');
            }
        }
    });
    $('.addPage.Widget').on('click', function(){
        elistIndex = $('#present').index();
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
            var eventindex = $('#eventActive').attr('data-eventindex');
            if($('.festival-card ').attr('id','eventActive')){
                eventList[eventindex][elistIndex].epageindex = pageDetails.length+1;
            };
        } else {
            var eventindex = $('.item_full_widget_event:first').attr('data-indexcard');
            if(elistIndex<=eventList[eventindex].length-1){
                eventList[eventindex][elistIndex].epageindex = pageDetails.length+1;
            }
        }
    });
    $('.addList').on('click', function(e){
        e.preventDefault();
        var dataLink = $('#present').parents('.festival-card:first').attr('data-link');
        if (!dataLink) {
      if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
              if($('.mobile #eventActive.festival-card ul.festival-list li').length >= 3){
                  $('.popup_container').fadeIn();
                  $('.newscreen_popup').fadeIn();
              } else {
        $('<li><h3><span>Event Title</span><sub>Event Date</sub></h3></li>').insertAfter($('.mobile .festival-card ul.festival-list li:last'));
        restartShapeShift();
              }
          } else {
			  $('.content_textboxevent').hide();
              $(".container.droparea").append('<div class="item_full_widget_event" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">New Event</p><p class="item_content"></p><div class="clear"></div><p class="item_disc">Event Date</p></div></div>');
              globalRestart();
			    var eventColorValue = $(".container.droparea").find(".item_heading:first").css("color");
              var eventHeadingValue = $(".container.droparea").find(".item_heading:first").css("font-family");
              $(".container.droparea").find(".item_heading:last, .item_disc:last").css("color", eventColorValue);
              $(".container.droparea").find(".item_heading:last, .item_disc:last").css("font-family", eventHeadingValue);
              var eventHeight = $('.container.droparea').height();
              $('#content-1').mCustomScrollbar('scrollTo', eventHeight);
          }
        }
        else {
	    conditionCheckForPageChange();       
        $("#pageSelector").val(dataLink).trigger("change")
         $(".container.droparea").find("div:first").trigger('click');
		 $('.content_textboxevent').hide();
        }      
      
    });  
  
     $('.newscreen_popup .newscreen_popup_body .newscreen_popup_form .change_screen').on('click', function(){
		 var slideVal='';
        newFestivalSlide(slideVal);
    });
    $('.newscreen_popup .newscreen_popup_body .newscreen_popup_form .cancel_change').on('click', function(){
		 if($(".cancel_change").val() == "Cancel")
	  {
		  document.getElementById("eventActive").removeAttribute("data-link");
		  document.getElementById("eventActive").removeAttribute("data-eventindex");
	  }
        $('.popup_container').hide();
        $('.newscreen_popup').hide();
    });
    $('.removeList').on('click', function(e){
        e.preventDefault();
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
        if($('.mobile .festival-card ul.festival-list li').length==1){
                $('.popup_container').fadeIn();
                $('.minimum_one').fadeIn();
                //alert('Minimum 1 Required');
        } else {
            $('#present').remove();
            $('.mobile .festival-card ul.festival-list li:first').attr('id','present');
                $('.mobile .festival-card ul.festival-list li:first').trigger('click');
            restartShapeShift();
            };
        } else {
             if($('.mobile .item_full_widget_event').length==1){
                $('.popup_container').fadeIn();
                $('.minimum_one').fadeIn();
                //alert('Minimum 1 Required');
            } else {
                $('#present').remove();
                $('.mobile .item_full_widget_event:first').attr('id','present');
                $('.mobile .item_full_widget_event:first').trigger('click');
                restartShapeShift();
            };
        };
    });
    $('.minimum_one .minimum_one_body .minimum_one_form input:button').on('click', function(){
        $('.popup_container').hide();
        $('.minimum_one').hide();
    });
    $('.newscreen_popup .newscreen_popup_body .newscreen_popup_form input:button').on('click', function(){
        $('.popup_container').hide();
        $('.newscreen_popup').hide();
    });

    function newFestivalSlide(editIndex){
        $('#screenoverlay').fadeIn();
        if ($("#appName").val() != '') {
            if ($('.screen_name').val() != '') {
                if (editIndex == '') {
                    var newindex = parseInt(pageDetails[pageDetails.length - 1].index) + 1;
                    pageDetails.push({
                        index: newindex,
                        name: $('#present').parents('.festival-card:first').find('h2.festival-heading').text(),
                        icon: '',
                        originalIndex: newindex+deletedScreenCount,
                        keyword: ''
                    });
                    $('#present').parents('.festival-card:first').attr('data-link', newindex);
                    $('#present').parents('.festival-card:first').attr('data-originalindex', newindex + deletedScreenCount);
                    $(".save_hidden").trigger("click");
                    savehtml();
                }
                else {
                    var newindex = editIndex;     
                }
                setSelectedPageIndex(newindex);
                 var $wrapper = $('.menu_links');
                $('.menu_body_links:last-child', $wrapper).clone(true).attr("data-ind", selectedPageIndex).appendTo($wrapper);
                $('.menu_body_links:last-child').find("li").eq(1).html("<img src='http://www.instappy.com/images/menu_img.jpg' alt='Image Not Found' class='icon_upload_img'><input type='file' class='icon_upload'>");
                updateSlideNames();
                $('.menu_body_links:last li:first .addToSlide').attr("checked", false);
                $('.menu_body_links:last li:first .addToSlide').removeAttr("disabled");
        $('.menu_body_links:last li:first .addToSlide').trigger("click");
                populateLink();
                $("#pageSelector").val(newindex);
                $("#newPageTextEdit").val($("#pageSelector option:selected").text())
                $(".theme_head h1:first").text($("#pageSelector option:selected").text());
                $(".screen_name").val($("#pageSelector option:selected").text());

                conditionCheckForPageChange();

               
                //Removing the present Div Structure
                $(".container.droparea").empty();
                $(".banner").remove();
					 $('.hidden_box').hide();

               var currentFestivalIndex = $('#eventActive').attr('data-eventindex');
				if(!currentFestivalIndex)
				{
				var currentFestivalIndex=0;	
				}
				
                var eventListLength = parseInt(eventList[currentFestivalIndex].length) - 1;
                for(i=0;i<=eventListLength;i++){
                    $(".container.droparea").append('<div class="item_full_widget_event" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">New Event</p><p class="item_content"></p><div class="clear"></div><p class="item_disc">Event Date</p></div></div>');
                    $('.item_full_widget_event').eq(i).find('.item_full_widget_right .item_heading').text(eventList[currentFestivalIndex][i].etitle);
                    $('.item_full_widget_event').eq(i).find('.item_full_widget_right .item_disc').text(eventList[currentFestivalIndex][i].edate);
                    $('.item_full_widget_event').eq(i).attr('data-starttime',eventList[currentFestivalIndex][i].estarttime);
                    $('.item_full_widget_event').eq(i).attr('data-endtime',eventList[currentFestivalIndex][i].eendtime);
                    $('.item_full_widget_event').eq(i).attr('data-link',eventList[currentFestivalIndex][i].epageindex);
                    $('.item_full_widget_event').eq(i).attr('data-indexcard',eventList[currentFestivalIndex][0].ecardindex);
                }
                $(".container.droparea").append('<div class="item_full_widget_event" data-ss-colspan="2" data-component="9"><p class="widgetClose">x</p><div class="item_full_widget_left"><img src="' + BASEURL + 'images/item_add_img.png" /></div><div class="item_full_widget_right"><p class="item_heading">New Event</p><p class="item_content"></p><div class="clear"></div><p class="item_disc">Event Date</p></div></div>');
                $('.container.droparea .item_full_widget_event:last').trigger('click');
                $('.eventCardTitle').val(eventList[currentFestivalIndex][0].ecardtitle);
                storedPages[newindex - 1].layouttype = "999";
                 if($(".container.droparea+.ad_widget").length==1)
                    {
                        $(".container.droparea+.ad_widget").remove();
                    }
                    globalRestart();
            } else {
                $(".cropcancel").trigger("click");
                $("#page_ajax").html('').hide();
                $(".popup_container").css({'display': 'block'});
                $(".confirm_name .confirm_name_form").html('<p>Please choose screen name.</p><input type="button" value="OK">');
                $(".confirm_name").css({'display': 'block'});
                return false;
            }
        } else {
            $('#screenoverlay').fadeOut();
            fnErrAppName();
        }
        $('#screenoverlay').fadeOut();
    }

// calender widget click
    function calenderWidgetClick() {
        commonClick();
        $(this).attr('id','present');
        $('.change_properties').removeClass('change_properties');
        $('.calenderDate').show();
        $('.calenderHead').val($('#present h2.calendar-heading').text());
        $(".editPicker").css("background-color", $("#present h2.calendar-heading").css("color"));
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }
    $('.calenderHead').on('input propertychange', function(){
       $('#present h2.calendar-heading').text($(this).val());
    });
    
// calender widget click
    function audioWidgetClick(){
        commonClick();
        $('.change_properties').removeClass('change_properties');
        $(this).attr('id','present');
        $('.audioWidget').show();
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
        $('.audioHead').val($('#present span').text());
        $('.audioLink').val($('#present').attr('data-audiolink'));
    }
    $('.audioHead').on('input propertychange', function(){
        $('#present span').text($(this).val());
    });
    $('.audioLink').on('input propertychange', function(){
        $('#present').attr('data-audiolink',$(this).val());
    });

    
//Social icons Widget Click
    function socialIconsWidget() {

        commonClick();
        $('.widgetLinkEdit').show();
        $(".widgetEdit.mapwidgetEdit").hide();
        $(".link_text_option").hide();
        $(".social_icon_replace").show();
        $(".content_font").show();
        $(".editPicker").show();
    $(".screen-animation").show();
    //$(".screen_animat_show").siblings().hide();
        $(this).attr("id", "present");

    hideshow();

        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".widgetlinkSelector").val($("#present").attr("data-link"));
        $(".content_textbox_edit").val($("#present").find(".next").text());
        $(".editPicker").css("background-color", $("#present a").css("color"));
        $('.social_icon_replace').attr('id', 'presentIcon');
        var iconClass = $(this).find('.next-icon i').attr('class');
        $('.icon:has(.' + iconClass + ')').trigger('click');
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };

    }


//Contact Small Widget Click
    function contactSmallWidgetClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".contactSmallWidget").show();
    $(".editPicker14").show();
    $(".editPicker15").show();
    $(".content_font14").show();
        $(".contactSmallWidgetPhoneEmail").show();
        $(".contactSmallWidgetPhoneEmail").find(".enter_phone").val($("#present .contact_btns .your_phone img").attr("data-linkphone"));
        $(".contactSmallWidgetPhoneEmail").find(".enter_email").val($("#present .contact_btns .your_mail img").attr("data-linkemail"));
        $(".contactSmallWidget .heading").val($(this).find(".contact_small_heading").text());
        $(".contactSmallWidget .subHeading1").val($(this).find(".contact_small_subheading").text());
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(this).attr("id", "present");
        $(".enter_phone").val($("#present a.your_phone img").attr("data-linkPhone"));
        $(".enter_mail").val($("#present a.your_mail img").attr("data-linkemail"));
    $(".contactPicker").css("background-color", $("#present.contact_small_widget").css("background-color"));
    //$(".content_font13").val($(this).find(".contact_small_heading").css("font-family").replace(/'/g, ""));
    //$(".content_font14").val($(this).find(".contact_small_subheading").css("font-family").replace(/'/g, ""));
        $(".editPicker14").css("background-color", $("#present p.contact_small_heading").css("color"));
        $(".editPicker15").css("background-color", $("#present p.contact_small_subheading").css("color"));

    /*22-6-1 start*/
    var contactSmallValue = $("#present p.contact_small_heading").css("font-family");
    contactSmallValue = contactSmallValue.replace(/\"/g, "");
    $(".contactSmallWidget .content_font13 option").each(function () {
      var contactFontValue = $(this).val();
      if (contactFontValue == contactSmallValue) {
        $(this).prop("selected", true);
      }
    });

    var contactSmallValue2 = $("#present p.contact_small_subheading").css("font-family");
    contactSmallValue2 = contactSmallValue2.replace(/\"/g, "");
    $(".contactSmallWidget .content_font14 option").each(function () {
      var contactFontValue2 = $(this).val();
      if (contactFontValue2 == contactSmallValue2) {
        $(this).prop("selected", true);
      }
    });


    /*22-6-1 end*/


        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };

    }


//contact widget click
    function contact_card_edit() {
         
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".widgetEdit.mapwidgetEdit").show();
        $(".subHeadingOption").hide();
        $(".widgetEdit.mapwidgetEdit .content_fontsize, .widgetEdit.mapwidgetEdit .content_font, .widgetEdit.mapwidgetEdit .editPicker").hide();
      
        $(".phoneNumberEdit").show();
     /*12-7-16 start*/
     $(".content_font").show();
     $(".editPicker").show();
     /*12-7-16 end*/
        $(this).attr("id", "present");
     /*12-7-16 start*/
     $(".editPicker").css("background-color", $("#present .contact_card_text > p").css("color"));
     var contactCardValue = $("#present .contact_card_text > p").css("font-family");
     contactCardValue = contactCardValue.replace(/\"/g, "");
     $(".mapwidgetEdit .content_font option").each(function () {
       contactFontValue = $(this).val();
       if (contactFontValue == contactCardValue) {
         $(this).prop("selected", true);
       } else {
         $(this).prop("selected", false);
       }
     });
     /*12-7-16 end*/
        $(".phoneNumberEdit input[type='text']").val($("#present").attr("data-linkphone"))
        $(".content_textbox_edit").val($("#present").find('.contact_card_text').children("p").text())
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }
    $('.editHintText .content_textbox input:text').on('input propertychange', function(){
        $('#present').find('input:text, textarea, input[type="date"]').attr('placeholder', $(this).val());
        $('#present').find('select option:eq(0)').text($(this).val());
    });
	
	 function minMaxLength(){
        if (event.which != 8 && isNaN(String.fromCharCode(event.which))) {
            event.preventDefault();
        }
        else if (event.which == 32) {
            event.preventDefault();
        }
    }
    
    function minLessThanMax (thisObj) {
        var minVal = $('.editMinLength .content_textbox input:text').val(),
            maxVal = $('.editMaxLength .content_textbox input:text').val();
        if (minVal && maxVal && (Number(maxVal) < Number(minVal))) {
            $(thisObj).val('');
            $("#page_ajax").html('').hide();
            $(".popup_container").css({'display': 'block'});
            $(".confirm_name .confirm_name_form").html('<p>Min - length should be less than or equal to Max - length!</p><input type="button" value="OK">');
            $(".confirm_name").css({'display': 'block'});
            return false;
        }
    }
    
    $('.editMinLength .content_textbox input:text').on('input propertychange', function(){
        $('#present').find('input:text').attr('minLength', $(this).val());
        $('#present').find('textarea').attr('minLength', $(this).val());
    });
    
    $('.editMinLength .content_textbox input:text').keypress(function(){
        minMaxLength();
    });
    
    $('.editMaxLength .content_textbox input:text').on('input propertychange', function(){
        $('#present').find('input:text').attr('maxLength', $(this).val());
        $('#present').find('textarea').attr('maxLength', $(this).val());
    });

    $('.editMaxLength .content_textbox input:text').keypress(function(){
        minMaxLength();
    });
    
    $('.editMinLength .content_textbox input:text, .editMaxLength .content_textbox input:text').on('blur', function () {
        minLessThanMax(this);
    });
    
    $('.editFieldType .content_textbox select').change(function(){
        $('#present').attr('data-fieldtype', $(this).val());
    });
    
    $('.editRequired .content_textbox input:checkbox').on('change', function(){
        $('#present').find('input:text, textarea, select, input[type="date"]').attr('required', $(this).prop('checked'));
        if ($('#present').find('input:checkbox').length || $('#present').find('input[type="file"]').length) {
            $('#present').attr('required', $(this).prop('checked'));
        }
    });
    
    $('.editLabel .content_textbox input:text').on('input propertychange', function(){
        $('#present').find('label.common_input_label').text($(this).val());
        $('#present').find('label.common_input_label').text($(this).val());
    });
    
    $('.editButton .content_textbox input:text').on('input propertychange', function(){
        $('#present').find('input:submit').val($(this).val());
    });
    
    $('.editLeftButton .content_textbox input:text').on('input propertychange', function(){
        $('#present').find('.tabbtn_right ul li:first a').text($(this).val());
    });
    
    $('.editRightButton .content_textbox input:text').on('input propertychange', function(){
        $('#present').find('.tabbtn_right ul li:last a').text($(this).val());
    });

    $('.editTime .content_textbox select').on('change', function(){
        $('#present').find('.full_textbox_inner input:text').val($(this).val());
    });
    
//    $('.editDate .content_textbox input:text').datepicker();
    
    /*$('.editDate .content_textbox input:text').on('change', function(){
        $('#present').find('.full_textbox_inner input:text').val($(this).val());
    });*/
  
    $('.editDateFormat .content_textbox select.content_textbox_select').on('change', function(){
        $('#present').find('.full_textbox_inner input[type="date"]').attr('data-dateformat', $(this).val());
    });

    $(document).on('click','.editFieldIcon .content_textbox .form_icon_select', function(){
        $('#presentFormIcon').removeAttr('id');
        $(this).parent().attr('id','presentFormIcon');
        $('.popup_container').fadeIn();
        $('.icon_set_popup').fadeIn();
        $('.icon_set_popup').addClass('form_icon');
    });
    
    $('.editDropdownList .content_textbox .dropdownList_btn').on('click', function(){
        if($(this).prev('.dropdownList').val()!=''){
            $('.dropdownList_box').show();
            var newOption = $(this).prev('.dropdownList').val();
            $('.dropdownList_box p').removeAttr('id');
            $('.dropdownList_box').append('<p id="newSelectOption"></p>');
            var listLength = $('.dropdownList_box p').length;
            $('.dropdownList_box p#newSelectOption').attr('data-index',listLength);
			$('.dropdownList_box p#newSelectOption').text(newOption);
            $('.dropdownList_box p#newSelectOption').append('<span class="removeSelectList">&times;</span>');
            $('.editDropdownList .content_textbox .dropdownList').val('');
            $('#present').find('select.common_input_selectbox').append('<option value='+ listLength +'>'+ newOption +'</option>');
			
        }
    });
    
    $(document).on('click', '.removeSelectList', function(){
        $(this).parent('p').remove();
        if($('.dropdownList_box p').length==0){
            $('.dropdownList_box').hide();
        };
        var removedIndex = $(this).parent('p').attr('data-index');
        $('#present').find('select.common_input_selectbox option[value = "'+removedIndex+'"]').remove();
    });
    
    $('.editCheckboxList .content_textbox .dropdownList_btn').on('click', function(){
        if($(this).prev('.dropdownList').val()!=''){
            var newCheckbox = $(this).prev('.dropdownList').val();
            $('.newCheckBox').removeClass('newCheckBox');
            var checkboxLength = $('#present .check_input_box .check_input_box_inner').length;
            $(this).parent('.content_textbox').append('<div class="checkboxListInner clear" data-index="'+checkboxLength+'"><input type="text" placeholder="Enter text" class="dropdownList newCheckBox" maxLength="10"><a href="#" class="dropdownList_delete">Delete</a></div>');
			$('.newCheckBox').val(newCheckbox);
            $('.editCheckboxList .content_textbox .dropdownList:first').val('');
            $('<div class="check_input_box_inner" data-index="'+checkboxLength+'"><div class="check_left"><input type="checkbox"></div><div class="check_label_right"><label class="common_input_label">'+newCheckbox+'</label></div></div>').insertAfter('#present .check_input_box .check_input_box_inner:last');
			
            globalRestart();
        }
    });
    
    $('.editRadioList .content_textbox .dropdownList_btn').on('click', function(){
        if ($(this).prev('.dropdownList').val()) {
            var newCheckbox = $(this).prev('.dropdownList').val();
            $('.newCheckBox').removeClass('newCheckBox');
            var radioLength = $('#present .radio_input_box .radio_input_box_inner').length;
            $(this).parent('.content_textbox').append('<div class="checkboxListInner clear" data-index="'+radioLength+'"><input type="text" placeholder="Enter text" class="dropdownList newCheckBox" maxLength="10"><a href="#" class="dropdownList_delete">Delete</a></div>');
            $('.newCheckBox').val(newCheckbox);
            $('.editRadioList .content_textbox .dropdownList:first').val('');
            $('<div class="radio_input_box_inner" data-index="'+radioLength+'"><div class="radio_left"><input type="radio"></div><div class="radio_label_right"><label class="common_input_label">'+newCheckbox+'</label></div></div>').insertAfter('#present .radio_input_box .radio_input_box_inner:last');
			var newStyle = $('#present').find('label.common_input_label:first').attr('style');
			$('#present').find('label.common_input_label:last').attr('style', newStyle);
            globalRestart();
        }
    });
    
    $(document).on('click','.checkboxListInner .dropdownList_delete', function(e){
        e.preventDefault();
        var checkboxListIndex = $(this).parent('.checkboxListInner').attr('data-index');
        $(this).parent('.checkboxListInner').remove();
        $('.check_input_box .check_input_box_inner[data-index="'+checkboxListIndex+'"]').remove();
        $('.radio_input_box .radio_input_box_inner[data-index="'+checkboxListIndex+'"]').remove();
        $('.editCheckBox .editCheckInner[data-index="'+checkboxListIndex+'"]').remove();
        globalRestart();
    });
    
    $(document).on('input propertychange', '.checkboxListInner input:text', function(){
        var checkboxListIndex = $(this).parent('.checkboxListInner').attr('data-index');
        // $('.mobile .check_input_box_inner[data-index="'+checkboxListIndex+'"]').find('.check_label_right label.common_input_label').text($(this).val());
        // $('.mobile .radio_input_box_inner[data-index="'+checkboxListIndex+'"]').find('.radio_label_right label.common_input_label').text($(this).val());
        if ($(this).parents('.form_edit_inner_box:first').hasClass('editRadioList')) {
            $('#present .radio_input_box_inner[data-index="'+checkboxListIndex+'"] .radio_label_right label.common_input_label').text($(this).val());
        }else{
            $('#present .check_input_box_inner[data-index="'+checkboxListIndex+'"]').find('.check_label_right label.common_input_label').text($(this).val());
        }
    });
    
    $(document).on('change', '.editAttachmentType input:radio', function () {
        $('#present').attr('data-filetype', $(this).val());
    });
    
//full textbox widget click
    function fullTextboxClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editHintText .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".full_textbox_inner input:text").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".full_textbox_inner input:text").css('background-color'));
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// label textbox widget click
    function labelLeftTextboxClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editLabel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find(".label_left label.common_input_label").text());
        $(".editHintText .content_textbox input:text").val($(this).find(".textbox_right input:text").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".textbox_right input:text").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".textbox_right input:text").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".textbox_right input:text").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".textbox_right input:text").css('background-color'));
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }
    
    
// full textbox Label widget click
    function fullTextboxLabelClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editLabel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find("label.common_input_label").text());
        $(".editHintText .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".full_textbox_inner input:text").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".full_textbox_inner input:text").css('background-color'));
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// full textbox icon widget click
    function fullTextboxIconClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(".editFieldIcon").show();
        $(this).attr("id", "present");
        $(".editHintText .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".full_textbox_inner input:text").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".full_textbox_inner input:text").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".full_textbox_inner input:text").css('background-color'));
        if($(this).find(".full_textbox_inner .common_icon_box span").length!=0){
            if($('.editFieldIcon .content_textbox span').length!==0){
               $('.editFieldIcon .content_textbox span').attr('class', $(this).find(".full_textbox_inner .common_icon_box span").prop('class'));
            } else {
               $('.editFieldIcon .content_textbox img').replaceWith('<span class="form_icon_select"></span>');
               $('.editFieldIcon .content_textbox span').addClass($(this).find(".full_textbox_inner .common_icon_box span").prop('class'));
            }
        }
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// full textarea widget click
    function fullTextareaClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editHintText .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".full_textarea_inner textarea").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".full_textarea_inner textarea").css('background-color'));
        
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// textarea label widget click
    function LabelLeftTextareaClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editLabel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find(".textarea_label_left label").text());
        $(".editHintText .content_textbox input:text").val($(this).find(".textarea_right textarea").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".textarea_right textarea").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".textarea_right textarea").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".textarea_right textarea").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".textarea_right textarea").css('background-color'));
        
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }
    
// full textarea Label widget click
    function fullTextareaLabelClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editLabel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find("label.common_input_label").text());
        $(".editHintText .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".full_textarea_inner textarea").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".full_textarea_inner textarea").css('background-color'));
        
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// full textarea icon widget click
    function fullTextareaIconClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editHintText").show();
        $(".editMinMaxLength").show();
        $(".editMinLength").show();
        $(".editMaxLength").show();
        $(".editFieldType").show();
        $(".editRequired").show();
        $(".editFieldBg").show();
        $(".editFieldIcon").show();
        $(this).attr("id", "present");
        $(".editHintText .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('placeholder'));
        $(".editMinLength .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('minLength'));
        $(".editMaxLength .content_textbox input:text").val($(this).find(".full_textarea_inner textarea").attr('maxLength'));
        $(".editFieldType .content_textbox select").val($(this).attr('data-fieldtype'));
        if($(this).find(".full_textarea_inner textarea").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".full_textarea_inner textarea").css('background-color'));
        if($(this).find(".full_textarea_icon .common_icon_box span").length!=0){
            if($('.editFieldIcon .content_textbox span').length!==0){
               $('.editFieldIcon .content_textbox span').attr('class', $(this).find(".full_textarea_icon .common_icon_box span").prop('class'));
            } else {
               $('.editFieldIcon .content_textbox img').replaceWith('<span class="form_icon_select"></span>');
               $('.editFieldIcon .content_textbox span').addClass($(this).find(".full_textarea_icon .common_icon_box span").prop('class'));
            }
        }
        
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// full selectbox widget click
    function fullSelectboxClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editHintText").show();
        $(".editRequired").show();
        $(".editDropdownList").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editHintText .content_textbox input:text").val($(this).find(".full_selectbox_inner select option:eq(0)").text());
        if($(this).find(".full_selectbox_inner select").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".full_selectbox_inner select").css('background-color'));
        if($(this).find(".full_selectbox_inner select option").length>1){
            var optionLength = $(this).find(".full_selectbox_inner select option").length-1;
            var i;
            $('.dropdownList_box').show();
            $('.dropdownList_box').empty();
            for(i=1;i<=optionLength;i++){
                var optionText = $(this).find(".full_selectbox_inner select option").eq(i).text();
                $('.dropdownList_box').append('<p data-index="'+i+'">'+optionText+'<span class="removeSelectList">&times;</span></p>');
            }
        } else {
            $('.dropdownList_box').empty();
            $('.dropdownList_box').hide();
        }
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// label left selectbox widget click
    function labelLeftSelectboxClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editLabel").show();
        $(".editRequired").show();
        $(".editDropdownList").show();
        $(".editFieldBg").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find(".select_label_left label.common_input_label").text());
        if($(this).find(".selectbox_right select").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
        $('.editFieldBg .content_textbox .colorselect_box').css('background-color',$(this).find(".selectbox_right select").css('background-color'));
        if($(this).find(".selectbox_right select option").length>1){
            var optionLength = $(this).find(".selectbox_right select option").length-1;
            var i;
            $('.dropdownList_box').show();
            $('.dropdownList_box').empty();
            for(i=1;i<=optionLength;i++){
                var optionText = $(this).find(".selectbox_right select option").eq(i).text();
                $('.dropdownList_box').append('<p data-index="'+i+'">'+optionText+'<span class="removeSelectList">&times;</span></p>');
            }
        } else {
            $('.dropdownList_box').empty();
            $('.dropdownList_box').hide();
        }
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// radio box widget click
    // var radioListIndex;
    function radioInputBoxClick(e) {
        // console.log(e.currentTarget);
        // console.log(e.target);
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editRadioList").show();
        $(this).attr("id", "present");
        
        var radioList = $(this).find('.radio_input_box_inner').length-1;
        $('.editRadioList .content_textbox .checkboxListInner').remove();
        for(i=0;i<=radioList;i++){
            var currentDataIndex = $('.mobile .radio_input_box .radio_input_box_inner').eq(i).attr('data-index');
            $('.editRadioList .content_textbox').append('<div class="checkboxListInner clear" data-index="'+currentDataIndex+'"><input type="text" placeholder="Enter text" class="dropdownList" maxLength="10"><a href="#" class="dropdownList_delete">Delete</a></div>');
            $('.editRadioList .content_textbox .checkboxListInner:last input:text').val($('.radio_input_box_inner').eq(i).find('.radio_label_right label.common_input_label').text());
        }
        $('.editRadioList .content_textbox .checkboxListInner:first').find('a.dropdownList_delete').remove();
        $('.editRadioList .content_textbox .checkboxListInner').eq(1).find('a.dropdownList_delete').remove();
        
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// check box widget click
    function checkInputBoxClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".editCheckboxList").show();
    $(".editRequired").show();
        $(".form_edit_panel").show();
        $(this).attr("id", "present");
    if (!$(this).attr('group-name')) {
      $('#content-1 > .check_input_box').each(function (i, elem) {
        $(elem).attr('group-name', 'checkbox' + i);
      });
    }
    if ($(this).attr('required')) {
      $('.editRequired .content_textbox input:checkbox').prop('checked', 'checked');
    } else {
      $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
    }
        var checkboxList = $(this).find('.check_input_box_inner').length-1;
        $('.editCheckboxList .content_textbox .checkboxListInner').remove();
        for(i=0;i<=checkboxList;i++){
            var currentDataIndex = $('.mobile .check_input_box .check_input_box_inner').eq(i).attr('data-index');
            $('.editCheckboxList .content_textbox').append('<div class="checkboxListInner clear" data-index="'+currentDataIndex+'"><input type="text" placeholder="Enter text" class="dropdownList" maxLength="10"><a href="#" class="dropdownList_delete">Delete</a></div>');
            $('.editCheckboxList .content_textbox .checkboxListInner:last input:text').val($('.check_input_box_inner').eq(i).find('.check_label_right label.common_input_label').text());
        }
        $('.editCheckboxList .content_textbox .checkboxListInner:first').find('a.dropdownList_delete').remove();
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// full description widget click
    function fullDescriptionClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editDescription").show();
        $('.nicEdit-panelContain').parent().width('100%');
        $('.nicEdit-panelContain').parent().next().width('100%');
        $('.nicEdit-main').width('100%');
		$("div.nicEdit-main").addClass('wordwrap');
        $(this).attr("id", "present");
        $('.editDescription .content_textbox').find('.nicEdit-main').html($(this).find('.full_description_inner .common_description').html());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// full label widget click
    function fullLabelClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editLabel").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find("label.common_input_label").text());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// full button widget click
    function fullButtonClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editButton").show();
        $(this).attr("id", "present");
        $('.editButton .content_textbox input:text').val($(this).find('input:submit').val());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// tab button widget click
    function labelLeftTabbtnClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".editLabel").show();
        $(".form_edit_panel").show();
        $(".editLeftButton").show();
        $(".editRightButton").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find(".tabbtn_label_left label.common_input_label").text());
        $('.editLeftButton .content_textbox input:text').val($(this).find('.tabbtn_right ul li:first a').text());
        $('.editRightButton .content_textbox input:text').val($(this).find('.tabbtn_right ul li:last a').text());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// switch button widget click
    function labelLeftSwitchBtnClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editLabel").show();
        $(this).attr("id", "present");
        $(".editLabel .content_textbox input:text").val($(this).find(".switch_label_left label.common_input_label").text());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// date widget click
    function fullTextboxDateClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
//        $(".editDate").show();
        $(".editHintText").show();
        $(".editDateFormat").show();
        $(".editRequired").show();
        $(this).attr("id", "present");
        $(".editHintText .content_textbox input:text").val($(this).find(".full_textbox_inner input[type='date']").attr('placeholder'));
        $(".editDateFormat .content_textbox select.content_textbox_select").val($(this).find(".full_textbox_inner input[type='date']").attr('data-dateformat'));
        if($(this).find(".full_textbox_inner input[type='date']").prop('required')){
            $('.editRequired .content_textbox input:checkbox').prop('checked','checked');
        } else {
            $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
        }
//        $('.editDate .content_textbox input:text').val($(this).find('.full_textbox_inner input:text').val());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

// time widget click
    function fullTextboxTimeClick() {
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".form_edit_panel").show();
        $(".editTime").show();
        $(this).attr("id", "present");
        $('.editTime .content_textbox select.content_textbox_select').val($('.full_textbox_time .full_textbox_inner input:text').val());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
    }
  }

  // attachment box click
  function fullAttachmentBoxClick() {
    commonClick();
    $(".mid_right_box.change_properties").removeClass("change_properties");
    $(".form_edit_panel").show();
    $(".editAttachmentType").show();
    $(".editRequired").show();
    $(".editLabel").show();
    $(this).attr("id", "present");
    $(".editLabel .content_textbox input:text").val($(this).find("label.common_input_label").text());
    var selectedVal = $(this).attr('data-filetype');
    if (selectedVal) {
      $('.editAttachmentType .content_textbox input:radio[value="' + selectedVal + '"]').prop('checked', true);
    } else {
      $('.editAttachmentType .content_textbox input:radio').prop('checked', false);
    }
    if ($(this).attr('required')) {
      $('.editRequired .content_textbox input:checkbox').prop('checked', 'checked');
    } else {
      $('.editRequired .content_textbox input:checkbox').removeAttr('checked');
    }
    $("#content-2").mCustomScrollbar('stop').mCustomScrollbar('scrollTo', $('.mid_right_box').last());
    }

	
    $(".enter_phone").keypress(function (event) {
        $("#present a.your_phone img").attr("data-linkPhone", $(this).val());
        if (event.which != 8 && isNaN(String.fromCharCode(event.which))) {
            event.preventDefault();
        }
        if (event.which == 32) {
            event.preventDefault();
        }
        if ($(this).val().length > 15 && event.which != 8) {
            event.preventDefault();
        }
    });
    $(".enter_phone").keyup(function (event) {
        $("#present a.your_phone img").attr("data-linkPhone", $(this).val());

    });

    $(".feedbackEmail").keyup(function () {

        $(".mobile .feedback").attr("data-email", $(this).val());
    });
    $(".contactusEmail").keyup(function () {

        $(".mobile .contact-us").attr("data-email", $(this).val());
    });
    $(".contactusNo").keyup(function () {

        $(".mobile .contact-us").attr("data-contactNo", $(this).val());
    });
    $(document).on("keypress", ".phoneNumberEdit input[type=text]", limitPhoneNumber)
    function limitPhoneNumber(event) {
        $("#present").attr("data-linkPhone", $(this).val());
        if (event.which != 8 && isNaN(String.fromCharCode(event.which))) {
            event.preventDefault();
        }
        if (event.which == 32) {
            event.preventDefault();
        }
        if ($(this).val().length > 15 && event.which != 8) {
            event.preventDefault();
        }
    }


    $(".phoneNumberEdit input[type=text]").keyup(function (event) {
        $("#present").attr("data-linkPhone", $(this).val());


    });

    function contactImgWidgetClick() {


        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".contactImgEdit").show();
        $(".contactImgSmallWidget").show();
        $(".contactImgSmallWidget .contact_img_heading").val($(this).find(".contact_img_heading").text());
        $(".contactImgSmallWidget .contact_img_subheading").val($(this).find(".contact_img_subheading").text());
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(this).attr("id", "present");
        if ($("#present").hasClass("call_mail"))
        {
            $(".contactSmallWidgetPhoneEmail").show();
            $(".contactSmallWidgetPhoneEmail").find(".enter_phone").val($("#present .contact_btns .your_phone img").attr("data-linkphone"));
            $(".contactSmallWidgetPhoneEmail").find(".enter_email").val($("#present .contact_btns .your_mail img").attr("data-linkemail"));
        }
        $(".editPicker22").css("background-color", $("#present p.contact_img_heading").css("color"));
        $(".editPicker23").css("background-color", $("#present p.contact_img_subheading").css("color"));
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };

    }

    $(".contact_img_heading").on('input propertychange', function (e) {
        $("#present .contact_img_heading").text($(this).val());
    });
    $(".contact_img_heading").on('keyup', function (e) {
        $("#present .contact_img_heading").text($(this).val());
    });
    $(".contact_img_subheading").on('input propertychange', function (e) {
        $("#present .contact_img_subheading").text($(this).val());
    });
    $(".contact_img_subheading").on('keyup', function (e) {
        $("#present .contact_img_subheading").text($(this).val());
    });

//Small Widget Click
    function smallWidgetClick(event) {
        event.preventDefault();
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".smallWidget").show();
        $(".socialFeedInput,.socialFeedLabel").hide();
        $(".smallWidget .content_label label:first").text("Enter URL");
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(".apiUrl").val($(this).find("a").attr("href"));
        $(".socialFeedInput").val($(this).find("a").attr("data-uniqueId"));
        $(this).attr("id", "present");
        if (  $("#present a").find("p").text()==" Go to  Website.")
        {
           $(".design_menu_box.smallWidget em").text("Enter the link of the website you want to direct your customers to. For e.g. if you wish your customers to check your website enter the link http://www.yourwebsite.com.")
          
        }
        else{
            $(".design_menu_box.smallWidget em").text("Enter the link of the website you want to direct  your customers to. For e.g. if you wish your customers to review your business on Zomato, enter the link of the Zomato review form for your business here.")
        }
        if ($("#present a").find("p").text() == "Twitter")
        {
            $(".smallWidget .content_label label:first").html("Enter Twitter Handle :");
        }
        if ($("#present a").find("p").text() == "Facebook")
        {
            $(".smallWidget .content_label label:first").html("Enter Facebook URL :");
        }
        if ($("#present").hasClass("social_feed")) {

            if ($("#present a img").attr("src").indexOf("Twitter") != "-1") {

                $(".smallWidget .content_label label:first").html("Enter Twitter Handle :");
            }

            if ($("#present a img").attr("src").indexOf("Facebook") != "-1") {

                $(".smallWidget .content_label label:first").html("Enter Facebook Page URL :");
            }

           

        }
         if ($('#present').hasClass('custom_widget')) {
            
//             console.log('test');
            $(".smallWidget").show();
            $(".content_textbox_edit").show();
            $(".widgetEdit").show();
            $(".widgetEdit .mapwidgetEdit").show();
            $(".content_textbox_edit").val($("#present").find('.small_widget_edit_text p').text());
            $(".content_textbox_edit").show()
            $(".editbrowse").attr("src", $("#present .small_widget_img img").attr("src"));
//            $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));
//          $(".content_font").val($("#present a p").css("font-family").replace(/'/g, ""));
//          $(".content_fontsize").val($("#present a p").css("font-size").replace("px", ""));

            $(".subHeadingOption").show();
               /* 7-7-16 start*/
      $(".editPicker").css("background-color", $("#present").find(".small_widget_edit_text p").css("color"));
      var customWidgetValue = $("#present a p").css("font-family");
          customWidgetValue = customWidgetValue.replace(/\"/g, "");
      $(".mapwidgetEdit .content_font option").each(function (){
        var customWidgetFont = $(this).val();
        if(customWidgetFont == customWidgetValue){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
      
      $(".editPicker").show();
      $(".content_font").show();
      $(".content_fontsize").hide();
      /* 7-7-16 start*/
    } else {
            $(".subHeadingOption").hide(); 
        }
/* all 33 components custome updated 31-5-16 start*/
        if ($('#present').hasClass('custom_widget2')) {
            $(".smallWidget").show();
            $(".socialwidgetEdit").show();
            $(".content_textbox_edit").show();
            $(".content_textbox_edit").val($("#present").find('.small_widget_text p').text());
            $(".subHeading3").val($("#present").find('.small_widget_text h2').text());
            $(".content_textbox_edit").show()
            $(".subHeadingOption").show();
            $(".editPicker15").hide();
            $(".content_font14").hide();
            $(".content_fontsize14").hide();
            $(".editPicker").hide();
            $(".content_font").hide();
            $(".content_fontsize").hide();
             
           
       }
      else{
          $(".subHeadingOption").hide();
          $(".socialwidgetEdit").hide();
 
      }
          
/* all 33 components custome updated 31-5-16 end*/

        
        

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };
    }

	
//Full item widget Click
    function fullItemWidgetClick() {


        commonClick();

        $(".contactWidget").show();
        $(".fullItemEdit").show();
        $(".widgetLinkEdit").show();

        $(this).attr("id", "present");
        
        if($("#present").hasClass("header_descrip")) {
            $('.contactWidget .content_textbox.headline input.heading.header_descrip, .contactWidget .content_textbox.headline input.subHeading2.header_descrip, .contactWidget .content_textbox.headline em.header_descrip').show();
            $('.contactWidget .content_textbox.headline input.heading:not(.header_descrip), .contactWidget .content_textbox.headline em:not(.header_descrip), .contactWidget .content_label.optional_text, .contactWidget .content_textbox.optional_text').hide();
            $('.contactWidget .content_textbox.headline input.subHeading2:not(.header_descrip)').hide();
      /*27-6-16 start*/
    var itemFullValue3 = $("#present.header_descrip .item_full_widget_right > p.item_heading").css("font-family");
        itemFullValue3 = itemFullValue3.replace(/\"/g, "");
      $(".contactWidget .content_font7 option").each(function (){
        var itemFullFont3 = $(this).val();
        if(itemFullFont3 == itemFullValue3){
          $(this).prop("selected", true);
        }
        else {
            $(this).prop("selected", false);
        }
      });
    var itemFullValue4 = $("#present.header_descrip .item_full_widget_right > p.item_disc").css("font-family");
        itemFullValue4 = itemFullValue4.replace(/\"/g, "");
      $(".contactWidget .content_font9 option").each(function (){
        var itemFullFont4 = $(this).val();
        if(itemFullFont4 == itemFullValue4){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
    /*27-6-16 end*/
    } else {
            $('.contactWidget .content_textbox.headline input.heading.header_descrip, .contactWidget .content_textbox.headline input.subHeading2.header_descrip, .contactWidget .content_textbox.headline em.header_descrip').hide();
            $('.contactWidget .content_textbox.headline input.heading:not(.header_descrip), .contactWidget .content_textbox.headline em:not(.header_descrip), .contactWidget .content_label.optional_text, .contactWidget .content_textbox.optional_text').show();
            $('.contactWidget .content_textbox.headline input.subHeading2:not(.header_descrip)').show();
        }

        $(".mid_right_box.change_properties").removeClass("change_properties");

        $(".contactWidget .heading").val($(this).find(".item_heading").text());
        $(".contactWidget .subHeading1").val($(this).find(".item_content").text());
        $(".contactWidget .subHeading2").val($(this).find(".item_disc").text());
        $(".screen_name").val($("#pageSelector option:selected").text());

        $(".editPicker8").css("background-color", $("#present p.item_heading").css("color"));
        $(".editPicker9").css("background-color", $("#present p.item_content").css("color"));
   // $(".content_font7").val($("#present p.item_heading").css("font-family").replace(/'/g, ""));
    /*27-6-16 start*/
    var itemFullValue = $("#present .item_full_widget_right > p.item_heading").css("font-family");
        itemFullValue = itemFullValue.replace(/\"/g, "");
      $(".contactWidget .content_font7 option").each(function (){
        var itemFullFont = $(this).val();
        if(itemFullFont == itemFullValue){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
    var itemFullValue1 = $("#present .item_full_widget_right > p.item_content").css("font-family");
        itemFullValue1 = itemFullValue1.replace(/\"/g, "");
      $(".contactWidget .content_font8 option").each(function (){
        var itemFullFont1 = $(this).val();
        if(itemFullFont1 == itemFullValue1){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
    var itemFullValue2 = $("#present .item_full_widget_right > p.item_disc").css("font-family");
        itemFullValue2 = itemFullValue2.replace(/\"/g, "");
      $(".contactWidget .content_font9 option").each(function (){
        var itemFullFont2 = $(this).val();
        if(itemFullFont2 == itemFullValue2){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
    /*27-6-16 end*/
    
        $(".editPicker10").css("background-color", $("#present p.item_disc").css("color"));
        //$(".contactPicker").css("background-color", $("#present").css("background"));
        $(".contactPicker").css("background-color", $("#present").css("background-color"));
        if ($("#present p.item_content").css("font-family")) {
      //$(".content_font8").val($("#present p.item_content").css("font-family").replace(/'/g, ""));
        }
    //$(".content_font9").val($("#present p.item_disc").css("font-family").replace(/'/g, ""));
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };


    }


//big widget widget Click
    function bigWidgetClick() {

        commonClick();

        $(".bigWidgetEdit").show();
        $(".videoEdit").hide();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".big_widget_head").val($(this).find(".img_heading").text());
        $(this).attr("id", "present");
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));
    $(".editPicker").css("background-color", $("#present p.img_heading").css("color"));
        $(".screen_name").val($("#pageSelector option:selected").text());
    //$(".content_font").val($("#present p:not('.widgetClose')").css("font-family").replace(/'/g, ""));
       /*27-6-16 start*/
    var bigWidgetValue2 = $("#present").find("p.img_heading").css("font-family");
        bigWidgetValue2 = bigWidgetValue2.replace(/\"/g, "");
        $(".bigWidgetEdit .content_font option").each(function (){
          var bigFontValue2 = $(this).val();
          if(bigFontValue2 == bigWidgetValue2){
          $(this).prop("selected", true);
          }
          else{
          $(this).prop("selected", false);
          }
        });

    /*27-6-16 end*/
        $(".content_fontsize").val($("#present .big_widget_img_text p").css("font-size").replace("px", ""));

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };


    }


    $(".big_widget_head").on('input propertychange', function (e) {
        $("#present .img_heading").text($(this).val());
    });
    $(".big_widget_head").on('keyup', function (e) {
        $("#present .img_heading").text($(this).val());
    });
//big widget text widget Click
    function bigWidgetTextClick() {

        $(".bigWidgetTextbrowse").attr("src", "images/browse_full_img.jpg");

        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");


        $(".big_text_head1").val($(this).find(".img_heading").text());
        $(".big_text_head2").val($(this).find(".text_heading").text());
        $(".big_text_head3").val($(this).find(".text_subheading").text());
        $(".big_text_head4").val($(this).find(".text_content").text());
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(this).attr("id", "present");
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));
        $(".content_font1").val($("#present p.img_heading").css("font-family").replace(/'/g, ""));
        $(".content_font3").val($("#present p.text_heading").css("font-family").replace(/'/g, ""));
        $(".content_font4").val($("#present p.text_subheading").css("font-family").replace(/'/g, ""));
        $(".content_font5").val($("#present p.text_content").css("font-family").replace(/'/g, ""));
        $(".content_fontsize1").val($("#present p.img_heading").css("font-size").replace("px", ""));
        $(".content_fontsize3").val($("#present p.text_heading").css("font-size").replace("px", ""));
        $(".content_fontsize4").val($("#present p.text_subheading").css("font-size").replace("px", ""));
        $(".content_fontsize5").val($("#present p.text_content").css("font-size").replace("px", ""));




        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };


    }

    $(".big_text_head1").on('input propertychange', function (e) {
        $("#present .img_heading").text($(this).val());
    });
    $(".big_text_head1").on('keyup', function (e) {
        $("#present .img_heading").text($(this).val());
    });
    $(".big_text_head2").on('input propertychange', function (e) {
        $("#present .text_heading").text($(this).val());
    });
    $(".big_text_head2").on('keyup', function (e) {
        $("#present .text_heading").text($(this).val());
    });
    $(".big_text_head3").on('input propertychange', function (e) {
        $("#present .text_subheading").text($(this).val());
    });
    $(".big_text_head3").on('keyup', function (e) {
        $("#present .text_subheading").text($(this).val());
    });
    $(".big_text_head4").on('input propertychange', function (e) {
        $("#present .text_content").text($(this).val());
    });
    $(".big_text_head4").on('keyup', function (e) {
        $("#present .text_content").text($(this).val());
    });
    $(".big_text_head5").on('input propertychange', function (e) {
        $("#present .about").text($(this).val());
    });
   
   
    $(".big_text_head6").on('keyup', function (e) {
        $("#present .long_text_subheading").text($(this).val());
    });
   
    $(".big_text_head7").on('keyup', function (e) {
        $("#present .long_text_content").html($(this).val().replace(/\n/g, '<br />'));
        if (event.which == 13) {
            $("#present .long_text_content").html($(this).val().replace(/\n/g, '<br />'));
        }

        globalRestart();
    });


//big widget about text widget Click
    function bigWidgetAboutClick() {

        $(".bigWidgetAboutbrowse").attr("src", "images/browse_full_img.jpg");
        commonClick();
        $(".bigWidgetAboutEdit").show();
        $(".mid_right_box.change_properties").removeClass("change_properties");


        $(".big_text_head1").val($(this).find(".img_heading").text());
        $(".big_text_head5").val($(this).find(".about").text());

        $(this).attr("id", "present");
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));

        $(".editPicker1").css("background-color", $("#present p.img_heading").css("color"));
        $(".editPicker5").css("background-color", $("#present p.about").css("color"));
   //$(".content_font1").val($("#present p.img_heading").css("font-family").replace(/'/g, ""));
    /*27-6-16 start*/
    var bigWidgetValue = $("#present").find("p.img_heading").css("font-family");
        bigWidgetValue = bigWidgetValue.replace(/\"/g, "");
    $(".bigWidgetAboutEdit .content_font1 option").each(function (){
      var bigFontValue = $(this).val();
      if(bigFontValue == bigWidgetValue){
        $(this).prop("selected", true);
      }
      else{
          $(this).prop("selected", false);
      }
    });
    var bigBottomValue = $("#present").find("p.about").css("font-family");
        bigBottomValue = bigBottomValue.replace(/\"/g, "");
    $(".bigWidgetAboutEdit .content_font6 option").each(function (){
      var bigBottomFont = $(this).val();
      if(bigBottomFont == bigBottomValue){
        $(this).prop("slected", true);
      }
      else{
          $(this).prop("slected", false);
      }
    });
    //$(".content_font6").val($("#present p.about").css("font-family").replace(/'/g, ""));
    /*27-6-16 end*/
        $(".content_fontsize1").val($("#present p.img_heading").css("font-size").replace("px", ""));
        $(".content_fontsize6").val($("#present p.about").css("font-size").replace("px", ""));

        $(".screen_name").val($("#pageSelector option:selected").text());

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };


    }

    function fullWidgetLongClick() {

        $(".fullLongWidgetbrowse").attr("src", "images/browse_full_img.jpg");
        commonClick();

    $(this).attr("id", "present");

        $(".fullWidgetLongText").show();
        $(".widgetLinkEdit").show();
		$(".social_sharing").show();

    $('.nicEdit-panelContain').parent().width('100%');
    $('.nicEdit-panelContain').parent().next().width('100%');
    $('.nicEdit-main').width('100%');
    $(".fullWidgetLongText .big_text_head7").prev('div').find('.nicEdit-main').html($("#present > .full_widget_text > .long_text_content").html());
    $("div.nicEdit-main").addClass('wordwrap');
        
        $(".mid_right_box.change_properties").removeClass("change_properties");

        $(this).attr("id", "present");
        if($("#present").find(".icon-share").length!=0)
        {
            $("#socialshare").prop("checked",true);
        }
        else{
            $("#socialshare").prop("checked",false);

        }
         $(".big_text_head1").val($("#present").find(".img_heading").text());
        
        $(".big_text_head6").val($("#present").find(".long_text_subheading").text());
        $(".big_text_head7").val($("#present").find(".long_text_content").text());

         $(".shared_text.notEdit").val($("#present").attr("data-shared-text"));
        $(".shared_link").val($("#present").attr("data-shared-link"));
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));

        $(".editPicker18").css("background-color", $("#present p.img_heading").css("color"));
        $(".editPicker19").css("background-color", $("#present div.long_text_subheading").css("color"));
        $(".editPicker20").css("background-color", $("#present div.long_text_content").css("color"));
        if ($("#present p.img_heading").css("font-family")) {
      //$(".content_font1").val($("#present p.img_heading").css("font-family").replace(/'/g, ""));
            $(".content_fontsize1").val($("#present p.img_heading").css("font-size").replace("px", ""));
        }
    /*27-6-16 start*/
      var longTextValue = $("#present p.img_heading").css("font-family");
        longTextValue = longTextValue.replace(/\"/g, "");
        $(".fullWidgetLongText .content_font1 option").each(function (){
        var longFontValue = $(this).val();
        if(longFontValue == longTextValue){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
      var longTextValue2 = $("#present .long_text_subheading").css("font-family");
        longTextValue2 = longTextValue2.replace(/\"/g, "");
        $(".fullWidgetLongText .content_font17 option").each(function (){
        var longFontValue2 = $(this).val();
        if(longFontValue2 == longTextValue2){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
      var longTextValue3 = $("#present .long_text_content").css("font-family");
        longTextValue3 = longTextValue3.replace(/\"/g, "");
        $(".fullWidgetLongText .content_font18 option").each(function (){
        var longFontValue3 = $(this).val();
        if(longFontValue3 == longTextValue3){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
 
    /*27-6-16 end*/
    //$(".content_font17").val($("#present div.long_text_subheading").css("font-family").replace(/'/g, ""));
    //$(".content_font18").val($("#present div.long_text_content").css("font-family").replace(/'/g, ""));
        $(".content_fontsize17").val($("#present div.long_text_subheading").css("font-size").replace("px", ""));
        $(".content_fontsize18").val($("#present div.long_text_content").css("font-size").replace("px", ""));


    // with-out-share 

 if($('#present').hasClass('with-out-share')){
        $('.design_menu_box.social_sharing').hide()
      }


        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };


    }


    var homepage = null;

    $(".confirm_delete_screen_button").on("click", function () {

    $('#screenoverlay').fadeIn();
        $(".popup_container").css("display", "none");
        $(".confirm_screen_delete").css("display", "none");

        setTimeout(function () {
            $('nav > ul').find("[data-link='" + $("#presentRow").parents(".menu_body_links").attr("data-ind") + "']").remove();
            var temp = $("#presentRow").parents(".menu_body_links").attr("data-ind");

            deleteHtml(temp);
            for (var k = temp; k <= storedPages.length; k++)
            {
                $('nav > ul').find('[data-link="' + k + '"]').attr("data-link", k - 1)
            }
            deleteScreen(temp);
            $(this).parents(".menu_body_links").remove();

            $(".save_hidden").trigger("click");
            $(".mid_right_box_head").eq(1).trigger("click");
            $("#presentRow").removeAttr("id");

      $('#screenoverlay').fadeOut();
        }, 0);

    });

    $(".add_page").hide();    

    $('.contentKeywords').keyup(function(){
        var currentKeyword = $(this).val();
        pageDetails[parseInt(selectedPageIndex) - 1].keyword = currentKeyword;
    });
    $(".add_page_hidden").click(function () {
        $("#screenoverlay").fadeIn();
       ;
        $(".add_page").show();
        $(".mid_right_box").removeClass("active");

        $(".add_page").find(".mid_right_box").addClass("active");
        $(".add_page").find(".mid_right_box_body").show();
        $(".mid_section_right > .mid_right_box > .mid_right_box_body").hide();

       

        var newindex = parseInt(pageDetails[pageDetails.length - 1].index) + 1;
        pageDetails.push({
            index: newindex,
            name: 'New Screen',
            icon: '',
            originalIndex: newindex+deletedScreenCount,
            keyword: ''
        });
        if($("#present").length!=0)
        {
        	 $("#present").attr("data-link", newindex);
        	$("#present").attr("data-originalIndex",newindex+deletedScreenCount)
        }
         $(".save_hidden").trigger("click");
          savehtml();
        setSelectedPageIndex(newindex);

     
      
        var $wrapper = $('.menu_links');
        $('.menu_body_links:last-child', $wrapper).clone(true).attr("data-ind", selectedPageIndex).appendTo($wrapper)
        $('.menu_body_links:last-child').find("li").eq(1).html("<img src='http://www.instappy.com/images/menu_img.jpg' alt='Image Not Found' class='icon_upload_img'><input type='file' class='icon_upload'>");
        updateSlideNames();
        $('.menu_body_links:last li:first .addToSlide').attr("checked", false);
        $('.menu_body_links:last li:first .addToSlide').removeAttr("disabled");
        populateLink();


      

        $("#pageSelector").val(newindex);
        $("#newPageTextEdit").val($("#pageSelector option:selected").text())
        $(".theme_head h1:first").text($("#pageSelector option:selected").text());

        conditionCheckForPageChange();

        //Removing the present Div Structure
        $(".container.droparea").empty();
        $(".banner").remove();
       
        storedPages[newindex - 1].layouttype = "2";
        $('[data-layout="2"]').trigger('click');
         if($(".container.droparea+.ad_widget").length==1)
                {
                    $(".container.droparea+.ad_widget").remove();
                    
                }

      
        globalRestart();

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $(".add_page"));
        };
        $(".screen_name").val($("#pageSelector option:selected").text());
        $("#screenoverlay").fadeOut();

    });
    
    


    $("#newPageTextEdit").on('input propertychange', function () {
        var temp = parseInt(selectedPageIndex) - 1;

        pageDetails[temp].name = $("#newPageTextEdit").val();
        $(".theme_head h1:first").text($("#newPageTextEdit").val());
        $("#pageSelector option:selected").text($("#newPageTextEdit").val());
        populateLink();
        updateSlideNames();
    });
    $("#newPageTextEdit").on('keyup', function () {
        var temp = parseInt(selectedPageIndex) - 1;

        pageDetails[temp].name = $("#newPageTextEdit").val();
        $(".theme_head h1:first").text($("#newPageTextEdit").val());
        $("#pageSelector option:selected").text($("#newPageTextEdit").val());
        populateLink();
        updateSlideNames();
    });
    $(document).on("click", ".viewScreen", viewScreen);
    function viewScreen()
    {
        conditionCheckForPageChange();
        var temp = $(this).parents(".menu_body_links").attr("data-ind");
        $("#pageSelector").val(temp).trigger("change")
        //$(".mid_right_box_head").eq(1).trigger("click");
        $(".container.droparea").find("div:first").trigger('click');
    }
    $(".addToSlide").change(function () {
        if ($(this).prop("checked") == true)
        {
            var currentNav = $(this).parents(".menu_body_links").attr("data-ind");
            $("<li data-link=" + $(this).parents(".menu_body_links").attr("data-ind") + " data-original-index=" + pageDetails[currentNav-1].originalIndex +"><a href='#'><span class='" + $(this).parent().next().children('span').prop('class') + "'></span><span>" + $(this).parent("li").siblings(".navText").find(".nav_item").val() + "</span><div class='clear'></div></a></li>").insertAfter("nav > ul li:nth-last-child(3)");
            $(this).parent().next().find("img").prop("class", "icon_upload_img");
        }
        if ($(this).prop("checked") == false)
        {
            $(this).parent().next().find("img").prop("class", "icon_upload_img1")
            $('nav > ul').find("[data-link='" + $(this).parents(".menu_body_links").attr("data-ind") + "']").remove();
        }
    });


    $(".linkSelector").change(function () {
        var temp = $(this).index(".linkSelector");
        var linkvalue = $(this).val();
        $("nav > ul > li").eq(temp).attr("data-link", linkvalue);
        //Links[$(this).index(".linkSelector")].to=$(this).val();
    });

    $(".widgetlinkSelector").change(function () {
        $("#present").attr("data-link", $(this).val());
         $("#present").attr("data-originalIndex",storedPages[$(this).val()-1].originalIndex);
        elistIndex = $('#present').index();
    if ((storedPages[selectedPageIndex - 1].layouttype) != 999) {
            var eventindex = $('#eventActive').attr('data-eventindex');
            if($('.festival-card ').attr('id','eventActive')){
                eventList[eventindex][elistIndex].epageindex = $(this).val();
            };
        } else {
            var eventindex = $('.item_full_widget_event:first').attr('data-indexcard');
            if(elistIndex<=eventList[eventindex].length-1){
                eventList[eventindex][elistIndex].epageindex = $(this).val();
            }
        }
    });

    function chooseLayout(event) {
        try {
            //$(document).off("click", ".droparea .tabbing_widget", tabbingWidgetClick);
            $('.half_widget_text a').css('color', $('.mobile .theme_head').css('background-color'));
            $(this).attr("id", "presentLayout");
            $("#screenoverlay").fadeIn();

            $(".container.droparea").empty();
            var tempIndex = parseInt($("#presentLayout").attr("data-layout"));


            var layoutType = $("#presentLayout").data("layout");

            if (layoutType == "1")
            {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).show();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout1").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
            }
            if (layoutType == "2") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout2").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "8") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout8").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "11") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout11").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "12") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout12").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "7") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout7").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "6") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout6").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }

            if (layoutType == "3") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout3").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
            }
            if (layoutType == "9") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout9").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
            }
            if (layoutType == "10") {
                $(".mid_right_box.hidden_box").hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout10").show();
                $(".mid_right_box_body").find(".utility_api_cards").hide();
            }
			if(layoutType=="4")
			{
				$(".mid_right_box.hidden_box").hide();
				$(".utility_api_cards .utility_api_content:first > div").hide();
				$(".utility_api_cards .utility_api_content .layout10").show();
				$(".mid_right_box_body").find(".utility_api_cards").hide();
			}
            if (layoutType == "5") {
                $(".mid_right_box.hidden_box").hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout10").show();
                $(".mid_right_box_body").find(".utility_api_cards").hide();
            }
			 if (layoutType == "21") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout21").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            for (var i = 0; i < storedLayouts.length; i++)
            {
                if (storedLayouts[i].index == tempIndex)
                {
                    tempIndex = i;
                    break;
                }
            }
            $(".banner").remove();
            var noofPages = storedPages.length - 1;
            storedPages[noofPages].layouttype = layoutType;
            if (storedLayouts[tempIndex].banner != undefined) {

                $("<div class='banner'>" + storedLayouts[tempIndex].banner + "</div>").insertAfter(".overlay");
            }
            $(".container.droparea").html(storedLayouts[tempIndex].layout);
            //$(document).on("click", ".mid_right_box_head", showNext);
            // $(document).on("click", ".mid_right_box_head", showNext);
            //restartShapeShift();
            // $(document).on("click", ".droparea .tabbing_widget", tabbingWidgetClick);
			if (layoutType == "10" || layoutType=="5") {
            	startShapeShift();
			} else {
				globalRestart();
			}
             $("[class*='widget'] span[class^='icon'], .contact_card span[class^='icon']").css("color", $(".mobile .theme_head").css("background-color"));
            $("#screenoverlay").fadeOut();
            $("#presentLayout").removeAttr("id");
            $('.half_widget_text a').css('color', $('.mobile .theme_head').css('background-color'));
        }
        catch (err)
        {
            console.log(err.message)
        }
    }


    function conditionCheckForPageChange() {
        try {
            //if the page is already stored or not
            if (selectedPageIndex > storedPages.length)
            {
                //get the present app page HTML
               presentContent = $(".container.droparea").html();
               presentBanner = $(".banner").html();

                //store the present into the page array
                var pageNo = parseInt(storedPages.length) + 1;
                storedPages.push({
                    index: selectedPageIndex,
                    contentarea: presentContent,
                    banner: presentBanner,
                    layouttype: '',
                    originalIndex: (selectedPageIndex + deletedScreenCount),

                });
              
                var oindex=selectedPageIndex + deletedScreenCount;
              

            }
            else
            {
                editedContent = $(".container.droparea").html();
                editedBanner = $(".banner").html();

                //store the present into the page array
                if (selectedPageIndex == "s1" || selectedPageIndex == "s2")
                {

                }
                else
                {

                    var currentArrayIndex = parseInt(selectedPageIndex) - 1;
                    storedPages[currentArrayIndex].contentarea = editedContent;
                    storedPages[currentArrayIndex].banner = editedBanner;

                }

            }
        }
        catch (err)
        {
            console.log(err.message)
        }

    }

    $("nav ul .feedback").hide();

    $(".feedbackReq").click(function () {
        if ($(this).prop("checked") == true) {
            $("nav ul .feedback").show();
            $("nav ul .feedback").find("img").remove();
            $("nav ul .feedback").find("span:first").attr("class", "icon-feedback");
            $("[class*='widget'] span[class^='icon'], .contact_card span[class^='icon']").css("color", $(".mobile .theme_head").css("background-color"));

        }
        else if ($(this).prop("checked") == false) {

            $("nav ul .feedback").hide();

        }

    });

    $(".contactReq").click(function () {
        if ($(this).prop("checked") == true) {
            $(".mobile nav ul .unsortable:first").before('<li data-link="s3" class="contact-us unsortable" style="display: list-item;"><a href="#" style="cursor: n-resize;"><span class="icon-phone-handset"></span><span>Contact Us</span><div class="clear"></div></a></li>')
        }
        else if ($(this).prop("checked") == false) {

            $("nav ul .contact-us").remove();

        }

    });    

    function pageSelectorChange() {
        try
        {
            $('#screenoverlay').fadeIn();
            $(".save_hidden").trigger('click');
            savehtml();
            //conditionCheckForPageChange();
            $(".container.droparea").empty();
            $(".banner").remove();
            var temp = parseInt(this.value) - 1;
            var layoutType = storedPages[temp].layouttype;
            if (layoutType == "1")
            {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).show();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout1").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
            }
            if (layoutType == "2") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout2").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "8") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout8").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "11") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout11").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "12") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout12").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "7") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout7").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
            if (layoutType == "6") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout6").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }

            if (layoutType == "3") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout3").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
            }
            if (layoutType == "9") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout9").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
            }
            if (layoutType == "10") {
                $(".mid_right_box.hidden_box").hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout10").show();
                $(".mid_right_box_body").find(".utility_api_cards").hide();
            }
			if(layoutType=="4")
			{
				$(".mid_right_box.hidden_box").hide();
				$(".utility_api_cards .utility_api_content:first > div").hide();
				$(".utility_api_cards .utility_api_content .layout10").show();
				$(".mid_right_box_body").find(".utility_api_cards").hide();
			}
             if (layoutType == "14") {
                $(".mid_right_box.hidden_box").hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                //$(".utility_api_cards .utility_api_content .layout10").show();
                $(".mid_right_box_body").find(".utility_api_cards").hide();
            }
			 if (layoutType == "21") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout21").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }
		    if (layoutType == "999") {
                $(".mid_right_box.hidden_box").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(1).hide();
                $(".utility_api_cards .utility_api_content:first > div").hide();
                $(".utility_api_cards .utility_api_content .layout12").show();
                $(".mid_right_box_body").find(".utility_api_cards").eq(2).hide();
                $(".mid_right_box_body").find(".utility_api_cards").eq(3).hide();
            }

            if (storedPages[temp].banner == undefined || storedPages[temp].banner == "")
            {
                $(".container.droparea").html(storedPages[temp].contentarea);
            }
            else
            {
                $(".container.droparea").html(storedPages[temp].contentarea);
                $("<div class='banner'>" + storedPages[temp].banner + "</div>").insertAfter(".overlay");
            }
			
            //restartShapeShift();
			if (layoutType == "10" || layoutType=="5") {
            	startShapeShift();
			} else {
				globalRestart();
			}            
            if(temp==0){
                if($(".mobile .ad_widget").length==1)
                {
                    $(".mobile .ad_widget").remove();
                    $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")
                }
                else{
                    if($(".container.droparea .ad_widget").length==0){
                            $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")

                    }
                }
                if (layoutType == "10") {
                        startShapeShift();
                    } else {
                        globalRestart();
                    }    
            }
            else{
                if($(".container.droparea+.ad_widget").length==1)
                {
                    $(".container.droparea+.ad_widget").remove();
                    
                }
            }
			$("#present").removeAttr('id');
            $("#presentBanner").removeAttr("id");
            $(".mid_right_box_head").parent().removeClass("active");
            $(".mid_right_box_body").hide();
            $(".mid_right_box").last().find(".mid_right_box_body").children("div").hide();
            $(".mid_right_box_head i").removeClass("fa-rotate-180");
            setSelectedPageIndex(this.value);
            $(".screen_name").val(pageDetails[this.value - 1].name);
            $(".theme_head h1:first").text(pageDetails[selectedPageIndex - 1].name);
            $("#newPageTextEdit").val($("#pageSelector option:selected").text())
            $("[class*='widget'] span[class^='icon'], .contact_card span[class^='icon']").css("color", $(".mobile .theme_head").css("background-color"));
            $(".widgetClose").removeClass("disabled");
            $('#screenoverlay').fadeOut();
            $('.contentKeywords').val(pageDetails[parseInt(selectedPageIndex) - 1].keyword);
            if($('.tabbing_widget_head ul.tabs li a').length !=0){
				$('.tabbing_widget_head ul.tabs li').each(function(){
					$('<span></span>').insertAfter($(this).children('a'));
					$(this).children('span').html($(this).children('a').html());
					$(this).children('a').remove();
				});
			}
        }
        catch (err)
        {
            console.log(err.message)
        }

    }
    $(".screen_name").val(pageDetails[0].name);

    $(".screen_name").on('input propertychange', function () {
        pageDetails[selectedPageIndex - 1].name = $(this).val();
        populateLink();
        updateSlideNames();
        $("#newPageTextEdit").val(pageDetails[selectedPageIndex - 1].name)
        $(".theme_head h1:first").text(pageDetails[selectedPageIndex - 1].name);
    });
    $(".screen_name").on('keyup', function () {
        pageDetails[selectedPageIndex - 1].name = $(this).val();
        populateLink();
        updateSlideNames();
        $("#newPageTextEdit").val(pageDetails[selectedPageIndex - 1].name);
        $(".theme_head h1:first").text(pageDetails[selectedPageIndex - 1].name);
    });
    // For Editing of the widget 

    function widgetClick() {	
        $(".editPicker").css("background-color", $(".mobile .theme_head").css("background-color"));
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", "images/browse_full_img.jpg");
        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".widgetEdit").show();
        $(".widgetEdit .mapwidgetEdit").show();
        $(".widgetLinkEdit").show();
        $(".videoEdit").show();
        $(".content_font").show();
        $(".editPicker").show();
		$('.mainCategory').empty();
		removeEstoreHtml();
        $(".video_url").val($(this).attr("data-videolink"));
        $(".addPage.Widget").show();
        var previousLink = $(this).attr("data-link");
        if (previousLink != undefined)
        {
            $(".widgetlinkSelector").val(previousLink);
        }
        else
        {
            $(".widgetlinkSelector").val("1");
        }
        var txt = $(this).find('[class$="_widget_text"]').children("p").text();
        $(".content_textbox_edit").val(txt);
        $(".video_url").val($(this).attr("data-videolink"));
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(this).attr("id", "present")
        $(".half-bg-change").show();
        $(".editPicker24").css("background-color", $("#present .half_widget_text").css("background-color"));
        $(".full-bg-change").show();
        $(".editPicker25").css("background-color", $("#present .full_widget_text").css("background-color"));
        
       

        /* Change text option 23-5-16 start*/
        if ($('#present').hasClass('change_text_option')) {
       $(".compoNent58").show();
       $(".widgetEdit.mapwidgetEdit").hide();
           $(".content_textbox_edit").val($("#present").find('.change_text_area h2').text());
           $(".subHeading3").val($("#present").find('.change_text_area p').text());
    //$(".content_font").val($("#present .change_text_area > h2").css('font-family').replace(/'/g, ""));
    //$(".content_font14").val($("#present .change_text_area > p").css('font-family').replace(/'/g, ""));
           $(".content_fontsize").val($("#present .change_text_area > h2").css("font-size").replace("px", ""));
           $(".content_fontsize14").val($("#present .change_text_area > p").css("font-size").replace("px", ""));
           $(".editPicker").css("background-color", $("#present .change_text_area > h2").css("color"));
           $(".editPicker15").css("background-color", $("#present .change_text_area > p").css("color"));
           $(".half-bg-change").hide();
           $(".full-bg-change").hide();
           $(".subHeadingOption").show();
           $(".link_text_option").show();
       //      $(".content_font").show();
       //      $(".content_fontsize").show();
           $(".editPicker").show(); 
      /* 22-6-16 start */
      var TextOptionValue = $("#present .change_text_area > h2").css('font-family');
          TextOptionValue = TextOptionValue.replace(/\"/g, "");
         
       $(".compoNent58 .content_font option").each(function () {
        var TextFontValue = $(this).val();
        if(TextFontValue == TextOptionValue){
          $(this).prop("selected", true);
         } else {
            $(this).prop("selected", false);
        }
      });
      
      var TextOptionValue1 = $("#present .change_text_area > p").css('font-family');
          TextOptionValue1 = TextOptionValue1.replace(/\"/g, "");
        
       $(".compoNent58 .content_font14 option").each(function () {
        var TextFontValue1 = $(this).val();
        if(TextFontValue1 == TextOptionValue1){
          $(this).prop("selected", true);
         } else {
            $(this).prop("selected", false);
        }
      });
      
      /* 22-6-16 end */
       $(".content_fontsize").show();
           $(".content_font14").show();
           $(".content_fontsize14").show();
           $(".editPicker15").show();
           //$('.content_fontsize14 option:eq(6)').remove();
           $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present .half_widget_img > img").attr("src"));
           $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present .full_widget_img > img").attr("src"));
           $(".link_textbox").val($("#present").attr("ex_url"));
          if($(".link_textbox").val() != ''){
          $(".link_text_option input").prop("checked", true);
          $(".link_text_option input.link_textbox").prop( "disabled", false);
          }
          else{
          $(".link_text_option input").prop("checked", false);
          $(".link_text_option input.link_textbox").prop( "disabled", true);
          }
          
           return;
        } 
        else {
          
          $(".subHeadingOption").hide();
          $(".link_text_option").hide();
         // $(".content_font").hide();
          $(".content_fontsize").hide();
         // $(".editPicker").hide();
          $(".content_fon14").hide();
          $(".content_fontsize14").hide();
          $(".editPicker15").hide();
          
        }
        /* Change text option 23-5-16 end*/

        $(".editPicker").css("background-color", $("#present p").css("color"));
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));
    //$(".content_font").val($("#present p:not('.widgetClose')").css('font-family').replace(/'/g, ""));
        $(".content_fontsize").val($("#present p").css("font-size").replace("px", ""));
    
    /* 22-6-16 start*/
    if($("#present").hasClass("fontfamily")){
      var contentFont = $("#present .half_widget_text > p").css("font-family");
      //alert(contentFont);
      contentFont   = contentFont.replace(/\"/g, "");
      //console.log(contentFont);
      $(".mapwidgetEdit .content_font option").each(function () {
      var contentOption = $(this).val();
      //console.log(contentOption);
      if(contentOption == contentFont){
      $(this).prop("selected", true);
      }
      });
    }
    
    if($("#present").hasClass("fontchange")){
      var fontchange = $("#present .full_widget_text > p").css("font-family");
      //alert(fontchange);
      fontchange   = fontchange.replace(/\"/g, "");
      //console.log(fontchange);
      $(".mapwidgetEdit .content_font option").each(function () {
      var fontchangeOption = $(this).val();
      //console.log(contentOption);
      if(fontchangeOption == fontchange){
      $(this).prop("selected", true);
      }
      });
    }

         if ($('#present').hasClass('half_widget')) {
       $(".half-bg-change").show();
            $(".editPicker").css("background-color", $("#present .half_widget_text > p").css("color"));
        }
        else{
            $(".half-bg-change").hide();
        }
        if ($('#present').hasClass('full_widget')) {
       $(".full-bg-change").show();
            $(".editPicker").css("background-color", $("#present .full_widget_text > p").css("color"));            
        }
        else{
            $(".full-bg-change").hide();
        }
       
	       $("#screen").prop('checked', true);
			var prodlist = $('#present').attr('data-product');
			var hasChild = $('#present').attr('data-hasChild');
			if(hasChild != "1")
			{
			hasChild="0";	
			}
			var valmaincat = $('#present').attr('data-maincategory');
			var valmaincatname = $('#present').attr('data-maincategory-name');			
			if ((typeof valmaincat != 'undefined') && (typeof valmaincatname != 'undefined')) {				
			$("#categoryRadio").prop('checked', true);
			var  catHtml ="<div class='background_label'><label>Choose a Category:</label></div><div class='background_colorbox'> <select class='selectmaincategory' id='selectedcategory' name='selectedcategory'><option haschild="+hasChild+" value="+valmaincat+" selected>"+valmaincatname+"</option></select><em>Click to change selected category or product</em></div>";
			$('.mainCategory').html(catHtml);
			$('#selectedcategory option[value='+valmaincat+']').prop('selected', 'selected'); 
			
    for (var i = 0; i < 100; i++) {
         var valmainsubcat = $('#present').attr('select-subcategory' + i);
         if (typeof valmainsubcat != 'undefined') 
		 {		
			var catnamedrop= $('#present').attr('select-subcategory-name' + i);
			var dropdownSub="<div class='removeCategory clearfix'><div class='background_label'><label>Choose a Sub Category:</label></div><div class='background_colorbox'><select  class='selectedsubcategory' id='selectsubcategories'  name='selectedsubcategory'><option haschild="+hasChild+" value="+ valmainsubcat +" selected>"+ catnamedrop +"</option></select></div></div>";
			$('.subcategory').append(dropdownSub);
			$(".selectedsubcategory").eq(i).val(valmainsubcat); 
		 } else {
           break;
         }
       }
	  if(typeof prodlist != 'undefined')
											{
												var prodlistname=$('#present').attr('data-product-name');
												var prodHtml="<div class='removeCategory clearfix'><div class='background_label'><label>Choose a Product:</label></div><div class='background_colorbox'><select class='mainselectedproduct' id='selectedproduct' name='selectedproduct'><option haschild="+hasChild+" value="+ prodlist +" selected>"+ prodlistname +"</option></select></div></div>";
												$('#product').html(prodHtml);
												$("#selectedproduct").val(prodlist); 													
												$("#present").attr('data-product', prodlist);	
											}
			}	   
             
        if ($('#present').hasClass('custom_widget')) {
            $(".widgetEdit").show();
            $(".content_textbox_edit").show();
        }

		if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };

    }
  
    /* Change text option url update 23-5-16 start*/
    $(".link_textbox").on('input propertychange', function() {
      if($(".link_text_option input").prop("checked")){
      $("#present").attr("ex_url", $(this).val());
      }
    });
    
    $(".link_textbox").on('keyup propertychange', function() {
      if($(".link_text_option input").prop("checked")){
      $("#present").attr("ex_url", $(this).val());
      }
      
    });
    /* Change text option url update 23-5-16 end*/
  
 
    $(".video_url").on('input propertychange', function () {
        $("#present").attr("data-videoLink", $(this).val());
    });
    $(".video_url").on('keyup', function () {
        $("#present").attr("data-videoLink", $(this).val());
    });

    function map_full_widgetClick() {


        commonClick();
        $(".mapwidgetEdit").show();
        $(".mapwidgetEdit .content_fontsize").show();
        $(".mid_right_box.change_properties").removeClass("change_properties");




        $(this).attr("id", "present")
        $(".editPicker").css("background-color", $("#present p").css("color"));
    //$(".content_font").val($("#present p").css("font-family").replace(/'/g, ""));
    /*27-6-16 start*/
    var mapWidgetValue = $("#present .full_widget_text > p").css("font-family");
        mapWidgetValue = mapWidgetValue.replace(/\"/g, "");
        $(".mapwidgetEdit .content_font option").each(function (){
        var mapFontValue = $(this).val();
        if(mapFontValue == mapWidgetValue){
          $(this).prop("selected", true);
        }
        else{
            $(this).prop("selected", false);
        }
      });
    /*27-6-16 end*/
        $(".content_fontsize").val($("#present p").css("font-size").replace("px", ""));


        $(".latitude_edit").val($(this).attr("data-latitude"));

        $(".longitude_edit").val($(this).attr("data-longitude"));
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(".content_textbox_edit").val($("#present .full_widget_text").find("p").text());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };

    }


    // For Editing of the widget without text

    function noTetxtWidgetClick() {

        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".fullItemEdit").show();
        $(".widgetLinkEdit").show();
        $(".videoEdit").show();
        $(".video_url").val($(this).attr("data-videolink"));
        var previousLink = $(this).attr("data-link");

        if (previousLink != undefined)
        {
            $(".widgetlinkSelector").val(previousLink);

        }
        else
        {
            $(".widgetlinkSelector").val("1");
        }

        $(this).attr("id", "present")
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));

        $(".screen_name").val($("#pageSelector option:selected").text());
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };


    }

    // For Editing of the full widget with heading content

    function headContWidgetClick() {

        commonClick();
        $(".mid_right_box.change_properties").removeClass("change_properties");
        $(".fullItemEdit").show();
        $(".widgetLinkEdit").show();
        $(".headContWidgetEdit").show();
		$(".social_sharing").show();

        $(".videoEdit").show();
        $(".video_url").val($(this).attr("data-videolink"));
        var previousLink = $(this).attr("data-link");

        if (previousLink != undefined)
        {
            $(".widgetlinkSelector").val(previousLink);

        }
        else
        {
            $(".widgetlinkSelector").val("1");
        }

        $(".content_textbox_edit1").val($(this).find(".img_heading").text());
        $(".content_textbox_edit2").val($(this).find(".img_content").text());
        $(".screen_name").val($("#pageSelector option:selected").text());
        $(this).attr("id", "present")
    
    /*22-6-16 start*/
    if($("#present").hasClass("img_text")){
    var contentOneFont = $("#present .half_widget_img_text > p.img_heading").css("font-family");
    contentOneFont   = contentOneFont.replace(/\"/g, "");
    $(".headContWidgetEdit .content_font1 option").each(function () {
    var contentOneOption = $(this).val();
    if(contentOneOption == contentOneFont){
    $(this).prop("selected", true);
    }
    });
    }
    /*22-6-16 end*/
    /*27-6-16 start*/
    if($("#present").hasClass("head_cont")){
    var headContValue = $("#present .full_widget_img_text > p.img_heading").css("font-family");
    headContValue   = headContValue.replace(/\"/g, "");
    $(".headContWidgetEdit .content_font1 option").each(function () {
    var headContFont = $(this).val();
    if(headContFont == headContValue){
    $(this).prop("selected", true);
    }
    });
    }
    /*27-6-16 end*/
    
    if ($("#present").find(".icon-share").length != 0) {
            $("#socialshare").prop("checked",true);
        }
        else{
            $("#socialshare").prop("checked",false);

        }
        $(".shared_text.notEdit").val($("#present").attr("data-shared-text"));
        $(".shared_link").val($("#present").attr("data-shared-link"));
        $(".editbrowse").not($('.createLogin .editbrowse')).attr("src", $("#present img").attr("src"));

        $(".editPicker6").css("background-color", $("#present p.img_heading").css("color"));
        $(".editPicker7").css("background-color", $("#present p.img_content").css("color"));
    //$(".content_font1").val($("#present p.img_heading").css("font-family").replace(/'/g, ""));
        //$(".content_font2").val($("#present p.img_content").css("font-family").replace(/'/g, ""));
        $(".content_fontsize1").val($("#present p.img_heading").css("font-size").replace("px", ""));
        // $(".content_fontsize2").val($("#present p.img_content").css("font-size").replace("px", ""));

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };


    }
    $(".content_textbox_edit1").on('input propertychange', function () {
        var txt1 = $(this).val();
        $("#present").find("p.img_heading").text(txt1);
    });
    $(".content_textbox_edit1").on('keyup', function () {
        var txt1 = $(this).val();
        $("#present").find("p.img_heading").text(txt1);
    });
    $(".content_textbox_edit2").on('input propertychange', function () {
        var txt1 = $(this).val();
        $("#present").find('.full_widget_img_text').children("p.img_content").text(txt1);
    });
    $(".content_textbox_edit2").on('keyup', function () {
        var txt1 = $(this).val();
        $("#present").find('.full_widget_img_text').children("p.img_content").text(txt1);
    });


    $(".mid_right_box").last().find(".mid_right_box_body").children("div").hide();

    //For Editing the Banner

    function bannerClickEdit() {

        $(".bannereditbrowse").attr("src", "images/browse_full_img.jpg")
        commonClick();

        $(".bannerEdit").show();
        $(".mid_right_box.change_properties").removeClass("change_properties");

        $(this).attr("id", "presentBanner");
        $(".bannerEdit .change_image").each(function (index) {
            $(this).find("img").attr("src", $("#presentBanner img").eq(index).attr("src"));

        });
        $(".screen_name").val($("#pageSelector option:selected").text());

        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').last());
        };



    }

    $('.content_textbox_edit').on('input propertychange', function () {
        var txt1 = $(this).val();
        $("#present").find('[class$="_widget_text"]').children("p").text(txt1);
        $("#present").find('.contact_card_text').children("p").text(txt1);
        if ($('#present').hasClass('custom_widget')) {
            var txt1 = $(this).val();
            $("#present").find(".small_widget_edit_text p").text(txt1);
        }
       if ($('#present').hasClass('change_text_option')) {
            var txt1 = $(this).val();
            $("#present").find(".change_text_area h2").text(txt1);
        }
      if ($('#present').hasClass('social_icons')) {
            var txt1 = $(this).val();
            $("#present").find(".next").text(txt1);
        }
       
    });
    $('.content_textbox_edit').on('keyup', function () {
        var txt1 = $(this).val();
        $("#present").find('[class$="_widget_text"]').children("p").text(txt1);
        $("#present").find('.contact_card_text').children("p").text(txt1);
        if ($('#present').hasClass('custom_widget')) {
            var txt1 = $(this).val();
            $("#present").find(".small_widget_edit_text p").text(txt1);
        }
      if ($('#present').hasClass('change_text_option')) {
            var txt1 = $(this).val();
            $("#present").find(".change_text_area h2").text(txt1);
        }
      if ($('#present').hasClass('social_icons')) {
            var txt1 = $(this).val();
            $("#present").find(".next").text(txt1);
        }
      
    });


    $(".latitude_edit").on('input propertychange', function () {
        var txt1 = $(this).val();
        $("#present").attr("data-latitude", txt1);
    });
    $(".latitude_edit").on('keyup', function () {
        var txt1 = $(this).val();
        $("#present").attr("data-latitude", txt1);
    });
    $(".longitude_edit").on('input propertychange', function () {
        var txt1 = $(this).val();
        $("#present").attr("data-longitude", txt1);
    });
    $(".longitude_edit").on('keyup', function () {
        var txt1 = $(this).val();
        $("#present").attr("data-longitude", txt1);
    });


    //trigger the click of browse image in edit option

    //  $(".editbrowse").click(function () {

    //    $(".editbrowse_img").eq(0).trigger('click');
    //});
    $(".bigWidgetbrowse").click(function () {

        $(".editbrowse_img").eq(0).trigger('click');
    });
    $(".bigWidgetTextbrowse").click(function () {

        $(".editbrowse_img").eq(0).trigger('click');
    });
    $(".bigWidgetAboutbrowse").click(function () {

        $(".editbrowse_img").eq(0).trigger('click');
    });
    $(".fullLongWidgetbrowse").click(function () {

        $(".editbrowse_img").eq(0).trigger('click');
    });

    $(".editcontact").click(function () {

        $("#editcontact_img").trigger('click');
    });


    $(document).on("click", ".icon_upload_img", iconUploadFunction)
       /*Social icons Widget Click-Star-06-6-16*/ 
    function iconUploadFunction() {
        $(".popup_container").fadeIn();
        $(".icon_set_popup").fadeIn();
       if($(this).parents(".menu_body_links").length){
        $(this).parents(".menu_body_links").attr("id", "presentIcon");
    }
      else{
        $(this).parents(".social_icon_replace").attr("id", "presentIcon");
      }
     //  console.log($(this).parents(".menu_body_links"));
    }
    $(document).on("click", ".icon", selectedIcon);
    function selectedIcon()
    {

      
        if($("#presentIcon").hasClass("social_icon_replace")){
            $('#present .next-icon i').removeClass().addClass($(this).children('span').prop('class'));
         //   $("#presentIcon").removeAttr("id")
            $("#presentIcon").find(".icon_upload_img").replaceWith('<span class="icon_upload_img"></span>');
            $("#presentIcon").find("span.icon_upload_img").addClass($(this).children('span').prop('class'));
            $(".popup_container").fadeOut();
            $(".icon_set_popup").fadeOut();
         
        }
        else if($('.icon_set_popup').hasClass('form_icon')){
            $('#presentFormIcon').find('.form_icon_select').replaceWith('<span class="form_icon_select"></span>');
            $('#presentFormIcon').find('span.form_icon_select').addClass($(this).children('span').prop('class'));
            if($('#present .full_textbox_inner .common_icon_box span').length!=0){
                $('#present .full_textbox_inner .common_icon_box span').attr('class', $(this).children('span').prop('class'));
            } else {
                $('#present .full_textbox_inner .common_icon_box img').replaceWith('<span></span>');
                $('#present .full_textbox_inner .common_icon_box span').attr('class', $(this).children('span').prop('class'));
            }
            if($('#present .full_textarea_inner .common_icon_box span').length!=0){
                $('#present .full_textarea_inner .common_icon_box span').attr('class', $(this).children('span').prop('class'));
            } else {
                $('#present .full_textarea_inner .common_icon_box img').replaceWith('<span></span>');
                $('#present .full_textarea_inner .common_icon_box span').attr('class', $(this).children('span').prop('class'));
            }
            $("#presentFormIcon").removeAttr("id")
            $(".icon_set_popup").removeClass('form_icon');
            $(".popup_container").fadeOut();
            $(".icon_set_popup").fadeOut();
        } else {
        $("#presentIcon").find(".icon_upload_img").replaceWith('<span class="icon_upload_img"></span>');
        $("#presentIcon").find("span.icon_upload_img").addClass($(this).children('span').prop('class'));
        $('nav > ul').find("[data-link='" + $("#presentIcon").attr("data-ind") + "']").find("span").eq(0).find("img").remove();
        $('nav > ul').find("[data-link='" + $("#presentIcon").attr("data-ind") + "']").find("span").eq(0).attr("class", "");
        $('nav > ul').find("[data-link='" + $("#presentIcon").attr("data-ind") + "']").find("span").eq(0).addClass($(this).children('span').prop('class'));
        pageDetails[$('#presentIcon').attr("data-ind") - 1].icon = $(this).children('span').prop('class');
        $("#presentIcon").removeAttr("id")
        $(".popup_container").fadeOut();
        $(".icon_set_popup").fadeOut();
        $("[class*='widget'] span[class^='icon'], .contact_card span[class^='icon']").css("color", $(".mobile .theme_head").css("background-color"));
    }
	
       /*Social icons Widget Click-end-06-6-16*/   
	}

//for editing the banner image

    $(".bannereditbrowse").click(function () {
        $("#presentBannerImg").removeAttr("id");
        $(this).attr("id", "presentBannerImg");
        $(".editbrowse_img").eq(0).trigger('click');
    });

    function detectIE() {
        var ua = window.navigator.userAgent;

        var msie = ua.indexOf('MSIE ');
        if (msie > 0) {
            // IE 10 or older => return version number
            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
        }

        var trident = ua.indexOf('Trident/');
        if (trident > 0) {
            // IE 11 => return version number
            var rv = ua.indexOf('rv:');
            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
        }

        var edge = ua.indexOf('Edge/');
        if (edge > 0) {
            // IE 12 => return version number
            return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
        }

        // other browser
        return false;
    }

    $(".appbannereditbrowse").click(function () {

        $("#presentBannerImgset").removeAttr("id");
        $(this).attr("id", "presentBannerImgset");
        var $image = $('.img-container > img');
        if (checkAppName() === 1) {
            $("a#openModalW").trigger("click");
            $(".modal-title .resolution").html("1080px &times; 540px");

            $('#cropper-example-2-modal').on('shown.bs.modal', function () {
                $image.cropper('destroy').cropper({
                    aspectRatio: 2,
                    /*minContainerWidth: 667,
                    minContainerHeight: 334,
                    minCropBoxWidth: 500,
                    minCropBoxHeight: 250,*/
                    data: {
                        width: 500,
                        height: 250
                    },
//                    strict: false,
                    highlight: false,
                    viewMode: 1
                    /*dragCrop: false,
                    cropBoxMovable: false,
                    cropBoxResizable: false*/
                });
            }).on('hidden.bs.modal', function () {
                $(".modal-backdrop.in").css({'display': 'none', 'opacity': '0'});
                $(".modal").css('display', 'none');
                $image.cropper('destroy');
            });
        }
        else {
            fnErrAppName();
        }
       
        
    });


    $(document).on("change", ".editbrowse_img", editbrowse_imgFunction);
    function editbrowse_imgFunction() {

        var appnameempty = checkAppName();

        if (appnameempty == '1') {
            $('.image_size').css('display', 'none');
            saveAppPanel();
            $("#page_ajax").html('').show();
            $(".popup_container").css("display", "none");
            $('#screenoverlay').fadeIn();

            var file = this.files[0];

            var size = parseFloat(file.size / 1024).toFixed(2);

            if (size > 2048)
            {
                $('#screenoverlay').hide();
                $('.popup_container').fadeIn();
                $('.image_size').css('display', 'block');
                $('.image_size .image_size_body .image_size_form input:button').on('click', function () {
                    $('.image_size').hide();
                    $('.popup_container').hide();
                })
                return false;
            }

            $.ajax({
                type: "POST",
                url: "login.php",
                data: "check=login",
                success: function (response) {
                    var res = response.split("##");
                    var app_id = res[1];
                    var autherId = res[0];
                    if (res[0] != '') {

                        if (app_id == '') {
                            app_id = $("#app_id").val();
                        }
                        else {
                            $("#app_id").val(app_id);
                        }

                        if (app_id != '') {

                            $("#author_id").val(autherId);
                            //send html to server
//                            shresponse = send_html(app_id, autherId);

                            setTimeout(function () {
                                $('#screenoverlay').fadeOut();
                            }, 30000);
 var oldsrc = $("#present").find("img").eq(0).attr('src');
            if (typeof oldsrc == 'undefined') {
              oldsrc = '';
            }
                            //var imageType = ;
                            var timenow = Date.now();
                            if ((file.type.match(/image.jpg/)) || (file.type.match(/image.jpeg/)) || (file.type.match(/image.png/))) {
                                var reader = new FileReader();
                                reader.onload = function (e) {
                                    $.ajax({
                                        type: "POST",
                                        url: "imageload.php",
                                        data: "image=" + reader.result + "&imgname=" + "panelimage/" + timenow + file.name + "&oldsrc=" + oldsrc,
                                        async: false,
                                        success: function (response) {
                                            if (response)
                                            {
                                                var newresponse = $.parseJSON(response);

                                                var imagename = newresponse.imageurl;
                                                var imgwidth = newresponse.width;
                                                var imgheight = newresponse.height;

                                                var imagePath =  imagename;

																$("#present").find("img").eq(0).attr("src", imagePath);
																$("#present").find("img").eq(0).attr("data-width", imgwidth);
																$("#present").find("img").eq(0).attr("data-height", imgheight);

																$("#presentBanner").children("img").eq($("#presentBannerImg").parents(".change_image").index(".change_image")).attr("src", imagePath);
																$(".bannereditbrowse#presentBannerImg").attr("src", imagePath);
																$(".editbrowse").attr("src", imagePath);

																savehtml();

																//$('#savehtml').trigger('click');

																var tmpImg = new Image();
																tmpImg.src = imagePath;
																tmpImg.onload = function () {
																	$('#screenoverlay').fadeOut();
																};
                                            }

                                            else
                                            {
                                                $('#screenoverlay').fadeOut();

                                                /* var imagePath ="../frameworkphp/images/ajax-loader.gif";
                                                 $("#present").find("img").eq(0).attr("src",imagePath );
                                                 $("#presentBanner").children("img").eq($("#presentBannerImg").parents(".change_image").index()-1).attr("src",imagePath); 
                                                 $(".bannereditbrowse#presentBannerImg").attr("src",imagePath);
                                                 $(".editbrowse").attr("src", imagePath); */

                                            }
                                        },
                                        error: function () {
                                            $(".cropcancel").trigger("click");
                                            $("#page_ajax").html('').hide();
                                            $(".popup_container").css({'display': 'block'});
                                            $(".confirm_name .confirm_name_form").html('<p>Oops! Something went wrong</p>Please try again or check your internet connection');
                                            $(".confirm_name").css({'display': 'block'});
                                            return false;
                                        }
                                    });
                                }
                                reader.readAsDataURL(file);
                            }
                            else
                            {
                                $('#screenoverlay').hide();
                                $('.popup_container').fadeIn();
                                $('.image_type').css('display', 'block');
                                $('.image_type .image_type_body .image_type_form input:button').on('click', function () {
                                    $('.image_type').hide();
                                    $('.popup_container').hide();
                                })
                            }
                            $(".editbrowse_img").replaceWith('<input type="file" class="editbrowse_img">');
                        }
                        else
                        {
                            $('#screenoverlay').fadeOut('fast', function () {

                                $("#page_ajax").html('').hide();

                                $('.mid_section_right').find('.mid_right_box').first().find('.mid_right_box_head').trigger('click');
                            });
                            /*$(".cropcancel").trigger("click");
                            $(".popup_container").css({'display': 'block'});
//                            $(".confirm_name .confirm_name_form .textpop").html('');
                            $(".confirm_name .confirm_name_form .textpop").html('Please choose app name');
                            $(".confirm_name").css({'display': 'block'});*/
                            fnErrAppName();
                        }
                    }
                    else
                    {
                        $('#screenoverlay').fadeOut();
                        $("#page_ajax").html('').hide();
                        $("#login_type").val("");
                        $("#login_type").val("page");
                        $("#login_email").val('');
                        $("#login_password").val('');
                        $("#register_email").val('');
                        $("#register_password").val('');
                        $("#register_repeat_password").val('');
                        $(".popup_container").css("display", "block");
                        $(".login_popup").css("display", "block");
                        $("#email_error").text("");
                        $("#login_email").css("border", "1px solid #e5e5e5");
                        $("#login_password").css("border", "1px solid #e5e5e5");
                        $("#register_email").css("border", "1px solid #e5e5e5");
                        $("#register_password").css("border", "1px solid #e5e5e5");
                        $("#register_repeat_password").css("border", "1px solid #e5e5e5");
                        $("#remail_error").text('');
                        return false;

                    }
                },
                error: function () {
                    $(".cropcancel").trigger("click");
                    $("#page_ajax").html('').hide();
                    $(".popup_container").css({'display': 'block'});
                    $(".confirm_name .confirm_name_form").html('<p>Oops! Something went wrong</p>Please try again or check your internet connection');
                    $(".confirm_name").css({'display': 'block'});
                    return false;
                }
            });
        } else {
            fnErrAppName();
        }

    }

    
    //Toggle of Nav bar

    $(document).on("click", ".theme_head a.nav_open", navOpenFunction);
    function navOpenFunction(e) {
        e.stopPropagation();
			$(".mobile nav").css("height","430px");
			$(".mobile nav ul").css("height","370px");
			
			if($(".mobile nav .navfooter").length==0){
				
				$(".mobile nav").append("<div class='navfooter'><p >Powered By Instappy.</p><p >© 2015 Instappy.com All Rights Reserved</p></div>")
			}
			if($(".mobile nav ul").hasClass("mCustomScrollbar")==false){
                console.log("dsad");
				$(".mobile nav ul").mCustomScrollbar({
                    scrollInertia: 200
                });
			}
			
			if($(".mobile nav").hasClass('show_div'))
			{
                $("#content-1").mCustomScrollbar({
                    scrollInertia: 200
                });
			}
			else{
                $("#content-1").mCustomScrollbar('destroy');
			}
        $(".mobile nav").css("background-color", $(".mobile .theme_head").css("background-color"));
        $(".navItemEdit").show();
        $("nav").toggleClass("show_div");
        $(".overlay").fadeToggle("fast");
        $("[class*='widget'] span[class^='icon'], .contact_card span[class^='icon']").css("color", $(".mobile .theme_head").css("background-color"));
        if($('.previewEditArea p.edit').hasClass('active')){
            $('.mobile nav ul div:first div:first').sortable({
                disabled: false,
                items: "li:not(.unsortable)"
            });
            $('.mobile nav ul li a').css('cursor','n-resize');
        } else {
            $('.mobile nav ul div:first div:first').sortable({
                disabled: true
            });
            $('.mobile nav ul li a').css('cursor','pointer');
        }
        $('.mobile nav ul li[data-link=s1]').addClass('unsortable');
        $('.mobile nav ul li[data-link=s2]').addClass('unsortable');
    }


    $(document).on("click", ".overlay", overlayFunction);
    function overlayFunction() {
        $("nav").removeClass("show_div");
        $(".overlay").fadeOut("fast");
    }
    $(document).on("click", ".theme_head", themeHeadFunction);
    function themeHeadFunction() {
        $("nav").removeClass("show_div");
        $(".overlay").fadeOut("fast");
    }


    //Link each nav bar item
    function navLinking()
    {

        $(".theme_head a.nav_open").trigger("click");


        var link = $(this).attr("data-link");
        //console.log("Link is"+link)
        if (link == "s1" || link == "s2"|| link == "s3") {

            $(".container.droparea").empty();
            $(".banner").remove();
            var temp = link.replace('s', '') - 1;
            $(".container.droparea").html(staticStoredPages[temp].content);
            $(".theme_head h1:first").text(staticStoredPages[temp].name);
            setSelectedPageIndex(link);
            if(temp==0){
                if($(".mobile .ad_widget").length==1)
                {
                    $(".mobile .ad_widget").remove();
                    $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")
                }
                else{
                    if($(".container.droparea .ad_widget").length==0){
                            $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")

                    }
                }
                    
            }
            else{
                if($(".container.droparea+.ad_widget").length==1)
                {
                    $(".container.droparea+.ad_widget").remove();
                    
                }
            }
        }
        else
        {

            var temp = link - 1;
            $(".container.droparea").empty();
            $(".banner").remove();
            if (storedPages[temp].banner == undefined || storedPages[temp].banner == "")
            {
                $(".container.droparea").html(storedPages[temp].contentarea);
            }
            else
            {
                $(".container.droparea").html(storedPages[temp].contentarea);
                $("<div class='banner'>" + storedPages[temp].banner + "</div>").insertAfter(".overlay");
            }
            if(temp==0){
                if($(".mobile .ad_widget").length==1)
                {
                    $(".mobile .ad_widget").remove();
                    $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")
                }
                else{
                    if($(".container.droparea .ad_widget").length==0){
                            $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")

                    }
                }    
            }
            else{
                if($(".container.droparea+.ad_widget").length==1)
                {
                    $(".container.droparea+.ad_widget").remove();
                    
                }
            }
            setSelectedPageIndex(link);
            startShapeShift();
            $(".widgetClose").addClass("disabled");
            $("#pageSelector").val(link);

        }


    }
    //update data of Nav bar


    updateLinkNavItems();


    $(".actionBar").find("[type=text]").on('input propertychange', function () {

        $(".theme_head").find("h1").text($(this).val());
    });
    $(".actionBar").find("[type=text]").on('keyup', function () {

        $(".theme_head").find("h1").text($(this).val());
    });


    $(".nav_item").on('input propertychange', function () {
        var ind = $(this).index(".nav_item");
        var menutext = $(this).val();

        $(" nav > ul > li").eq(ind).find("a > span:nth-child(2)").text(menutext);
    });
    $(".nav_item").on('keyup', function () {
        var ind = $(this).index(".nav_item");
        var menutext = $(this).val();

        $(" nav > ul > li").eq(ind).find("a > span:nth-child(2)").text(menutext);
    });



//action Bar
    $(".actionBar .content_bold").click(function () {
        $(".theme_head").find("h1").toggleClass("bold");
    });
    $(".actionBar .content_italics").click(function () {
        $(".theme_head").find("h1").toggleClass("italic");
    });
    $(".actionBar .content_underline").click(function () {
        $(".theme_head").find("h1").toggleClass("underline");
    });
    $(".actionBar .content_fontsize").change(function () {
        $(".theme_head").find("h1").css("font-size", $(this).val() + "px");

    });

    $(".actionBar .content_font").change(function () {
        $(".theme_head").find("h1").css("font-family", $(this).val());
    });


    //For the page index selection            

    //for click on close of widget
    $(".close").on("click", function () {
        var x = $(this).parent(".menu_body_links").index(".menu_body_links");
        var noofItems = $("nav > ul li").last().index();
        $("nav > ul li").eq(x).remove();
        $(this).parent().remove();
        // Links.splice(x, 1)
        //shape();
    });


    $(".mid_right_box_body").hide();
    $(".active .mid_right_box_body").show();

//For showing the next box
    function showNext()

    {
        //populateNavBarEdit();
        updateLinkNavItems();
        populateLink();
        updateSlideNames();
        $(".save_hidden").trigger("click");
        $(".actionBarPicker").css("background-color", $(".mobile .theme_head").css("background-color"));
        $("#pagePicker").css("background-color", $(".droparea.container").css("background-color"));
        $("#actionBarTextPicker").css("background-color", $(".mobile .theme_head h1").css("color"));
        var navheading = $(".theme_head").find("h1").text();
        $(".actionBar").find("[type=text]").val(navheading);

        $("#present").removeAttr("id");
        $("#presentBanner").removeAttr("id");
        $(".mid_right_box").removeClass("active");
        $(".mid_right_box_body").hide();
        $(this).parent().addClass("active");
        $(this).siblings(".mid_right_box_body").show();


//        if(pageScroll!=1){
        $('body').animate({ scrollTop: 0 });
        $("#content-2").mCustomScrollbar('stop').mCustomScrollbar('scrollTo', $(this).parent());
//        };
        $(".mid_right_box").last().addClass("change_properties");



        $(".mid_right_box_head span i").removeClass("fa-rotate-180");
        $(this).children().children("i").addClass("fa-rotate-180");
        restartClonearea();

    }



//For closing the box
    function collapsePanel(event) {
        event.stopPropagation();
        $(".mid_right_box").removeClass("active");
        $(".mid_right_box_body").hide();
        $(this).removeClass("fa-rotate-180");
    }
    $(document).on("click", ".mid_right_box_head span i.fa-rotate-180", collapsePanel);


    $(document).on("click", ".make_app_next", make_app_nextClick);

    function make_app_nextClick() {


        if ($(".active").parent("div").hasClass("add_page"))
        {

            $(".active").parent("div").next(".mid_right_box").children(".mid_right_box_head").trigger("click");
        }
        else
        {
            $(".active").next(".mid_right_box").children(".mid_right_box_head").trigger("click");
        }
    }

    $(document).on("click", ".small_widget a", anchorclick);

    function anchorclick(event) {
        event.preventDefault();

    }
    $('.small_widget,.contact_card').bind('contextmenu', function (e) {
        return false;
    });
	
	

	
    $(document).on("click", ".preview", previewFunction);

  function previewFunction() {
        $(".edit").removeClass("active");
        $(".preview").addClass("active");
        $(".skew").css("background", "#ffcc00")
        $(".mid_right_box_body").hide();
        $(".mid_right_box").removeClass("active");
        $(".widgetClose").addClass("disabled");
        $(".mid_right_box_head i").removeClass("fa-rotate-180");
        $("#pageSelector").attr("disabled", "disabled");

        $('html, body').animate({scrollTop: 0}, 500);
        //Remove the Click Events from all the widgets
        conditionCheckForPageChange();
        $(".save_hidden").trigger("click");
        removeWidgetClickEvents();

        //Attach link Edit
        storedPagesHistory = [];
        $(document).on("click", ".droparea", widgetLinkClick);
        $(document).on("click", "nav > ul li", navLinking);
        //$(document).on("click", ".mobile .small_widget a", anchorclick);
        $(document).off("click", ".mid_right_box_head", showNext);
        $(".mid_right_box").last().addClass("change_properties");

        $('.mobile nav ul div:first div:first').sortable({
            disabled: true
        });
        $('.mobile nav ul li a').css('cursor','pointer');
        globalRestart();
        $('.container.droparea').trigger("ss-destroy");
	}


    $(".edit").click(function () {
        $("	.previewEditArea > p").removeClass("active");
        $(".edit").addClass("active");
        $(".skew").css("background", "white");
        $(".skew").css("border-right", "0px solid transparent");
        $(".widgetClose").removeClass("disabled");
        $(".mid_right_box").removeClass("active");
        $(".mid_right_box").eq(1).addClass("active");
        $(".mid_right_box").eq(1).find(".mid_right_box_body").show();
        $("#pageSelector").removeAttr("disabled");
        //Attach the click events of all the widgets
        attachWidgetClickEvents();
        //restartShapeShift();

        globalRestart();
        //Remove Widget Link Click
        $(document).off("click", ".droparea", widgetLinkClick);
        $(document).off("click", "nav > ul li", navLinking);
        $(document).on("click", ".mid_right_box_head", showNext);
        //$(document).off("click", ".mobile .small_widget a", anchorclick);
        $("#pagePicker").css("background-color", $(".droparea.container").css("background-color"));
        $(".actionBarPicker").css("background-color", $(".mobile .theme_head").css("background-color"));
        // populateNavBarEdit();
        $(".banner").remove();
        if (storedPages[0].banner == undefined || storedPages[0].banner == "")
        {
            $(".container.droparea").html(storedPages[0].contentarea);
        }
        else
        {
            $(".container.droparea").html(storedPages[0].contentarea);
            $("<div class='banner'>" + storedPages[0].banner + "</div>").insertAfter(".overlay");
        }

        $(".theme_head h1:first").text(pageDetails[0].name);
        // restartShapeShift();
          if($(".mobile .ad_widget").length==1)
                {
                    $(".mobile .ad_widget").remove();
                    $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")
                }
                else{
                    if($(".container.droparea+.ad_widget").length==0){
                            $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")

                    }
        }
        globalRestart();
        $("#present").removeAttr('id');
        $("#presentBanner").removeAttr("id");
        $(".mid_right_box_head").parent().removeClass("active");
        $(".mid_right_box_body").hide();
        $(".mid_right_box").last().find(".mid_right_box_body").children("div").hide();
        $(".mid_right_box_head i").removeClass("fa-rotate-180");
        setSelectedPageIndex("1");
        populateLink();
        firstUpdateSlideNames();
        updateSlideNames();
        $(".mid_right_box_head").eq(1).trigger("click");
        $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
        $(".mid_right_box_body").find(".utility_api_cards").eq(1).show();
        $(".utility_api_cards .utility_api_content:first > div").hide();
        $(".utility_api_cards .utility_api_content .layout1").show();
        $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
        $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
        $(".widgetClose").removeClass("disabled");
        $('.mobile nav ul div:first div:first').sortable({
            disabled: false,
            items: "li:not(.unsortable)"
        });
        $('.mobile nav ul li a').css('cursor','n-resize');

        //updateLinkNavItems();
        //populateLink();
        //updateSlideNames();
    });

    function widgetLinkClick(event) {
        var element = event.srcElement || event.target;
        var pageLink = $(element).parents('.half_widget').attr("data-link");
        if (pageLink == undefined || pageLink == "") {
            pageLink = $(element).parents('.full_widget').attr("data-link");
        }
        if (pageLink == undefined || pageLink == "") {
            pageLink = $(element).parents('.item_full_widget').attr("data-link");
        }
         if (pageLink == undefined || pageLink == "") {
            pageLink = $(element).parents('.social_icons').attr("data-link");
        }


        var temp = parseInt(pageLink) - 1;
        if (pageLink != undefined) {
            editedContent = $(".container.droparea").html();
            editedBanner = $(".banner").html();
            //store the present into the page array
            var currentArrayIndex = parseInt(selectedPageIndex) - 1;
            storedPages[currentArrayIndex].contentarea = editedContent;
            storedPages[currentArrayIndex].banner = editedBanner;

            $(".container.droparea").empty();
            $(".banner").remove();


            if (storedPages[temp].banner == undefined || storedPages[temp].banner == "")
            {
                $(".container.droparea").html(storedPages[temp].contentarea);
            }
            else
            {
                $(".container.droparea").html(storedPages[temp].contentarea);
                $("<div class='banner'>" + storedPages[temp].banner + "</div>").insertAfter(".overlay");
            }
            $(".widgetClose").addClass("disabled");
            if(temp==0){
                if($(".mobile .ad_widget").length==1)
                {
                    $(".mobile .ad_widget").remove();
                    $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")
                }
                else{
                    if($(".container.droparea .ad_widget").length==0){
                            $('<div class="ad_widget" data-component="100" data-ss-colspan="2" style="left: 0px; top: 390px;"><a href="#"><div class="ad_widget_img"><img src="http://www.instappy.com/images/rescue.jpg" alt="Image Not Found" class="mCS_img_loaded"></div><div class="ad_widget_text"><p>Rescue&apos;em</p><span>Play Now and Enjoy</span></div><div class="clear"></div></a></div>').insertAfter(".container.droparea")

                    }
                }
               
            }
            else{
                if($(".container.droparea+.ad_widget").length==1)
                {
                    $(".container.droparea+.ad_widget").remove();
                    
                }
            }
            startShapeShift();
            setSelectedPageIndex(pageLink);
            startShapeShift();
        }

    }


    function removeWidgetClickEvents() {
        $(document).off('click', '.droparea .full_widget', widgetClick);
        $(document).off('click', ".map_full_widget", map_full_widgetClick);
        $(document).off('click', '.droparea .half_widget', widgetClick);
        $(document).off('click', '.droparea .full_widget.head_cont', headContWidgetClick);
        $(document).off('click', '.droparea .half_widget.img_text', headContWidgetClick);
        $(document).off('click', '.droparea .full_widget.long_text', fullWidgetLongClick);
        $(document).off("click", ".droparea .widgetClose", widgetCloseEvent);
        $(document).off("click", ".droparea .tabbing_widget", tabbingWidgetClick);
        $(document).off("click", ".droparea .language", languagegetClick);
    $(document).off("click", ".droparea .animat-tab", animatTabgetClick);
        $(document).off("click", ".droparea .contact_widget", contactWidgetClick);
        $(document).off("click", ".droparea .item_full_widget", fullItemWidgetClick);
        $(document).off("click", ".droparea .contact_small_widget", contactSmallWidgetClick);
        $(document).off("click", ".droparea .contact_img_widget", contactImgWidgetClick);
        $(document).off("click", ".droparea .head_disc_widget", headDiscWidgetClick);
        $(document).off("click", ".droparea .small_widget", smallWidgetClick);
        $(document).off("click", ".droparea .social_feed", smallWidgetClick);
        $(document).off("click", ".banner", bannerClickEdit);
        $(document).off("change", "#pageSelector", pageSelectorChange);
        $(document).off("click", ".droparea .festival-card", festivalWidgetClick);
        $(document).off("click", ".droparea .item_full_widget_event", festivalFullWidgetClick);
        $(document).off("click", ".droparea .calendar-card", calenderWidgetClick);
        $(document).off("click", ".droparea .audio", audioWidgetClick);
        $(document).off('click', '.droparea .big_widget', bigWidgetClick);
        $(document).off("click", ".social_icons", socialIconsWidget);        
        //$(document).off('click', '.droparea .big_widget_text', bigWidgetTextClick);
        $(document).off('click', '.droparea .big_widget_text.about', bigWidgetAboutClick);
        $(document).off("click", ".droparea .contact_card", contact_card_edit);
		     $(document).on('click', '.droparea .full_textbox', fullTextboxClick);
        $(document).on('click', '.droparea .label_left_textbox', labelLeftTextboxClick);
        $(document).on('click', '.droparea .full_textbox_Label', fullTextboxLabelClick);
        $(document).on('click', '.droparea .full_textbox_icon', fullTextboxIconClick);
        $(document).on('click', '.droparea .full_textarea', fullTextareaClick);
        $(document).on('click', '.droparea .label_left_textarea', LabelLeftTextareaClick);
        $(document).on('click', '.droparea .full_textarea_Label', fullTextareaLabelClick);
        $(document).on('click', '.droparea .full_textarea_icon', fullTextareaIconClick);
        $(document).on('click', '.droparea .full_selectbox', fullSelectboxClick);
        $(document).on('click', '.droparea .label_left_selectbox', labelLeftSelectboxClick);
        $(document).on('click', '.droparea .radio_input_box', radioInputBoxClick);
        $(document).on('click', '.droparea .check_input_box', checkInputBoxClick);
        $(document).on('click', '.droparea .full_description', fullDescriptionClick);
        $(document).on('click', '.droparea .full_label', fullLabelClick);
        $(document).on('click', '.droparea .full_button', fullButtonClick);
        $(document).on('click', '.droparea .small_button', fullButtonClick);
        $(document).on('click', '.droparea .label_left_tabbtn', labelLeftTabbtnClick);
        $(document).on('click', '.droparea .label_left_switch_btn', labelLeftSwitchBtnClick);
        $(document).on('click', '.droparea .full_textbox_date', fullTextboxDateClick);
        $(document).on('click', '.droparea .full_textbox_time', fullTextboxTimeClick);
    }
    function attachWidgetClickEvents() {
        $(document).on('click', '.droparea .full_widget', widgetClick);
        $(document).on('click', ".map_full_widget", map_full_widgetClick);
        $(document).on('click', '.droparea .half_widget', widgetClick);
        $(document).on('click', '.droparea .full_widget.head_cont', headContWidgetClick);
        $(document).on('click', '.droparea .half_widget.img_text', headContWidgetClick);
        $(document).on('click', '.droparea .full_widget.long_text', fullWidgetLongClick);
        $(document).on("click", ".droparea .widgetClose", widgetCloseEvent);
        $(document).on("click", ".droparea .tabbing_widget", tabbingWidgetClick);
        $(document).on("click", ".droparea .language", languagegetClick);
    $(document).on("click", ".droparea .animat-tab", animatTabgetClick);
        $(document).on("click", ".droparea .contact_widget", contactWidgetClick);
        $(document).on("click", ".droparea .contact_img_widget", contactImgWidgetClick);
        $(document).on("click", ".droparea .item_full_widget", fullItemWidgetClick);
        $(document).on("click", ".droparea .contact_small_widget", contactSmallWidgetClick);
        $(document).on("click", ".droparea .head_disc_widget", headDiscWidgetClick);
        $(document).on("click", ".droparea .small_widget", smallWidgetClick);
        $(document).on("click", ".droparea .social_feed", smallWidgetClick);
        $(document).on("click", ".banner", bannerClickEdit);
        $(document).on("change", "#pageSelector", pageSelectorChange);
        $(document).on("click", ".droparea .festival-card", festivalWidgetClick);
        $(document).on("click", ".droparea .item_full_widget_event", festivalFullWidgetClick);
        $(document).on("click", ".droparea .calendar-card", calenderWidgetClick);
        $(document).on("click", ".droparea .audio", audioWidgetClick);
        $(document).on('click', '.droparea .big_widget', bigWidgetClick);
        $(document).on("click", ".social_icons", socialIconsWidget);        
        $(document).on('click', '.droparea .big_widget_text.about', bigWidgetAboutClick);
        $(document).on("click", ".droparea .contact_card", contact_card_edit);
		  $(document).on('click', '.droparea .full_textbox', fullTextboxClick);
        $(document).on('click', '.droparea .label_left_textbox', labelLeftTextboxClick);
        $(document).on('click', '.droparea .full_textbox_Label', fullTextboxLabelClick);
        $(document).on('click', '.droparea .full_textbox_icon', fullTextboxIconClick);
        $(document).on('click', '.droparea .full_textarea', fullTextareaClick);
        $(document).on('click', '.droparea .label_left_textarea', LabelLeftTextareaClick);
        $(document).on('click', '.droparea .full_textarea_Label', fullTextareaLabelClick);
        $(document).on('click', '.droparea .full_textarea_icon', fullTextareaIconClick);
        $(document).on('click', '.droparea .full_selectbox', fullSelectboxClick);
        $(document).on('click', '.droparea .label_left_selectbox', labelLeftSelectboxClick);
        $(document).on('click', '.droparea .radio_input_box', radioInputBoxClick);
        $(document).on('click', '.droparea .check_input_box', checkInputBoxClick);
        $(document).on('click', '.droparea .full_description', fullDescriptionClick);
        $(document).on('click', '.droparea .full_label', fullLabelClick);
        $(document).on('click', '.droparea .full_button', fullButtonClick);
        $(document).on('click', '.droparea .small_button', fullButtonClick);
        $(document).on('click', '.droparea .label_left_tabbtn', labelLeftTabbtnClick);
        $(document).on('click', '.droparea .label_left_switch_btn', labelLeftSwitchBtnClick);
        $(document).on('click', '.droparea .full_textbox_date', fullTextboxDateClick);
        $(document).on('click', '.droparea .full_textbox_time', fullTextboxTimeClick);
    $(document).on('click', '.droparea .full_attachment_box', fullAttachmentBoxClick);
    }
//Widget Close
    function widgetCloseEvent(event)
    {
        $(".mid_right_box").last().addClass("change_properties");
        event.stopPropagation();
        $(this).parent().remove();
        //restartShapeShift();
        globalRestart();
        if(pageScroll!=1){
            $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').first());
        };
        ///shape();
    }




//For Popping up of hints

    $(".hint_main").on("click", function () {
        $(this).toggleClass("active");
        $(".hint_content span.open_hint").fadeToggle();
    });

    // $(".middle").css("height", height + "px")
    $("#browse").click(function () {
        $("#browse_img").trigger("click");
    });

    $(".enter_email").keypress(function (event) {
        $("#present a.your_mail img").attr("data-linkEmail", $(this).val());
    });

    function deleteScreen(page) {
        

        $(".save_hidden").trigger("click");

        var strtobeReplaced = 'data-link="' + page + '"';
        navbar = navbar.replace(strtobeReplaced, '');
        for (var j = 0; j < storedPages.length; j++) {

            storedPages[j].contentarea = storedPages[j].contentarea.replace(strtobeReplaced, '');
        }

        var tempindex = page - 1;


        for (var i = tempindex; i < pageDetails.length - 1; i++)
        {
            strtobeReplaced = 'data-link="' + parseInt(parseInt(i) + parseInt(2)) + '"'
            strreplacedwith = 'data-link="' +  parseInt(parseInt(i) + parseInt(1)) + '"'
            pageDetails[i]["index"] = pageDetails[i + 1]["index"] - 1;
            pageDetails[i]["name"] = pageDetails[i + 1]["name"];
            pageDetails[i]["icon"] = pageDetails[i + 1]["icon"];
           	pageDetails[i]["originalIndex"] = pageDetails[i + 1]["originalIndex"];
                pageDetails[i]["keyword"] = pageDetails[i + 1]["keyword"];
            storedPages[i]["banner"] = storedPages[i + 1]["banner"];
            storedPages[i]["originalIndex"] = storedPages[i + 1]["originalIndex"];

            storedPages[i]["contentarea"] = storedPages[i + 1]["contentarea"];
            storedPages[i]["index"] = storedPages[i + 1]["index"] - 1;
            storedPages[i]["layouttype"] = storedPages[i + 1]["layouttype"];
            navbar = navbar.replace(strtobeReplaced, strreplacedwith);
            for(var jk=0;jk<pageDetails.length-1;jk++)
            {                //console.log(strtobeReplaced)
                //console.log(strreplacedwith)
                storedPages[jk].contentarea = storedPages[jk].contentarea.replace(strtobeReplaced, strreplacedwith);
    
            }           

        }

        pageDetails.pop();
        storedPages.pop();
        deletedScreenCount = deletedScreenCount + 1;
        $(".banner").remove();
        if (storedPages[0].banner == undefined || storedPages[0].banner == "")
        {
            $(".container.droparea").html(storedPages[0].contentarea);
        }
        else
        {
            $(".container.droparea").html(storedPages[0].contentarea);
            $("<div class='banner'>" + storedPages[0].banner + "</div>").insertAfter(".overlay");
        }

        $(".theme_head h1:first").text(pageDetails[0].name);
        // restartShapeShift();
        globalRestart();
        $("#present").removeAttr('id');
        $("#presentBanner").removeAttr("id");
        $(".mid_right_box_head").parent().removeClass("active");
        $(".mid_right_box_body").hide();
        $(".mid_right_box").last().find(".mid_right_box_body").children("div").hide();
        $(".mid_right_box_head i").removeClass("fa-rotate-180");
        setSelectedPageIndex("1");
        populateLink();
        firstUpdateSlideNames();
        updateSlideNames();
        $(".mid_right_box_body").find(".utility_api_cards").eq(0).show();
        $(".mid_right_box_body").find(".utility_api_cards").eq(1).show();
        $(".utility_api_cards .utility_api_content:first > div").hide();
        $(".utility_api_cards .utility_api_content .layout1").show();
        $(".mid_right_box_body").find(".utility_api_cards").eq(2).show();
        $(".mid_right_box_body").find(".utility_api_cards").eq(3).show();
        //send_All_html();
        saveOnDeletehtml();
     /*   var eventLengthSave = $('.mobile ul.festival-list li').length - 1;
        for(i=0;i<=eventLengthSave;i++){
            eventList[i].epageindex = $('.festival-list li').eq(i).attr('data-link');
        } */
    }

    $(".delete_screen").on('click', function () {
        deleteScreen(selectedPageIndex);
    });


    $('.design_menu_box').each(function () {
        var $wrapper = $('.menu_links', this);
        $(".add_list a", $(this)).click(function (e) {
            $('.menu_body_links:last-child', $wrapper).clone(true).appendTo($wrapper);
            $('.menu_body_links:last-child').val();
            $('.menu_body_links:last-child').find(".nav_item").val("New")
            if ($(".select_feedback").prop("checked") == true) {
                $("<li><a href='#'><span><img src='images/nav_img.png'></span><span>New</span><div class='clear'></div></a></li>").insertAfter("nav > ul li:nth-last-child(4)");
            }
            else
            {
                $("<li><a href='#'><span><img src='images/nav_img.png'></span><span>New</span><div class='clear'></div></a></li>").insertAfter("nav > ul li:nth-last-child(3)");
            }
            // Links.push({from: $(".linkSelector").length, to: "1"});
        });
        $('.menu_body_links .close', $wrapper).click(function () {
            if ($('.menu_body_links', $wrapper).length > 1)
            {

                $(this).parent('.menu_body_links').remove();
            }
        });
    });

  /* Tab change image start 19-May-16*/
  $('.tab-type-animation input:radio[name="tab-title"]').on('change', function () {
    var currentValue = $(this).val();
    $('.tab-animat-right > img').attr('src', tabanimation[currentValue]);
    //   $('.tab-animat-right > img').attr('src', '');

});

  var tabanimation = {
    'text_and_icon': 'images/animation-tab-image.jpg',
    'icon_and_text': 'images/animation-tab-image1.jpg',
    'only_text': 'images/animation-tab-image2.jpg',
    'only_icon': 'images/animation-tab-image3.jpg'
  };

  /*  Tab change image end 19-May-16 */
  /*  Screen Animation change image start 19-May-16 */
  $('.screen-type-animation input:radio[name="screen-title"]').on("change", function () {
    var screenValue = $(this).val();
    $('.screen-animat-right > img').attr('src', screenAnimation[screenValue]);

  });
  var screenAnimation = {
      'page-curl-animation': 'images/page_curl_animation.png',
      'flip-from-left-animation': 'images/flip_from_left_animation.png',
      'flip-from-bottom-animation': 'images/flip_from_bottom_animation.png',
      'flipboard-animation': 'images/flipboard_animation.png'


    }
    /*  Screen Animation change image end 19-May-16 */
    /* screen animation start 16-6-16*/
  $(".screen_animat_show").on('click', function () {
    hideshow();
  });

  function hideshow() {
    if ($(".screen_animat_show input[type='checkbox']").prop("checked")) {
      $(".screen_animat_show").siblings().show();
    } else {
      $(".screen_animat_show").siblings().hide();
    }
  }
  /* screen animation end 16-6-16*/
});



/*chouse a screen start*/
  $(".link_text_option .screenConnectRadio").on('click', function () {
    $(".link_text_option input.link_textbox").prop( "disabled", false);
  }); 

  $(".background_label label").on('click', function () {
    $("#present").removeAttr("ex_url");
    var radioValue = $(this).next(".background_colorbox input.link_textbox").val()
    $("#present").attr("ex_url", radioValue);
  });

/*chouse a screen start*/
$(window).load(function(){

  $('.editDescription .content_textbox textarea').prev('div').find('.nicEdit-main').on('input propertychange', function () {
    $('#present .full_description_inner p').html($(this).html());
    globalRestart();
  });

$(".subHeading1").prev("div").find(".nicEdit-main").on('input propertychange',function () {

        $("#present").find(".address").html($(this).html());
       $("#present").find(".head_disc_content .head_disc_content_text").html($(this).html());
       //$("#present").find(".head_disc_content p").html($("#present").find(".head_disc_content p").html().replace("div","h4"));
        $(".container.droparea").shapeshift({
            colWidth: 134.5,
            minColumns: 2
        });
        var heig = $('.mobile .head_disc_widget#present').height();
        $("#content-1").mCustomScrollbar('scrollTo', $('.mobile .head_disc_widget#present'));
    if (heig > 300) {
            var req = parseInt(heig) - 300;
            $("#content-1").mCustomScrollbar('scrollTo', "'-=" + req + "'");

        }
    });
 $(".subHeading2").prev("div").find(".nicEdit-main").on('input propertychange', function () {
        $("#present").find(".phone").html($(this).html());

        globalRestart();
    });
  
   $(".tabContent").prev("div").find(".nicEdit-main").on('input propertychange', function () {
        var tempIndex = $(this).parents(".tabbing_1").index(".tabbing_1");
       
        $(".droparea .tabbing_widget").find(".tabbing_widget_body .tab_content").eq(tempIndex).find(".tab_content_text").html($(this).html());
        
        var heig = $('.mobile .tabbing_widget#present').height();
        $("#content-1").mCustomScrollbar('scrollTo', $('.mobile .tabbing_widget#present'));
        $(".container.droparea").shapeshift({
            colWidth: 134.5,
            minColumns: 2
        });
    if (heig > 300) {
            var req = parseInt(heig) - 300;
            $("#content-1").mCustomScrollbar('scrollTo', "'-=" + req + "'");

        }
    });

  $('.big_text_head7').prev('div').find('.nicEdit-main').on('input propertychange', function () {
    $('#present .long_text_content').html($(this).html());
    globalRestart();
  });

    $('.nicEdit-panel > div:nth-last-child(5), .nicEdit-panel > div:nth-last-child(6), .nicEdit-panel > div:nth-last-child(7), .nicEdit-panel > div:nth-last-child(8), .nicEdit-panel > div:last-child, .fullWidgetLongText.with_tip .nicEdit-panel > div:nth-child(9), .fullWidgetLongText.with_tip .nicEdit-panel > div:nth-child(10), .fullWidgetLongText.with_tip .nicEdit-panel > div:nth-child(11), .contact1Widget.with_tip .nicEdit-panel > div:nth-child(9), .contact1Widget.with_tip .nicEdit-panel > div:nth-child(10), .contact1Widget.with_tip .nicEdit-panel > div:nth-child(11)').remove();

 if(storedPages[0].layouttype == '4') {
    $(".mid_right_box.hidden_box").hide();
  }
});



function fnErrContactMail() {
  $(".popup_container").css({
    'display': 'block'
  });
  $(".confirm_name .confirm_name_form").html('<p>Please Enter A Valid Contact Us E-mail ID.</p><input type="button" id="btn_emailEmpty" value="OK">');
  $(".confirm_name").css({
    'display': 'block'
  });
  $(document).one('click', '#btn_emailEmpty', function () {
    $('.contactusEmail:first').parents('.mid_right_box:first').find('.mid_right_box_head').trigger('click');
    $("#content-2").mCustomScrollbar('scrollTo', $('.catalogue_add_feature.contactus:first'));
    $('.contactusEmail:first').focus();
  });
  return false;
}

function fnErrAppName() {
    $(".cropcancel").trigger("click");
    $("#page_ajax").html('').hide();
  $(".popup_container").css({
    'display': 'block'
  });
    $(".confirm_name .confirm_name_form").html('<p>App Name Not Found!</p><input type="button" id="btn_appNameEmpty" value="OK">');
  //                $(".confirm_name .confirm_name_form").html('<p>Please choose app name.</p><input type="button" value="OK">');
  $(".confirm_name").css({
    'display': 'block'
  });
    $(document).one('click', '#btn_appNameEmpty', function () {
        $("#content-2").mCustomScrollbar('scrollTo', $('.mid_right_box').first());
        $('.mid_right_box:first').find('.mid_right_box_head').trigger('click');
        $('#appName').focus();
    });
    return false;
}
 

document.getElementById("uploadBtn").onchange = function () {
  document.getElementById("uploadFile").value = this.value;
};